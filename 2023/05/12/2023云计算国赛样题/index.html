<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>2023云计算国赛样题 | Misswjy&#39;Blog</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="“云计算应用”赛项赛卷1">
<meta property="og:type" content="article">
<meta property="og:title" content="2023云计算国赛样题">
<meta property="og:url" content="http://example.com/2023/05/12/2023%E4%BA%91%E8%AE%A1%E7%AE%97%E5%9B%BD%E8%B5%9B%E6%A0%B7%E9%A2%98/index.html">
<meta property="og:site_name" content="Misswjy&#39;Blog">
<meta property="og:description" content="“云计算应用”赛项赛卷1">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-05-12T07:49:49.000Z">
<meta property="article:modified_time" content="2023-08-04T12:57:26.350Z">
<meta property="article:author" content="Miss">
<meta property="article:tag" content="云计算">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Misswjy&#39;Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  

  
<script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>

  
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  
<meta name="generator" content="Hexo 6.1.0"></head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
				<img lazy-src="/img/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
			<h1 class="header-author"><a href="/">Miss</a></h1>
		</hgroup>

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Home</a></li>
				        
							<li><a href="/archives">Archives</a></li>
				        
						</ul>
					</nav>
					<nav class="half-header-menu">
						<a class="hide">Home</a>
						<a>Tags</a>
						<a>Links</a>
						<a>About</a>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Misswjy" title="github">github</a>
					        
								<a class="mail" target="_blank" href="/dockery@foxmail.com" title="mail">mail</a>
					        
								<a class="bilibili" target="_blank" href="https://space.bilibili.com/292671654" title="bilibili">bilibili</a>
					        
						</div>
						<!-- music -->
						
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/k8s/" style="font-size: 15px;">k8s</a> <a href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/" style="font-size: 12.5px;">云计算</a> <a href="/tags/%E5%AE%B9%E5%99%A8%E4%BA%91/" style="font-size: 17.5px;">容器云</a> <a href="/tags/%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2%E5%92%8C%E8%BF%90%E7%BB%B4/" style="font-size: 10px;">应用部署和运维</a> <a href="/tags/%E7%A7%81%E6%9C%89%E4%BA%91/" style="font-size: 20px;">私有云</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/">github</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">I&#39;m a developer.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/avatar.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Home</a></li>
		        
					<li><a href="/archives">Archives</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Misswjy" title="github">github</a>
			        
						<a class="mail" target="_blank" href="/dockery@foxmail.com" title="mail">mail</a>
			        
						<a class="bilibili" target="_blank" href="https://space.bilibili.com/292671654" title="bilibili">bilibili</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-2023云计算国赛样题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/05/12/2023%E4%BA%91%E8%AE%A1%E7%AE%97%E5%9B%BD%E8%B5%9B%E6%A0%B7%E9%A2%98/" class="article-date">
  	<time datetime="2023-05-12T07:49:49.000Z" itemprop="datePublished">2023-05-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      2023云计算国赛样题
      
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/" rel="tag">云计算</a></li></ul>
	</div>

        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="“云计算应用”赛项赛卷1"><a href="#“云计算应用”赛项赛卷1" class="headerlink" title="“云计算应用”赛项赛卷1"></a>“云计算应用”赛项赛卷1<span id="more"></span></h1><h2 id="模块一-私有云（30分）"><a href="#模块一-私有云（30分）" class="headerlink" title="模块一 私有云（30分）"></a>模块一 私有云（30分）</h2><h3 id="任务1-私有云服务搭建（5分）"><a href="#任务1-私有云服务搭建（5分）" class="headerlink" title="任务1 私有云服务搭建（5分）"></a>任务1 私有云服务搭建（5分）</h3><h4 id="1-1-1-基础环境配置"><a href="#1-1-1-基础环境配置" class="headerlink" title="1.1.1 基础环境配置"></a>1.1.1 基础环境配置</h4><p>1.控制节点主机名为controller，设置计算节点主机名为compute；</p>
<p>2.hosts文件将IP地址映射为主机名。</p>
<p><strong>controller</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# hostnamectl set-hostname controller</span><br><span class="line">[root@controller ~]# su</span><br><span class="line">[root@controller ~]# hostnamectl </span><br><span class="line">   Static hostname: controller</span><br><span class="line">         Icon name: computer-vm</span><br><span class="line">           Chassis: vm</span><br><span class="line">        Machine ID: cc2c86fe566741e6a2ff6d399c5d5daa</span><br><span class="line">           Boot ID: 214933a71db6473cb11d2c126d890cdf</span><br><span class="line">    Virtualization: kvm</span><br><span class="line">  Operating System: CentOS Linux 7 (Core)</span><br><span class="line">       CPE OS Name: cpe:/o:centos:centos:7</span><br><span class="line">            Kernel: Linux 3.10.0-1160.el7.x86_64</span><br><span class="line">      Architecture: x86-64</span><br></pre></td></tr></table></figure>

<p><strong>compute</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# hostnamectl set-hostname compute</span><br><span class="line">[root@compute ~]# su</span><br><span class="line">[root@compute ~]# hostnamectl </span><br><span class="line">   Static hostname: compute</span><br><span class="line">         Icon name: computer-vm</span><br><span class="line">           Chassis: vm</span><br><span class="line">        Machine ID: cc2c86fe566741e6a2ff6d399c5d5daa</span><br><span class="line">           Boot ID: 3f03732ccb29461b9a4f3772d76ea5c3</span><br><span class="line">    Virtualization: kvm</span><br><span class="line">  Operating System: CentOS Linux 7 (Core)</span><br><span class="line">       CPE OS Name: cpe:/o:centos:centos:7</span><br><span class="line">            Kernel: Linux 3.10.0-1160.el7.x86_64</span><br><span class="line">      Architecture: x86-64</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/hosts</span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line"></span><br><span class="line">192.168.20.161	controller</span><br><span class="line">192.168.20.195	compute</span><br></pre></td></tr></table></figure>

<h4 id="1-1-2-yum源配置"><a href="#1-1-2-yum源配置" class="headerlink" title="1.1.2 yum源配置"></a>1.1.2 yum源配置</h4><p>使用提供的http服务地址，分别设置controller节点和compute节点的yum源文件http.repo。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# rm -rf /etc/yum.repos.d/*</span><br><span class="line">[root@controller ~]# cat /etc/yum.repos.d/http.repo </span><br><span class="line">[centos]</span><br><span class="line">name=centos</span><br><span class="line">baseurl=http://172.19.25.11/centos</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">[iaas]</span><br><span class="line">name=iaas</span><br><span class="line">baseurl=http://172.19.25.11/iaas/iaas-repo</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">[root@controller ~]# yum repolist</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Determining fastest mirrors</span><br><span class="line">centos                                                                                                                           | 3.6 kB  00:00:00     </span><br><span class="line">iaas                                                                                                                             | 2.9 kB  00:00:00     </span><br><span class="line">(1/3): centos/group_gz                                                                                                           | 153 kB  00:00:00     </span><br><span class="line">(2/3): iaas/primary_db                                                                                                           | 597 kB  00:00:00     </span><br><span class="line">(3/3): centos/primary_db                                                                                                         | 3.3 MB  00:00:00     </span><br><span class="line">repo id                                                                  repo name                                                                status</span><br><span class="line">centos                                                                   centos                                                                   4,070</span><br><span class="line">iaas                                                                     iaas                                                                       954</span><br><span class="line">repolist: 5,024</span><br></pre></td></tr></table></figure>

<h4 id="1-1-3-配置无秘钥ssh"><a href="#1-1-3-配置无秘钥ssh" class="headerlink" title="1.1.3 配置无秘钥ssh"></a>1.1.3 配置无秘钥ssh</h4><p>配置controller节点可以无秘钥访问compute节点。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# ssh-keygen </span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/root/.ssh/id_rsa): </span><br><span class="line">Enter passphrase (empty for no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:eMrYvgTXlKEoQ4SVWEeZlTiVZMtbt2H5Z/LAjwq9K18 root@controller</span><br><span class="line">The key&#x27;s randomart image is:</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">| *=ooB=o.        |</span><br><span class="line">|o...=+oo o .     |</span><br><span class="line">|  o ..+ + =      |</span><br><span class="line">|   o   * o =     |</span><br><span class="line">|    . + S . = o  |</span><br><span class="line">|     * o .   O   |</span><br><span class="line">|    . = . . E o  |</span><br><span class="line">|     o  .. +     |</span><br><span class="line">|      o. o=.     |</span><br><span class="line">+----[SHA256]-----+</span><br><span class="line">[root@controller ~]# ssh-copy-id root@compute </span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/root/.ssh/id_rsa.pub&quot;</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span><br><span class="line">root@compute&#x27;s password: </span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   &quot;ssh &#x27;root@compute&#x27;&quot;</span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br><span class="line"></span><br><span class="line">[root@controller ~]# ssh root@compute </span><br><span class="line">Last login: Tue Mar  7 02:18:21 2023</span><br><span class="line">[root@compute ~]#                     #无密钥连接成功</span><br></pre></td></tr></table></figure>

<h4 id="1-1-4-基础安装"><a href="#1-1-4-基础安装" class="headerlink" title="1.1.4 基础安装"></a>1.1.4 基础安装</h4><p>在控制节点和计算节点上分别安装openstack-iaas软件包。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install -y openstack-iaas</span><br><span class="line">[root@controller ~]# cat /etc/openstack/openrc.sh </span><br><span class="line">#--------------------system Config--------------------##</span><br><span class="line">#Controller Server Manager IP. example:x.x.x.x</span><br><span class="line">HOST_IP=192.168.20.161</span><br><span class="line"></span><br><span class="line">#Controller HOST Password. example:000000 </span><br><span class="line">HOST_PASS=000000</span><br><span class="line"></span><br><span class="line">#Controller Server hostname. example:controller</span><br><span class="line">HOST_NAME=controller</span><br><span class="line"></span><br><span class="line">#Compute Node Manager IP. example:x.x.x.x</span><br><span class="line">HOST_IP_NODE=192.168.20.195</span><br><span class="line"></span><br><span class="line">#Compute HOST Password. example:000000 </span><br><span class="line">HOST_PASS_NODE=000000</span><br><span class="line"></span><br><span class="line">#Compute Node hostname. example:compute</span><br><span class="line">HOST_NAME_NODE=compute</span><br><span class="line"></span><br><span class="line">#--------------------Chrony Config-------------------##</span><br><span class="line">#Controller network segment IP.  example:x.x.0.0/16(x.x.x.0/24)</span><br><span class="line">network_segment_IP=192.168.20.0/24</span><br><span class="line"></span><br><span class="line">#--------------------Rabbit Config ------------------##</span><br><span class="line">#user for rabbit. example:openstack</span><br><span class="line">RABBIT_USER=openstack</span><br><span class="line"></span><br><span class="line">#Password for rabbit user .example:000000</span><br><span class="line">RABBIT_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------MySQL Config---------------------##</span><br><span class="line">#Password for MySQL root user . exmaple:000000</span><br><span class="line">DB_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Keystone Config------------------##</span><br><span class="line">#Password for Keystore admin user. exmaple:000000</span><br><span class="line">DOMAIN_NAME=demo</span><br><span class="line">ADMIN_PASS=000000</span><br><span class="line">DEMO_PASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Mysql keystore user. exmaple:000000</span><br><span class="line">KEYSTONE_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Glance Config--------------------##</span><br><span class="line">#Password for Mysql glance user. exmaple:000000</span><br><span class="line">GLANCE_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore glance user. exmaple:000000</span><br><span class="line">GLANCE_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Placement Config----------------------##</span><br><span class="line">#Password for Mysql placement user. exmaple:000000</span><br><span class="line">PLACEMENT_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore placement user. exmaple:000000</span><br><span class="line">PLACEMENT_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Nova Config----------------------##</span><br><span class="line">#Password for Mysql nova user. exmaple:000000</span><br><span class="line">NOVA_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore nova user. exmaple:000000</span><br><span class="line">NOVA_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Neutron Config-------------------##</span><br><span class="line">#Password for Mysql neutron user. exmaple:000000</span><br><span class="line">NEUTRON_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore neutron user. exmaple:000000</span><br><span class="line">NEUTRON_PASS=000000</span><br><span class="line"></span><br><span class="line">#metadata secret for neutron. exmaple:000000</span><br><span class="line">METADATA_SECRET=000000</span><br><span class="line"></span><br><span class="line">#External Network Interface. example:eth1</span><br><span class="line">INTERFACE_NAME=eth0</span><br><span class="line"></span><br><span class="line">#External Network The Physical Adapter. example:provider</span><br><span class="line">Physical_NAME=provider</span><br><span class="line"></span><br><span class="line">#First Vlan ID in VLAN RANGE for VLAN Network. exmaple:101</span><br><span class="line">minvlan=101</span><br><span class="line"></span><br><span class="line">#Last Vlan ID in VLAN RANGE for VLAN Network. example:200</span><br><span class="line">maxvlan=200</span><br><span class="line"></span><br><span class="line">#--------------------Cinder Config--------------------##</span><br><span class="line">#Password for Mysql cinder user. exmaple:000000</span><br><span class="line">CINDER_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore cinder user. exmaple:000000</span><br><span class="line">CINDER_PASS=000000</span><br><span class="line"></span><br><span class="line">#Cinder Block Disk. example:md126p3</span><br><span class="line">BLOCK_DISK=vdb1</span><br><span class="line"></span><br><span class="line">#--------------------Swift Config---------------------##</span><br><span class="line">#Password for Keystore swift user. exmaple:000000</span><br><span class="line">SWIFT_PASS=000000</span><br><span class="line"></span><br><span class="line">#The NODE Object Disk for Swift. example:md126p4.</span><br><span class="line">OBJECT_DISK=vdb2</span><br><span class="line"></span><br><span class="line">#The NODE IP for Swift Storage Network. example:x.x.x.x.</span><br><span class="line">STORAGE_LOCAL_NET_IP=192.168.20.195</span><br><span class="line"></span><br><span class="line">#--------------------Trove Config----------------------##</span><br><span class="line">#Password for Mysql trove user. exmaple:000000</span><br><span class="line">TROVE_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore trove user. exmaple:000000</span><br><span class="line">TROVE_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Heat Config----------------------##</span><br><span class="line">#Password for Mysql heat user. exmaple:000000</span><br><span class="line">HEAT_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore heat user. exmaple:000000</span><br><span class="line">HEAT_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Ceilometer Config----------------##</span><br><span class="line">#Password for Gnocchi ceilometer user. exmaple:000000</span><br><span class="line">CEILOMETER_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore ceilometer user. exmaple:000000</span><br><span class="line">CEILOMETER_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------AODH Config----------------##</span><br><span class="line">#Password for Mysql AODH user. exmaple:000000</span><br><span class="line">AODH_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore AODH user. exmaple:000000</span><br><span class="line">AODH_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------ZUN Config----------------##</span><br><span class="line">#Password for Mysql ZUN user. exmaple:000000</span><br><span class="line">ZUN_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore ZUN user. exmaple:000000</span><br><span class="line">ZUN_PASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore KURYR user. exmaple:000000</span><br><span class="line">KURYR_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------OCTAVIA Config----------------##</span><br><span class="line">#Password for Mysql OCTAVIA user. exmaple:000000</span><br><span class="line">OCTAVIA_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore OCTAVIA user. exmaple:000000</span><br><span class="line">OCTAVIA_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Manila Config----------------##</span><br><span class="line">#Password for Mysql Manila user. exmaple:000000</span><br><span class="line">MANILA_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore Manila user. exmaple:000000</span><br><span class="line">MANILA_PASS=000000</span><br><span class="line"></span><br><span class="line">#The NODE Object Disk for Manila. example:md126p5.</span><br><span class="line">SHARE_DISK=vdb3</span><br><span class="line"></span><br><span class="line">#--------------------Cloudkitty Config----------------##</span><br><span class="line">#Password for Mysql Cloudkitty user. exmaple:000000</span><br><span class="line">CLOUDKITTY_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore Cloudkitty user. exmaple:000000</span><br><span class="line">CLOUDKITTY_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Barbican Config----------------##</span><br><span class="line">#Password for Mysql Barbican user. exmaple:000000</span><br><span class="line">BARBICAN_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore Barbican user. exmaple:000000</span><br><span class="line">BARBICAN_PASS=000000</span><br><span class="line">###############################################################</span><br><span class="line">#####在vi编辑器中执行:%s/^.\&#123;1\&#125;//  删除每行前1个字符(#号)#####</span><br><span class="line">###############################################################</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-pre-host.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# iaas-pre-host.sh</span><br></pre></td></tr></table></figure>

<h4 id="1-1-5-数据库安装与调优"><a href="#1-1-5-数据库安装与调优" class="headerlink" title="1.1.5 数据库安装与调优"></a>1.1.5 数据库安装与调优</h4><p>在控制节点上使用安装Mariadb、RabbitMQ等服务。并进行相关操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-mysql.sh</span><br></pre></td></tr></table></figure>

<h4 id="1-1-6-Keystone服务安装与使用"><a href="#1-1-6-Keystone服务安装与使用" class="headerlink" title="1.1.6 Keystone服务安装与使用"></a>1.1.6 Keystone服务安装与使用</h4><p>在控制节点上安装Keystone服务并创建用户。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-keystone.sh </span><br><span class="line">[root@controller ~]# openstack user create --domain demo chinaskill --password 000000</span><br></pre></td></tr></table></figure>

<h4 id="1-1-7-Glance安装与使用"><a href="#1-1-7-Glance安装与使用" class="headerlink" title="1.1.7 Glance安装与使用"></a>1.1.7 Glance安装与使用</h4><p>在控制节点上安装Glance 服务。上传镜像至平台，并设置镜像启动的要求参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-glance.sh </span><br><span class="line">[root@controller ~]# openstack image create cirros --disk qcow2 --container bare --min-disk 10 --min-ram 1024 &lt; cirros-0.3.4-x86_64-disk.img </span><br></pre></td></tr></table></figure>

<h4 id="1-1-8-Nova安装"><a href="#1-1-8-Nova安装" class="headerlink" title="1.1.8 Nova安装"></a>1.1.8 Nova安装</h4><p>在控制节点和计算节点上分别安装Nova服务。安装完成后，完成Nova相关配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-placement.sh </span><br><span class="line">[root@controller ~]# iaas-install-nova-controller.sh</span><br><span class="line">[root@compute ~]# iaas-install-nova-compute.sh </span><br></pre></td></tr></table></figure>

<h4 id="1-1-9-Neutron安装"><a href="#1-1-9-Neutron安装" class="headerlink" title="1.1.9 Neutron安装"></a>1.1.9 Neutron安装</h4><p>在控制和计算节点上正确安装Neutron服务。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-neutron-controller.sh</span><br><span class="line">[root@compute ~]# iaas-install-neutron-compute.sh </span><br></pre></td></tr></table></figure>

<h4 id="1-1-10-Dashboard安装"><a href="#1-1-10-Dashboard安装" class="headerlink" title="1.1.10 Dashboard安装"></a>1.1.10 Dashboard安装</h4><p>在控制节点上安装Dashboard服务。安装完成后，将Dashboard中的 Django数据修改为存储在文件中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-dashboard.sh </span><br><span class="line"></span><br><span class="line">[root@controller ~]# cat /etc/openstack-dashboard/local_settings | grep SESSION_ENGINE</span><br><span class="line"></span><br><span class="line"># SESSION_ENGINE to django.contrib.sessions.backends.signed_cookies</span><br><span class="line"></span><br><span class="line">SESSION_ENGINE = &#x27;django.contrib.sessions.backends.file&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="1-1-11-Swift安装"><a href="#1-1-11-Swift安装" class="headerlink" title="1.1.11 Swift安装"></a>1.1.11 Swift安装</h4><p>在控制节点和计算节点上分别安装Swift服务。安装完成后，将cirros镜像进行分片存储。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-swift-controller.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# iaas-install-swift-compute.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack container create examcontaienr</span><br><span class="line">+---------------------------------------+---------------+------------------------------------+</span><br><span class="line">| account                               | container     | x-trans-id                         |</span><br><span class="line">+---------------------------------------+---------------+------------------------------------+</span><br><span class="line">| AUTH_5a824a04c09c4ba4b75767019900dc98 | examcontaienr | tx453b000251d94847a87e7-006406d19d |</span><br><span class="line">+---------------------------------------+---------------+------------------------------------+</span><br><span class="line">[root@controller ~]# swift upload examcontainer -S 10000000 cirros-0.3.4-x86_64-disk.img </span><br><span class="line">cirros-0.3.4-x86_64-disk.img segment 1</span><br><span class="line">cirros-0.3.4-x86_64-disk.img segment 0</span><br><span class="line">cirros-0.3.4-x86_64-disk.img</span><br></pre></td></tr></table></figure>

<h4 id="1-1-12-Cinder创建硬盘"><a href="#1-1-12-Cinder创建硬盘" class="headerlink" title="1.1.12 Cinder创建硬盘"></a>1.1.12 Cinder创建硬盘</h4><p>在控制节点和计算节点分别安装Cinder服务，请在计算节点，对块存储进行扩容操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-cinder-controller.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# iaas-install-cinder-compute.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# vgextend cinder-volumes /dev/vdb4</span><br><span class="line">[root@compute ~]# vgdisplay </span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               cinder-volumes</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        2</span><br><span class="line">  Metadata Sequence No  5</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                1</span><br><span class="line">  Open LV               0</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                2</span><br><span class="line">  Act PV                2</span><br><span class="line">  VG Size               24.99 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              6398</span><br><span class="line">  Alloc PE / Size       4874 / &lt;19.04 GiB</span><br><span class="line">  Free  PE / Size       1524 / 5.95 GiB</span><br><span class="line">  VG UUID               nM28QF-pGdI-Q1Nh-LvoZ-F6aV-GuDh-2rey4k</span><br></pre></td></tr></table></figure>

<h4 id="1-1-13-Manila服务安装与使用"><a href="#1-1-13-Manila服务安装与使用" class="headerlink" title="1.1.13 Manila服务安装与使用"></a>1.1.13 Manila服务安装与使用</h4><p>在控制和计算节点上分别在控制节点和计算节点安装Manila服务。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-manila-controller.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# iaas-install-manila-compute.sh</span><br></pre></td></tr></table></figure>

<h3 id="任务2-私有云服务运维（15分）"><a href="#任务2-私有云服务运维（15分）" class="headerlink" title="任务2 私有云服务运维（15分）"></a>任务2 私有云服务运维（15分）</h3><h4 id="1-2-1-OpenStack开放镜像权限"><a href="#1-2-1-OpenStack开放镜像权限" class="headerlink" title="1.2.1 OpenStack开放镜像权限"></a>1.2.1 OpenStack开放镜像权限</h4><p>在admin项目中存在glance-cirros镜像文件，将glance-cirros镜像指定demo项目进行共享使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack image create glance-cirros &lt; cirros-0.3.4-x86_64-disk.img </span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Field            | Value                                                                                                                                                                                      |</span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| checksum         | ee1eca47dc88f4879d8a229cc70a07c6                                                                                                                                                           |</span><br><span class="line">| container_format | bare                                                                                                                                                                                       |</span><br><span class="line">| created_at       | 2023-03-07T07:05:58Z                                                                                                                                                                       |</span><br><span class="line">| disk_format      | raw                                                                                                                                                                                        |</span><br><span class="line">| file             | /v2/images/54b116cf-e941-403c-9fa3-082e767712f6/file                                                                                                                                       |</span><br><span class="line">| id               | 54b116cf-e941-403c-9fa3-082e767712f6                                                                                                                                                       |</span><br><span class="line">| min_disk         | 0                                                                                                                                                                                          |</span><br><span class="line">| min_ram          | 0                                                                                                                                                                                          |</span><br><span class="line">| name             | glance-cirros                                                                                                                                                                              |</span><br><span class="line">| owner            | 5a824a04c09c4ba4b75767019900dc98                                                                                                                                                           |</span><br><span class="line">| properties       | os_hash_algo=&#x27;sha512&#x27;, os_hash_value=&#x27;1b03ca1bc3fafe448b90583c12f367949f8b0e665685979d95b004e48574b953316799e23240f4f739d1b5eb4c4ca24d38fdc6f4f9d8247a2bc64db25d6bbdb2&#x27;, os_hidden=&#x27;False&#x27; |</span><br><span class="line">| protected        | False                                                                                                                                                                                      |</span><br><span class="line">| schema           | /v2/schemas/image                                                                                                                                                                          |</span><br><span class="line">| size             | 13287936                                                                                                                                                                                   |</span><br><span class="line">| status           | active                                                                                                                                                                                     |</span><br><span class="line">| tags             |                                                                                                                                                                                            |</span><br><span class="line">| updated_at       | 2023-03-07T07:05:59Z                                                                                                                                                                       |</span><br><span class="line">| virtual_size     | None                                                                                                                                                                                       |</span><br><span class="line">| visibility       | shared                                                                                                                                                                                     |</span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">[root@controller ~]# openstack project list</span><br><span class="line">+----------------------------------+---------+</span><br><span class="line">| ID                               | Name    |</span><br><span class="line">+----------------------------------+---------+</span><br><span class="line">| 5a824a04c09c4ba4b75767019900dc98 | admin   |</span><br><span class="line">| a580b951935c454595e36921e15b4781 | service |</span><br><span class="line">| b8d9637523374f939026d268e033a77b | demo    |</span><br><span class="line">+----------------------------------+---------+</span><br><span class="line">[root@controller ~]# glance member-create 54b116cf-e941-403c-9fa3-082e767712f6 b8d9637523374f939026d268e033a77b</span><br><span class="line">+--------------------------------------+----------------------------------+---------+</span><br><span class="line">| Image ID                             | Member ID                        | Status  |</span><br><span class="line">+--------------------------------------+----------------------------------+---------+</span><br><span class="line">| 54b116cf-e941-403c-9fa3-082e767712f6 | b8d9637523374f939026d268e033a77b | pending |</span><br><span class="line">+--------------------------------------+----------------------------------+---------+</span><br><span class="line">[root@controller ~]# glance member-update 54b116cf-e941-403c-9fa3-082e767712f6 b8d9637523374f939026d268e033a77b accepted</span><br><span class="line">+--------------------------------------+----------------------------------+----------+</span><br><span class="line">| Image ID                             | Member ID                        | Status   |</span><br><span class="line">+--------------------------------------+----------------------------------+----------+</span><br><span class="line">| 54b116cf-e941-403c-9fa3-082e767712f6 | b8d9637523374f939026d268e033a77b | accepted |</span><br><span class="line">+--------------------------------------+----------------------------------+----------+</span><br></pre></td></tr></table></figure>

<h4 id="1-2-2-SkyWalking-应用部署"><a href="#1-2-2-SkyWalking-应用部署" class="headerlink" title="1.2.2   SkyWalking 应用部署"></a>1.2.2   SkyWalking 应用部署</h4><p>申请一台云主机，使用提供的软件包安装Elasticsearch服务和SkyWalking服务。再申请一台云主机，用于搭建gpmall商城应用，并配置SkyWalking 监控gpmall主机。</p>
<h4 id="1-2-3-OpenStack镜像压缩"><a href="#1-2-3-OpenStack镜像压缩" class="headerlink" title="1.2.3 OpenStack镜像压缩"></a>1.2.3 OpenStack镜像压缩</h4><p>在HTTP文件服务器中存在一个镜像为CentOS7.5-compress.qcow2的镜像，请对该镜像进行压缩操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# qemu-img convert -c -O qcow2 cirros-0.3.4-x86_64-disk.img chinaskill-cirros.img</span><br></pre></td></tr></table></figure>

<h4 id="1-2-4-Glance对接Cinder存储"><a href="#1-2-4-Glance对接Cinder存储" class="headerlink" title="1.2.4 Glance对接Cinder存储"></a>1.2.4 Glance对接Cinder存储</h4><p>在自行搭建的OpenStack平台中修改相关参数，使Glance可以使用Cinder作为后端存储。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# vi /etc/glance/glance-api.conf</span><br><span class="line">stores = file,http,swift,cinder</span><br><span class="line">show_multiple_locations = True</span><br><span class="line">[root@controller ~]# vi /etc/cinder/cinder.conf</span><br><span class="line">glance_api_version = 2</span><br><span class="line">allowed_direct_url_schemes = cinder</span><br><span class="line">image_upload_use_internal_tenant = True</span><br><span class="line">[root@controller ~]# systemctl restart openstack-glance*</span><br><span class="line">[root@controller ~]# systemctl restart openstack-cinder*</span><br><span class="line">去图形界面通过镜像创建一个云硬盘</span><br><span class="line">[root@controller ~]# cinder list</span><br><span class="line">+--------------------------------------+-----------+---------------+------+-------------+----------+-------------</span><br><span class="line">+</span><br><span class="line">| ID | Status | Name | Size | Volume Type</span><br><span class="line">| Bootable | Attached to |</span><br><span class="line">+--------------------------------------+-----------+---------------+------+-------------+----------+-------------</span><br><span class="line">+</span><br><span class="line">| 13b79150-8571-48e6-b3f9-478912d2b678 | available | cirros-cinder | 15 | - | true</span><br><span class="line">| |</span><br><span class="line">+--------------------------------------+-----------+---------------+------+-------------+----------+-------------</span><br><span class="line">+</span><br><span class="line">[root@controller ~]# glance image-create --name cirros-image --disk-format qcow2 --container</span><br><span class="line">bare</span><br><span class="line">+------------------+--------------------------------------+</span><br><span class="line">| Property | Value |</span><br><span class="line">+------------------+--------------------------------------+</span><br><span class="line">| checksum | None |</span><br><span class="line">| container_format | bare |</span><br><span class="line">| created_at | 2022-05-27T10:29:35Z |</span><br><span class="line">| disk_format | qcow2 |</span><br><span class="line">| id | 9d163f0d-58f2-49bd-b438-a4e2704e57ad |</span><br><span class="line">| locations | [] |</span><br><span class="line">| min_disk | 0 |</span><br><span class="line">| min_ram | 0 |</span><br><span class="line">| name | cirros-image |</span><br><span class="line">| os_hash_algo | None |</span><br><span class="line">| os_hash_value | None |</span><br><span class="line">| os_hidden | False |</span><br><span class="line">| owner | 50957190677d4ef186e7b0c04b99b44f |</span><br><span class="line">| protected | False |</span><br><span class="line">| size | None |</span><br><span class="line">| status | queued |</span><br><span class="line">| tags | [] |</span><br><span class="line">| updated_at | 2022-05-27T10:29:35Z |</span><br><span class="line">| virtual_size | Not available |</span><br><span class="line">| visibility | shared |</span><br><span class="line">+------------------+--------------------------------------+</span><br><span class="line">[root@controller ~]# glance location-add 9d163f0d-58f2-49bd-b438-a4e2704e57ad --url</span><br><span class="line">cinder://13b79150-8571-48e6-b3f9-478912d2b678</span><br></pre></td></tr></table></figure>

<h4 id="1-2-5-使用Heat模板创建容器"><a href="#1-2-5-使用Heat模板创建容器" class="headerlink" title="1.2.5 使用Heat模板创建容器"></a>1.2.5 使用Heat模板创建容器</h4><p>在自行搭建的OpenStack私有云平台上，在&#x2F;root目录下编写Heat模板文件，要求执行yaml文件可以创建名为heat-swift的容器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat create_container.yaml </span><br><span class="line">heat_template_version: 2018-03-02</span><br><span class="line">resources:</span><br><span class="line">  server:</span><br><span class="line">    type: OS::Swift::Container</span><br><span class="line">    properties:</span><br><span class="line">      name: heat-swift</span><br><span class="line">[root@controller ~]# openstack stack create -t create_container.yaml heat-swift</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| Field               | Value                                |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| id                  | 81873448-b1ad-48d9-9bbc-31fb158e1881 |</span><br><span class="line">| stack_name          | heat-swift                           |</span><br><span class="line">| description         | No description                       |</span><br><span class="line">| creation_time       | 2023-03-07T07:50:52Z                 |</span><br><span class="line">| updated_time        | None                                 |</span><br><span class="line">| stack_status        | CREATE_IN_PROGRESS                   |</span><br><span class="line">| stack_status_reason | Stack CREATE started                 |</span><br><span class="line">+---------------------+--------------------------------------+   </span><br></pre></td></tr></table></figure>

<h4 id="1-2-6-Nova清除缓存"><a href="#1-2-6-Nova清除缓存" class="headerlink" title="1.2.6 Nova清除缓存"></a>1.2.6 Nova清除缓存</h4><p>在OpenStack平台上，修改相关配置，让长时间不用的镜像缓存在过一定的时间后会被自动删除。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/nova/nova.conf | grep remove_unused_base_images=true</span><br><span class="line">remove_unused_base_images=true</span><br><span class="line">[root@controller ~]# systemctl restart *nova*</span><br></pre></td></tr></table></figure>

<h4 id="1-2-7-Redis集群部署。"><a href="#1-2-7-Redis集群部署。" class="headerlink" title="1.2.7 Redis集群部署。"></a>1.2.7 Redis集群部署。</h4><p>部署Redis集群，Redis的一主二从三哨兵架构。</p>
<h4 id="1-2-8-Redis-AOF调优"><a href="#1-2-8-Redis-AOF调优" class="headerlink" title="1.2.8 Redis AOF调优"></a>1.2.8 Redis AOF调优</h4><p>修改在Redis相关配置，避免AOF文件过大，Redis会进行AOF重写。</p>
<h4 id="1-2-9-JumpServer堡垒机部署"><a href="#1-2-9-JumpServer堡垒机部署" class="headerlink" title="1.2.9 JumpServer堡垒机部署"></a>1.2.9 JumpServer堡垒机部署</h4><p>使用提供的软件包安装JumpServer堡垒机服务，并配置使用该堡垒机对接自己安装的控制和计算节点。</p>
<h4 id="1-2-10-完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"><a href="#1-2-10-完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）" class="headerlink" title="1.2.10 完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"></a>1.2.10 完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务3-私有云运维开发（10分）"><a href="#任务3-私有云运维开发（10分）" class="headerlink" title="任务3 私有云运维开发（10分）"></a>任务3 私有云运维开发（10分）</h3><h4 id="1-3-1-编写Shell一键部署脚本"><a href="#1-3-1-编写Shell一键部署脚本" class="headerlink" title="1.3.1 编写Shell一键部署脚本"></a>1.3.1 编写Shell一键部署脚本</h4><p>编写一键部署脚本，要求可以一键部署gpmall商城应用系统。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">setenforce 0</span><br><span class="line">rm -rf /etc/yum.repos.d/*</span><br><span class="line">cat &gt;&gt; /etc/yum.repos.d/local.repo &lt;&lt; EOF</span><br><span class="line">[centos]</span><br><span class="line">name=centos</span><br><span class="line">baseurl=http://172.19.25.222/centos</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">[gpmall]</span><br><span class="line">name=gpmall</span><br><span class="line">baseurl=file:///opt/gpmall-repo</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"> </span><br><span class="line">EOF</span><br><span class="line">yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel</span><br><span class="line">java -version</span><br><span class="line">sleep 5</span><br><span class="line">yum install -y redis nginx </span><br><span class="line">yum install -y mariadb mariadb-server</span><br><span class="line">tar -zxvf /opt/zookeeper-3.4.14.tar.gz -C /usr/local/</span><br><span class="line">mv /usr/local/zookeeper-3.4.14/conf/zoo_sample.cfg /usr/local/zookeeper-3.4.14/conf/zoo.cfg</span><br><span class="line">sh /usr/local/zookeeper-3.4.14/bin/zkServer.sh start</span><br><span class="line">sleep 5</span><br><span class="line">sh /usr/local/zookeeper-3.4.14/bin/zkServer.sh status</span><br><span class="line">sleep 5</span><br><span class="line">tar -zxvf /opt/kafka_2.11-1.1.1.tgz -C /usr/local/</span><br><span class="line">sh /usr/local/kafka_2.11-1.1.1/bin/kafka-server-start.sh -daemon /usr/local/kafka_2.11-1.1.1/config/server.properties</span><br><span class="line">sleep 3</span><br><span class="line">jps</span><br><span class="line">sleep 3</span><br><span class="line">netstat -ntpl</span><br><span class="line">sleep 5</span><br><span class="line">sed -i &quot;/^\[mysqld\]$/a character_set_server=utf8&quot; /etc/my.cnf.d/server.cnf</span><br><span class="line">systemctl start mariadb</span><br><span class="line">mysqladmin -uroot password 123456</span><br><span class="line">sleep 8</span><br><span class="line">mysql -uroot -p123456 -e &quot;grant all privileges on *.* to root@&#x27;%&#x27; identified by &#x27;123456&#x27;;&quot;</span><br><span class="line">mysql -uroot -p123456 -e &quot;create database gpmall;use gpmall;source /opt/gpmall.sql;&quot;</span><br><span class="line">systemctl start redis</span><br><span class="line">sed -i &quot;s/bind 127.0.0.1/bind 0.0.0.0/g&quot; /etc/redis.conf</span><br><span class="line">sed -i &quot;s/protected-mode yes/protected-mode no/g&quot; /etc/redis.conf</span><br><span class="line">systemctl restart redis</span><br><span class="line">systemctl start nginx</span><br><span class="line">cat &gt; /etc/hosts &lt;&lt; EOF</span><br><span class="line">192.168.20.187 mall</span><br><span class="line">192.168.20.187 kafka.mall</span><br><span class="line">192.168.20.187 mysql.mall</span><br><span class="line">192.168.20.187 redis.mall</span><br><span class="line">192.168.20.187 zookeeper.mall</span><br><span class="line">EOF</span><br><span class="line">rm -rf /usr/share/nginx/html/*</span><br><span class="line">cp -rf /opt/dist/* /usr/share/nginx/html/</span><br><span class="line">sed -i &quot;1 a location /user &#123;proxy_pass http://127.0.0.1:8082;&#125;&quot; /etc/nginx/conf.d/default.conf</span><br><span class="line">sed -i &quot;2 a location /shopping &#123;proxy_pass http://127.0.0.1:8081;&#125;&quot; /etc/nginx/conf.d/default.conf</span><br><span class="line">sed -i &quot;3 a location /cashier &#123;proxy_pass http://127.0.0.1:8083;&#125;&quot; /etc/nginx/conf.d/default.conf</span><br><span class="line">systemctl restart nginx</span><br><span class="line">nohup java -jar /opt/shopping-provider-0.0.1-SNAPSHOT.jar &amp;</span><br><span class="line">sleep 5</span><br><span class="line">nohup java -jar /opt/user-provider-0.0.1-SNAPSHOT.jar &amp;</span><br><span class="line">sleep 5</span><br><span class="line">nohup java -jar /opt/gpmall-shopping-0.0.1-SNAPSHOT.jar &amp;</span><br><span class="line">sleep 5</span><br><span class="line">nohup java -jar /opt/gpmall-user-0.0.1-SNAPSHOT.jar &amp;</span><br><span class="line">sleep 5</span><br><span class="line">jps</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2-Ansible部署FTP服务"><a href="#1-3-2-Ansible部署FTP服务" class="headerlink" title="1.3.2 Ansible部署FTP服务"></a>1.3.2 Ansible部署FTP服务</h4><p>编写Ansible脚本，部署FTP服务。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ftp]# cat ftp.yaml </span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">  - hosts: node</span><br><span class="line">    remote_user: root</span><br><span class="line">    tasks:</span><br><span class="line">     - name: install vsftpd </span><br><span class="line">       yum:</span><br><span class="line">         name: vsftpd</span><br><span class="line">     - name: start vsftpd</span><br><span class="line">       service:</span><br><span class="line">         name: vsftpd</span><br><span class="line">         state: started</span><br><span class="line">         enabled: true</span><br></pre></td></tr></table></figure>

<h4 id="1-3-3-Ansible部署Kafka服务"><a href="#1-3-3-Ansible部署Kafka服务" class="headerlink" title="1.3.3 Ansible部署Kafka服务"></a>1.3.3 Ansible部署Kafka服务</h4><p>编写Playbook，部署的ZooKeeper和Kafka。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">[root@owncloud zookeeper]# cat zookeeper.yaml </span><br><span class="line">---</span><br><span class="line">  - hosts: zookeeper</span><br><span class="line">    tasks:</span><br><span class="line">      - name: stop selinux</span><br><span class="line">        shell: setenforce 0</span><br><span class="line">      - name: remove repo</span><br><span class="line">        shell: rm -rf /etc/yum.repos.d/*</span><br><span class="line">      - name: copy repo</span><br><span class="line">        copy:</span><br><span class="line">          src: local.repo</span><br><span class="line">          dest: /etc/yum.repos.d/</span><br><span class="line">      - name: install java</span><br><span class="line">        yum:</span><br><span class="line">          name: java-1.8.0-openjdk,java-1.8.0-openjdk-devel</span><br><span class="line">      - name: tar zookeeper</span><br><span class="line">        unarchive:</span><br><span class="line">          src: zookeeper-3.4.14.tar.gz</span><br><span class="line">          dest: /usr/local</span><br><span class="line">      - name: copy config</span><br><span class="line">        copy:</span><br><span class="line">          src: zoo.cfg</span><br><span class="line">          dest: /usr/local/zookeeper-3.4.14/conf/zoo.cfg</span><br><span class="line">      - name: mkdir</span><br><span class="line">        shell: mkdir /tmp/zookeeper</span><br><span class="line">      - name: touch id file</span><br><span class="line">        shell: echo &#123;&#123;zk_id&#125;&#125; &gt; /tmp/zookeeper/myid</span><br><span class="line">      - name: start zk</span><br><span class="line">        shell: /bin/bash /usr/local/zookeeper-3.4.14/bin/zkServer.sh start</span><br><span class="line">      - name: tar kafka</span><br><span class="line">        unarchive:</span><br><span class="line">          src: kafka_2.11-1.1.1.tgz</span><br><span class="line">          dest: /usr/local</span><br><span class="line">      - name: mkdir</span><br><span class="line">        shell: mkdir /tmp/kafka-logs</span><br><span class="line">      - name: copy config</span><br><span class="line">        template:</span><br><span class="line">          src: server.properties.j2</span><br><span class="line">          dest: /usr/local/kafka_2.11-1.1.1/config/server.properties</span><br><span class="line">      - name: start kafka</span><br><span class="line">        shell: /bin/bash /usr/local/kafka_2.11-1.1.1/bin/kafka-server-start.sh -daemon /usr/local/kafka_2.11-1.1.1/config/server.properties</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@owncloud zookeeper]# cat /etc/ansible/hosts</span><br><span class="line">[zookeeper]</span><br><span class="line">192.168.20.190	ip=190 zk_id=1 </span><br><span class="line">192.168.20.194	ip=194 zk_id=2 </span><br><span class="line">192.168.20.189	ip=189 zk_id=3 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@owncloud zookeeper]# cat zoo.cfg </span><br><span class="line">tickTime=2000</span><br><span class="line">initLimit=10</span><br><span class="line">syncLimit=5</span><br><span class="line">dataDir=/tmp/zookeeper</span><br><span class="line">clientPort=2181</span><br><span class="line">#autopurge.purgeInterval=1</span><br><span class="line">server.1=192.168.20.190:2888:3888</span><br><span class="line">server.2=192.168.20.194:2888:3888</span><br><span class="line">server.3=192.168.20.189:2888:3888</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@owncloud zookeeper]# cat server.properties.j2 </span><br><span class="line">broker.id=&#123;&#123;zk_id&#125;&#125;</span><br><span class="line">listeners=PLAINTEXT://192.168.20.&#123;&#123;ip&#125;&#125;:9092</span><br><span class="line">num.network.threads=3</span><br><span class="line">num.io.threads=8</span><br><span class="line">socket.send.buffer.bytes=102400</span><br><span class="line">socket.receive.buffer.bytes=102400</span><br><span class="line">socket.request.max.bytes=104857600</span><br><span class="line">log.dirs=/tmp/kafka-logs</span><br><span class="line">num.partitions=1</span><br><span class="line">num.recovery.threads.per.data.dir=1</span><br><span class="line">offsets.topic.replication.factor=1</span><br><span class="line">transaction.state.log.replication.factor=1</span><br><span class="line">transaction.state.log.min.isr=1</span><br><span class="line">log.retention.hours=168</span><br><span class="line">log.segment.bytes=1073741824</span><br><span class="line">log.retention.check.interval.ms=300000</span><br><span class="line">zookeeper.connect=192.168.20.190:2181,192.168.20.194:2181,192.168.20.189:2181</span><br><span class="line">zookeeper.connection.timeout.ms=6000</span><br><span class="line">group.initial.rebalance.delay.ms=0</span><br></pre></td></tr></table></figure>

<h2 id="模块二-容器云（30分）"><a href="#模块二-容器云（30分）" class="headerlink" title="模块二 容器云（30分）"></a>模块二 容器云（30分）</h2><p>企业构建Kubernetes容器云集群，引入KubeVirt实现OpenStack到Kubernetes的全面转型，用Kubernetes来管一切虚拟化运行时，包含裸金属、VM、容器。同时研发团队决定搭建基于Kubernetes 的CI&#x2F;CD环境，基于这个平台来实现DevOps流程。引入服务网格Istio，实现业务系统的灰度发布，治理和优化公司各种微服务，并开发自动化运维程序。</p>
<h3 id="任务1-容器云服务搭建（5分）"><a href="#任务1-容器云服务搭建（5分）" class="headerlink" title="任务1 容器云服务搭建（5分）"></a>任务1 容器云服务搭建（5分）</h3><h4 id="2-1-1-部署容器云平台"><a href="#2-1-1-部署容器云平台" class="headerlink" title="2.1.1 部署容器云平台"></a>2.1.1 部署容器云平台</h4><p>使用OpenStack私有云平台创建两台云主机，分别作为Kubernetes集群的master节点和node节点，然后完成Kubernetes集群的部署，并完成Istio服务网格、KubeVirt虚拟化和Harbor镜像仓库的部署。</p>
<h3 id="任务2-容器云服务运维（15分）"><a href="#任务2-容器云服务运维（15分）" class="headerlink" title="任务2 容器云服务运维（15分）"></a>任务2 容器云服务运维（15分）</h3><h4 id="2-2-1-容器化部署Node-Exporter"><a href="#2-2-1-容器化部署Node-Exporter" class="headerlink" title="2.2.1 容器化部署Node-Exporter"></a>2.2.1 容器化部署Node-Exporter</h4><p>编写Dockerfile文件构建exporter镜像，要求基于centos完成Node-Exporter服务的安装与配置，并设置服务开机自启。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master-node1 Monitor]# cat Dockerfile-exporter </span><br><span class="line">FROM centos:7.9.2009</span><br><span class="line">ADD node_exporter-0.18.1.linux-amd64.tar.gz /usr/local</span><br><span class="line">RUN chmod +x /usr/local/node_exporter-0.18.1.linux-amd64/node_exporter</span><br><span class="line">EXPOSE 9100</span><br><span class="line">CMD [&quot;/usr/local/node_exporter-0.18.1.linux-amd64/node_exporter&quot;]</span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-容器化部署Alertmanager"><a href="#2-2-2-容器化部署Alertmanager" class="headerlink" title="2.2.2 容器化部署Alertmanager"></a>2.2.2 容器化部署Alertmanager</h4><p>编写Dockerfile文件构建alert镜像，要求基于centos：latest完成Alertmanager服务的安装与配置，并设置服务开机自启。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master-node1 Monitor]# cat Dockerfile-alert </span><br><span class="line">FROM centos:7.9.2009</span><br><span class="line">ADD alertmanager-0.19.0.linux-amd64.tar.gz /usr/local/</span><br><span class="line">RUN chmod +x /usr/local/alertmanager-0.19.0.linux-amd64/alertmanager</span><br><span class="line">EXPOSE 9093</span><br><span class="line">EXPOSE 9094</span><br><span class="line">CMD [&quot;/usr/local/alertmanager-0.19.0.linux-amd64/alertmanager&quot;,&quot;--config.file=/usr/local/alertmanager-0.19.0.linux-amd64/alertmanager.yml&quot;]</span><br></pre></td></tr></table></figure>

<h4 id="2-2-3-容器化部署Grafana"><a href="#2-2-3-容器化部署Grafana" class="headerlink" title="2.2.3 容器化部署Grafana"></a>2.2.3 容器化部署Grafana</h4><p>编写Dockerfile文件构建grafana镜像，要求基于centos完成Grafana服务的安装与配置，并设置服务开机自启。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master-node1 Monitor]# cat Dockerfile-grafana </span><br><span class="line">FROM centos:7.9.2009</span><br><span class="line">ADD grafana-6.4.1.linux-amd64.tar.gz /usr/local/</span><br><span class="line">RUN chmod +x /usr/local/grafana-6.4.1/bin/grafana-server</span><br><span class="line">EXPOSE 3000</span><br><span class="line">CMD [&quot;/usr/local/grafana-6.4.1/bin/grafana-server&quot;,&quot;--config=/usr/local/grafana-6.4.1/conf/defaults.ini&quot;,&quot;--homepath=/usr/local/grafana-6.4.1&quot;] </span><br></pre></td></tr></table></figure>

<h4 id="2-2-4-容器化部署Prometheus"><a href="#2-2-4-容器化部署Prometheus" class="headerlink" title="2.2.4 容器化部署Prometheus"></a>2.2.4 容器化部署Prometheus</h4><p>编写Dockerfile文件构建prometheus镜像，要求基于centos完成Promethues服务的安装与配置，并设置服务开机自启。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master-node1 monint]# cat prometheus.yml </span><br><span class="line"></span><br><span class="line"># my global config</span><br><span class="line"></span><br><span class="line">global:</span><br><span class="line">  scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute.</span><br><span class="line">  evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.</span><br><span class="line"></span><br><span class="line">  # scrape_timeout is set to the global default (10s).</span><br><span class="line"></span><br><span class="line"># Alertmanager configuration</span><br><span class="line"></span><br><span class="line">alerting:</span><br><span class="line">  alertmanagers:</span><br><span class="line">    - static_configs:</span><br><span class="line">        - targets: </span><br><span class="line">          - 192.168.20.133:9093</span><br><span class="line"></span><br><span class="line"># Load rules once and periodically evaluate them according to the global &#x27;evaluation_interval&#x27;.</span><br><span class="line"></span><br><span class="line">rule_files:</span><br><span class="line"></span><br><span class="line">  - &quot;rules/*.yml&quot;</span><br><span class="line"></span><br><span class="line">  # - &quot;second_rules.yml&quot;</span><br><span class="line"></span><br><span class="line"># A scrape configuration containing exactly one endpoint to scrape:</span><br><span class="line"></span><br><span class="line"># Here it&#x27;s Prometheus itself.</span><br><span class="line"></span><br><span class="line">scrape_configs:</span><br><span class="line"></span><br><span class="line">  # The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.</span><br><span class="line"></span><br><span class="line">  - job_name: &quot;prometheus&quot;</span><br><span class="line">    static_configs:</span><br><span class="line">      - targets: [&quot;192.168.20.133:9090&quot;]</span><br><span class="line"></span><br><span class="line">  - job_name: &quot;node&quot;</span><br><span class="line">    static_configs:</span><br><span class="line">      - targets: [&quot;192.168.20.133:9100&quot;]</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FROM centos:7.9.2009</span><br><span class="line">ADD prometheus-2.13.0.linux-amd64.tar.gz /usr/local/</span><br><span class="line">RUN chmod +x /usr/local/prometheus-2.13.0.linux-amd64/prometheus</span><br><span class="line">ADD prometheus.yml /usr/local/prometheus-2.13.0.linux-amd64/</span><br><span class="line">RUN mkdir /usr/local/prometheus-2.13.0.linux-amd64/rules</span><br><span class="line">ADD alert-rules.yml /usr/local/prometheus-2.13.0.linux-amd64/rules </span><br><span class="line">EXPOSE 9090</span><br><span class="line">CMD [&quot;/usr/local/prometheus-2.13.0.linux-amd64/prometheus&quot;,&quot;--config.file=/usr/local/prometheus-2.13.0.linux-amd64/prometheus.yml&quot;]</span><br></pre></td></tr></table></figure>

<h4 id="2-2-5-编排部署监控系统"><a href="#2-2-5-编排部署监控系统" class="headerlink" title="2.2.5 编排部署监控系统"></a>2.2.5 编排部署监控系统</h4><p>编写docker-compose.yaml文件，使用镜像exporter、alert、grafana和prometheus完成监控系统的编排部署。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master-node1 Monitor]# cat docker-compose.yaml </span><br><span class="line">version: &#x27;3&#x27;</span><br><span class="line">services:</span><br><span class="line">  node-exporter:</span><br><span class="line">    image: monitor-exporter:v1.0</span><br><span class="line">    container_name: &quot;monitor-node&quot;</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;9100:9100&quot;</span><br><span class="line">    restart: always</span><br><span class="line">  alertmanager:</span><br><span class="line">    image: monitor-alert:v1.0</span><br><span class="line">    container_name: &quot;monitor-alertmanager&quot;</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;9093:9093&quot;</span><br><span class="line">      - &quot;9094:9094&quot;</span><br><span class="line">    restart: always</span><br><span class="line">  grafana:</span><br><span class="line">    image: monitor-grafana:v1.0</span><br><span class="line">    container_name: &quot;monitor-grafana&quot;</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;3000:3000&quot;</span><br><span class="line">    restart: always</span><br><span class="line"></span><br><span class="line">  prometheus:</span><br><span class="line">    image: monitor-prometheus:v1.0</span><br><span class="line">    container_name: &quot;monitor-prometheus&quot;</span><br><span class="line">    depends_on:</span><br><span class="line">      - node-exporter</span><br><span class="line">      - alertmanager</span><br><span class="line">      - grafana</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;9090:9090&quot;</span><br><span class="line">    restart: always </span><br></pre></td></tr></table></figure>

<h4 id="2-2-6-安装Jenkins"><a href="#2-2-6-安装Jenkins" class="headerlink" title="2.2.6 安装Jenkins"></a>2.2.6 安装Jenkins</h4><p>将Jenkins部署到default命名空间下。要求完成离线插件的安装，设置Jenkins的登录信息和授权策略。</p>
<h4 id="2-2-7-安装GitLab"><a href="#2-2-7-安装GitLab" class="headerlink" title="2.2.7 安装GitLab"></a>2.2.7 安装GitLab</h4><p>将GitLab部署到default命名空间下，要求设置root用户密码，新建公开项目，并将提供的代码上传到该项目。</p>
<h4 id="2-2-8-配置Jenkins连接GitLab"><a href="#2-2-8-配置Jenkins连接GitLab" class="headerlink" title="2.2.8 配置Jenkins连接GitLab"></a>2.2.8 配置Jenkins连接GitLab</h4><p>在Jenkins中新建流水线任务，配置GitLab连接Jenkins，并完成WebHook的配置。</p>
<h4 id="2-2-9-构建CI-x2F-CD"><a href="#2-2-9-构建CI-x2F-CD" class="headerlink" title="2.2.9 构建CI&#x2F;CD"></a>2.2.9 构建CI&#x2F;CD</h4><p>在流水线任务中编写流水线脚本，完成后触发构建，要求基于GitLab中的项目自动完成代码编译、镜像构建与推送、并自动发布服务到Kubernetes集群中。</p>
<h4 id="2-2-10-服务网格：创建Ingress-Gateway"><a href="#2-2-10-服务网格：创建Ingress-Gateway" class="headerlink" title="2.2.10 服务网格：创建Ingress Gateway"></a>2.2.10 服务网格：创建Ingress Gateway</h4><p>将Bookinfo应用部署到default命名空间下，请为Bookinfo应用创建一个网关，使外部可以访问Bookinfo应用。</p>
<h4 id="2-2-11-KubeVirt运维：创建VM"><a href="#2-2-11-KubeVirt运维：创建VM" class="headerlink" title="2.2.11 KubeVirt运维：创建VM"></a>2.2.11 KubeVirt运维：创建VM</h4><p>使用提供的镜像在default命名空间下创建一台VM，名称为exam，指定VM的内存、CPU、网卡和磁盘等配置。</p>
<h4 id="2-2-12-完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"><a href="#2-2-12-完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）" class="headerlink" title="2.2.12 完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"></a>2.2.12 完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务3-容器云运维开发（10分）"><a href="#任务3-容器云运维开发（10分）" class="headerlink" title="任务3 容器云运维开发（10分）"></a>任务3 容器云运维开发（10分）</h3><h4 id="2-3-1-管理job服务"><a href="#2-3-1-管理job服务" class="headerlink" title="2.3.1 管理job服务"></a>2.3.1 管理job服务</h4><p>Kubernetes Python运维脚本开发-使用SDK方式管理job服务。</p>
<h4 id="2-3-2-自定义调度器"><a href="#2-3-2-自定义调度器" class="headerlink" title="2.3.2 自定义调度器"></a>2.3.2 自定义调度器</h4><p>Kubernetes Python运维脚本开发-使用Restful API方式管理调度器。</p>
<h4 id="2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"><a href="#2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）" class="headerlink" title="2.3.3 编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"></a>2.3.3 编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）</h4><h2 id="模块三-公有云（40分）"><a href="#模块三-公有云（40分）" class="headerlink" title="模块三 公有云（40分）"></a>模块三 公有云（40分）</h2><p>企业选择国内公有云提供商，选择云主机、云网络、云硬盘、云防火墙、负载均衡等服务，可创建Web服务，共享文件存储服务，数据库服务，数据库集群等服务。搭建基于云原生的DevOps相关服务，构建云、边、端一体化的边缘计算系统，并开发云应用程序。</p>
<p>根据上述公有云平台的特性，完成公有云中的各项运维工作。</p>
<h3 id="任务1-公有云服务搭建（5分）"><a href="#任务1-公有云服务搭建（5分）" class="headerlink" title="任务1 公有云服务搭建（5分）"></a>任务1 公有云服务搭建（5分）</h3><h4 id="3-1-1-私有网络管理"><a href="#3-1-1-私有网络管理" class="headerlink" title="3.1.1 私有网络管理"></a>3.1.1 私有网络管理</h4><p>在公有云中完成虚拟私有云网络的创建。</p>
<h4 id="3-1-2-云实例管理"><a href="#3-1-2-云实例管理" class="headerlink" title="3.1.2 云实例管理"></a>3.1.2 云实例管理</h4><p>登录公有云平台，创建两台云实例虚拟机。</p>
<h4 id="3-1-3-管理数据库"><a href="#3-1-3-管理数据库" class="headerlink" title="3.1.3 管理数据库"></a>3.1.3 管理数据库</h4><p>使用intnetX-mysql网络创建两台chinaskill-sql-1和chinaskill-sql-2云服务器，并完成MongoDB安装。</p>
<h4 id="3-1-4-主从数据库"><a href="#3-1-4-主从数据库" class="headerlink" title="3.1.4 主从数据库"></a>3.1.4 主从数据库</h4><p>在chinaskill-sql-1和chinaskill-sql-2云服务器中配置MongoDB主从数据库。</p>
<h4 id="3-1-5-node环境管理"><a href="#3-1-5-node环境管理" class="headerlink" title="3.1.5 node环境管理"></a>3.1.5 node环境管理</h4><p>使用提供的压缩文件，安装Node.js环境。</p>
<h4 id="3-1-6-安全组管理"><a href="#3-1-6-安全组管理" class="headerlink" title="3.1.6 安全组管理"></a>3.1.6 安全组管理</h4><p>根据要求，创建一个安全组。</p>
<h4 id="3-1-7-RocketChat上云"><a href="#3-1-7-RocketChat上云" class="headerlink" title="3.1.7 RocketChat上云"></a>3.1.7 RocketChat上云</h4><p>使用http服务器提供文件，将Rocket.Chat应用部署上云。</p>
<h4 id="3-1-8-NAT网关"><a href="#3-1-8-NAT网关" class="headerlink" title="3.1.8 NAT网关"></a>3.1.8 NAT网关</h4><p>根据要求创建一个公网NAT网关。</p>
<h4 id="3-1-9云服务器备份"><a href="#3-1-9云服务器备份" class="headerlink" title="3.1.9云服务器备份"></a>3.1.9云服务器备份</h4><p>创建一个云服务器备份存储库名为server_backup，容量为100G。将ChinaSkill-node-1云服务器制作镜像文件chinaskill-image。</p>
<h4 id="3-1-10-负载均衡器"><a href="#3-1-10-负载均衡器" class="headerlink" title="3.1.10 负载均衡器"></a>3.1.10 负载均衡器</h4><p>根据要求创建一个负载均衡器chinaskill-elb。</p>
<h4 id="3-1-11-弹性伸缩管理"><a href="#3-1-11-弹性伸缩管理" class="headerlink" title="3.1.11 弹性伸缩管理"></a>3.1.11 弹性伸缩管理</h4><p>根据要求新建一个弹性伸缩启动配置。</p>
<h3 id="任务2-公有云服务运维（10分）"><a href="#任务2-公有云服务运维（10分）" class="headerlink" title="任务2 公有云服务运维（10分）"></a>任务2 公有云服务运维（10分）</h3><h4 id="3-2-1-云容器引擎"><a href="#3-2-1-云容器引擎" class="headerlink" title="3.2.1 云容器引擎"></a>3.2.1 云容器引擎</h4><p>在公有云上，按照要求创建一个x86架构的容器云集群。</p>
<h4 id="3-2-2-云容器管理"><a href="#3-2-2-云容器管理" class="headerlink" title="3.2.2 云容器管理"></a>3.2.2 云容器管理</h4><p>使用插件管理在kcloud容器集群中安装Dashboard可视化监控界面。</p>
<h4 id="3-2-3-使用kubectl操作集群"><a href="#3-2-3-使用kubectl操作集群" class="headerlink" title="3.2.3 使用kubectl操作集群"></a>3.2.3 使用kubectl操作集群</h4><p>在kcloud集群中安装kubectl命令，使用kubectl命令管理kcloud集群。</p>
<h4 id="3-2-4-安装Helm"><a href="#3-2-4-安装Helm" class="headerlink" title="3.2.4 安装Helm"></a>3.2.4 安装Helm</h4><p>使用提供的Helm软件包，在kcloud集群中安装Helm服务。</p>
<h4 id="3-2-5-根据提供的chart包mariadb-7-3-14-tgz部署mariadb服务，修改mariadb使用NodePort模式对其进行访问。"><a href="#3-2-5-根据提供的chart包mariadb-7-3-14-tgz部署mariadb服务，修改mariadb使用NodePort模式对其进行访问。" class="headerlink" title="3.2.5 根据提供的chart包mariadb-7.3.14.tgz部署mariadb服务，修改mariadb使用NodePort模式对其进行访问。"></a>3.2.5 根据提供的chart包mariadb-7.3.14.tgz部署mariadb服务，修改mariadb使用NodePort模式对其进行访问。</h4><h4 id="3-2-6-在k8s集群中创建mariadb命名空间，根据提供的chart包mariadb-7-3-14-tgz修改其配置，使用NodePort模式对其进行访问。"><a href="#3-2-6-在k8s集群中创建mariadb命名空间，根据提供的chart包mariadb-7-3-14-tgz修改其配置，使用NodePort模式对其进行访问。" class="headerlink" title="3.2.6 在k8s集群中创建mariadb命名空间，根据提供的chart包mariadb-7.3.14.tgz修改其配置，使用NodePort模式对其进行访问。"></a>3.2.6 在k8s集群中创建mariadb命名空间，根据提供的chart包mariadb-7.3.14.tgz修改其配置，使用NodePort模式对其进行访问。</h4><h3 id="任务3-公有云运维开发（10分）"><a href="#任务3-公有云运维开发（10分）" class="headerlink" title="任务3 公有云运维开发（10分）"></a>任务3 公有云运维开发（10分）</h3><h4 id="3-3-1-开发环境搭建"><a href="#3-3-1-开发环境搭建" class="headerlink" title="3.3.1 开发环境搭建"></a>3.3.1 开发环境搭建</h4><p>创建一台云主机，并登录此云服务器，安装Python3.68运行环境与SDK依赖库。</p>
<h4 id="3-3-2-安全组管理"><a href="#3-3-2-安全组管理" class="headerlink" title="3.3.2 安全组管理"></a>3.3.2 安全组管理</h4><p>调用api安全组的接口，实现安全组的增删查改。</p>
<h4 id="3-3-3-安全组规则管理"><a href="#3-3-3-安全组规则管理" class="headerlink" title="3.3.3 安全组规则管理"></a>3.3.3 安全组规则管理</h4><p>调用SDK安全组规则的方法，实现安全组规则的增删查改。</p>
<h4 id="3-3-4-云主机管理"><a href="#3-3-4-云主机管理" class="headerlink" title="3.3.4 云主机管理"></a>3.3.4 云主机管理</h4><p>调用SDK云主机管理的方法，实现云主机的的增删查改。</p>
<h4 id="3-3-5-完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）"><a href="#3-3-5-完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）" class="headerlink" title="3.3.5 完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）"></a>3.3.5 完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务4-边缘计算系统运维（10分）"><a href="#任务4-边缘计算系统运维（10分）" class="headerlink" title="任务4 边缘计算系统运维（10分）"></a>任务4 边缘计算系统运维（10分）</h3><h4 id="3-4-1-云端部署"><a href="#3-4-1-云端部署" class="headerlink" title="3.4.1 云端部署"></a>3.4.1 云端部署</h4><p>构建Kubernetes容器云平台，云端部署KubeEdge CloudCore云测模块，并启动cloudcore服务。</p>
<h4 id="3-4-2-边端部署"><a href="#3-4-2-边端部署" class="headerlink" title="3.4.2 边端部署"></a>3.4.2 边端部署</h4><p>在边侧部署KubeEdge EdgeCore边侧模块，并启动edgecore服务。</p>
<h4 id="3-4-3-边缘应用部署"><a href="#3-4-3-边缘应用部署" class="headerlink" title="3.4.3 边缘应用部署"></a>3.4.3 边缘应用部署</h4><p>通过边缘计算平台完成应用场景镜像部署与调试。（本任务只公布考试范围，不公布赛题）</p>
<h3 id="任务5-边缘计算云应用开发（5分）"><a href="#任务5-边缘计算云应用开发（5分）" class="headerlink" title="任务5 边缘计算云应用开发（5分）"></a>任务5 边缘计算云应用开发（5分）</h3><h4 id="3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）"><a href="#3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）" class="headerlink" title="3.5.1 对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）"></a>3.5.1 对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）</h4><h1 id="“云计算应用”赛项赛卷2"><a href="#“云计算应用”赛项赛卷2" class="headerlink" title="“云计算应用”赛项赛卷2"></a>“云计算应用”赛项赛卷2</h1><h2 id="模块一-私有云（30分）-1"><a href="#模块一-私有云（30分）-1" class="headerlink" title="模块一 私有云（30分）"></a>模块一 私有云（30分）</h2><h3 id="任务1-私有云服务搭建（5分）-1"><a href="#任务1-私有云服务搭建（5分）-1" class="headerlink" title="任务1 私有云服务搭建（5分）"></a>任务1 私有云服务搭建（5分）</h3><h4 id="1-1-1-基础环境配置-1"><a href="#1-1-1-基础环境配置-1" class="headerlink" title="1.1.1   基础环境配置"></a>1.1.1   基础环境配置</h4><p>1.控制节点主机名为controller，设置计算节点主机名为compute；</p>
<p>2.hosts文件将IP地址映射为主机名。</p>
<h4 id="1-1-2-Yum源配置"><a href="#1-1-2-Yum源配置" class="headerlink" title="1.1.2   Yum源配置"></a>1.1.2   Yum源配置</h4><p>使用提供的http服务地址，分别设置controller节点和compute节点的Yum源文件http.repo。</p>
<h4 id="1-1-3-配置无秘钥ssh-1"><a href="#1-1-3-配置无秘钥ssh-1" class="headerlink" title="1.1.3   配置无秘钥ssh"></a>1.1.3   配置无秘钥ssh</h4><p>配置controller节点可以无秘钥访问compute节点。</p>
<h4 id="1-1-4-基础安装-1"><a href="#1-1-4-基础安装-1" class="headerlink" title="1.1.4   基础安装"></a>1.1.4   基础安装</h4><p>在控制节点和计算节点上分别安装openstack-iaas软件包。</p>
<h4 id="1-1-5-数据库安装与调优-1"><a href="#1-1-5-数据库安装与调优-1" class="headerlink" title="1.1.5   数据库安装与调优"></a>1.1.5   数据库安装与调优</h4><p>在控制节点上使用安装Mariadb、RabbitMQ等服务。并进行相关操作。</p>
<h4 id="1-1-6-Keystone服务安装与使用-1"><a href="#1-1-6-Keystone服务安装与使用-1" class="headerlink" title="1.1.6   Keystone服务安装与使用"></a>1.1.6   Keystone服务安装与使用</h4><p>在控制节点上安装Keystone服务并创建用户。</p>
<h4 id="1-1-7-Glance安装与使用-1"><a href="#1-1-7-Glance安装与使用-1" class="headerlink" title="1.1.7   Glance安装与使用"></a>1.1.7   Glance安装与使用</h4><p>在控制节点上安装Glance 服务。上传镜像至平台，并设置镜像启动的要求参数。</p>
<h4 id="1-1-8-Nova安装-1"><a href="#1-1-8-Nova安装-1" class="headerlink" title="1.1.8   Nova安装"></a>1.1.8   Nova安装</h4><p>在控制节点和计算节点上分别安装Nova服务。安装完成后，完成Nova相关配置。</p>
<h4 id="1-1-9-Neutron安装-1"><a href="#1-1-9-Neutron安装-1" class="headerlink" title="1.1.9   Neutron安装"></a>1.1.9   Neutron安装</h4><p>在控制和计算节点上正确安装Neutron服务。</p>
<h4 id="1-1-10-Dashboard安装-1"><a href="#1-1-10-Dashboard安装-1" class="headerlink" title="1.1.10  Dashboard安装"></a>1.1.10  Dashboard安装</h4><p>在控制节点上安装Dashboard服务。安装完成后，将Dashboard中的 Django数据修改为存储在文件中。</p>
<h4 id="1-1-11-Swift安装-1"><a href="#1-1-11-Swift安装-1" class="headerlink" title="1.1.11  Swift安装"></a>1.1.11  Swift安装</h4><p>在控制节点和计算节点上分别安装Swift服务。安装完成后，将cirros镜像进行分片存储。</p>
<h4 id="1-1-12-Cinder创建硬盘-1"><a href="#1-1-12-Cinder创建硬盘-1" class="headerlink" title="1.1.12  Cinder创建硬盘"></a>1.1.12  Cinder创建硬盘</h4><p>在控制节点和计算节点分别安装Cinder服务，请在计算节点，对块存储进行扩容操作。</p>
<h4 id="1-1-13-Cloudkitty服务安装与使用"><a href="#1-1-13-Cloudkitty服务安装与使用" class="headerlink" title="1.1.13  Cloudkitty服务安装与使用"></a>1.1.13  Cloudkitty服务安装与使用</h4><p>在控制节点安装cloudkitty服务，安装完毕后，启用hashmap评级模块，并设置计费规则。</p>
<h3 id="任务2-私有云服务运维（15分）-1"><a href="#任务2-私有云服务运维（15分）-1" class="headerlink" title="任务2 私有云服务运维（15分）"></a>任务2 私有云服务运维（15分）</h3><h4 id="1-2-1-OpenStack平台内存优化"><a href="#1-2-1-OpenStack平台内存优化" class="headerlink" title="1.2.1   OpenStack平台内存优化"></a>1.2.1   OpenStack平台内存优化</h4><p>搭建完OpenStack平台后，关闭系统的内存共享，打开透明大页。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /sys/kernel/mm/transparent_hugepage/defrag </span><br><span class="line">[always] madvise never</span><br><span class="line">[root@controller ~]# echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag </span><br><span class="line">[root@controller ~]# cat /sys/kernel/mm/transparent_hugepage/defrag </span><br><span class="line">always madvise [never]</span><br></pre></td></tr></table></figure>

<h4 id="1-2-2-修改文件句柄数"><a href="#1-2-2-修改文件句柄数" class="headerlink" title="1.2.2   修改文件句柄数"></a>1.2.2   修改文件句柄数</h4><p>修改相关参数，将控制节点的最大文件句柄数永久修改为65535。</p>
<h4 id="1-2-3-Linux系统调优-防止SYN攻击"><a href="#1-2-3-Linux系统调优-防止SYN攻击" class="headerlink" title="1.2.3   Linux系统调优-防止SYN攻击"></a>1.2.3   Linux系统调优-防止SYN攻击</h4><p>修改控制节点的相关配置文件，开启SYN cookie，防止SYN洪水攻击。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.tcp_syncookies = 1</span><br></pre></td></tr></table></figure>



<h4 id="1-2-4-Keystone权限控制"><a href="#1-2-4-Keystone权限控制" class="headerlink" title="1.2.4   Keystone权限控制"></a>1.2.4   Keystone权限控制</h4><p>使用自行搭建的OpenStack私有云平台，修改普通用户权限，使普通用户不能对镜像进行创建和删除操作。</p>
<h4 id="1-2-5-Nova保持云主机状态"><a href="#1-2-5-Nova保持云主机状态" class="headerlink" title="1.2.5   Nova保持云主机状态"></a>1.2.5   Nova保持云主机状态</h4><p>修改OpenStack相关参数，使得云平台在意外断电又开启后，云主机可以保持断电前的状态。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# cat /etc/nova/nova.conf | grep resume</span><br><span class="line">resume_guests_state_on_host_boot=true</span><br></pre></td></tr></table></figure>



<h4 id="1-2-6-镜像转换"><a href="#1-2-6-镜像转换" class="headerlink" title="1.2.6   镜像转换"></a>1.2.6   镜像转换</h4><p>使用CentOS7.5-compress.qcow2 的镜像，将该镜像转换为RAW格式。</p>
<h4 id="1-2-7-使用Heat模板创建网络"><a href="#1-2-7-使用Heat模板创建网络" class="headerlink" title="1.2.7   使用Heat模板创建网络"></a>1.2.7   使用Heat模板创建网络</h4><p>在自行搭建的OpenStack私有云平台上，编写Heat模板文件，完成网络的创建。</p>
<h4 id="1-2-8-Glance镜像存储限制"><a href="#1-2-8-Glance镜像存储限制" class="headerlink" title="1.2.8   Glance镜像存储限制"></a>1.2.8   Glance镜像存储限制</h4><p>在OpenStack平台上，请修改Glance后端配置文件，将用户的镜像存储配额限制为20GB。</p>
<h4 id="1-2-9-KVM-I-x2F-O优化"><a href="#1-2-9-KVM-I-x2F-O优化" class="headerlink" title="1.2.9   KVM I&#x2F;O优化"></a>1.2.9   KVM I&#x2F;O优化</h4><p>使用自行搭建的OpenStack私有云平台，优化KVM的I&#x2F;O调度算法，将默认的模式修改为none模式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /sys/block/vda/queue/scheduler </span><br><span class="line">[mq-deadline] kyber none</span><br><span class="line">[root@controller ~]# echo none &gt;&gt; /sys/block/vda/queue/scheduler </span><br><span class="line">[root@controller ~]# cat /sys/block/vda/queue/scheduler </span><br><span class="line">[none] mq-deadline kyber</span><br></pre></td></tr></table></figure>



<h4 id="1-2-10-Cinder限速"><a href="#1-2-10-Cinder限速" class="headerlink" title="1.2.10  Cinder限速"></a>1.2.10  Cinder限速</h4><p>请修改cinder后端配置文件将卷复制带宽限制为最高100 MiB&#x2F;s。</p>
<h4 id="1-2-11-完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"><a href="#1-2-11-完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）" class="headerlink" title="1.2.11  完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"></a>1.2.11  完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务3-私有云运维开发（10分）-1"><a href="#任务3-私有云运维开发（10分）-1" class="headerlink" title="任务3 私有云运维开发（10分）"></a>任务3 私有云运维开发（10分）</h3><h4 id="1-3-1-编写Shell一键部署脚本-1"><a href="#1-3-1-编写Shell一键部署脚本-1" class="headerlink" title="1.3.1   编写Shell一键部署脚本"></a>1.3.1   编写Shell一键部署脚本</h4><p>编写一键部署owncloud云网盘应用系统。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@node ~]# cat install_owncloud.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">setenforce 0</span><br><span class="line">mv /etc/yum.repos.d/* /home</span><br><span class="line">cat&gt;&gt;/etc/yum.repos.d/local.repo&lt;&lt;EOF</span><br><span class="line">[owncloud]</span><br><span class="line">name=owncloud</span><br><span class="line">baseurl=file:///root/lamp-repo</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line">EOF</span><br><span class="line">yum install httpd mariadb mariadb-server php php-fpm php-mysqlnd php-gd php-xml php-intl php-zip php-dom php-mbstring unzip -y</span><br><span class="line">systemctl start httpd mariadb php-fpm</span><br><span class="line">mysqladmin -uroot password 123456</span><br><span class="line">mysql -uroot -p123456&lt;&lt;EOF</span><br><span class="line">create database owncloud;</span><br><span class="line">create user owncloud@localhost identified by &#x27;123456&#x27;;</span><br><span class="line">grant all privileges on owncloud.* to owncloud@localhost identified by &#x27;123456&#x27;;</span><br><span class="line">flush privileges;</span><br><span class="line">EOF</span><br><span class="line">unzip owncloud-complete.zip</span><br><span class="line">mv owncloud /var/www/html/</span><br><span class="line">chown -R apache:apache /var/www/html/owncloud</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2编写Ansible脚本，部署FTP服务。"><a href="#1-3-2编写Ansible脚本，部署FTP服务。" class="headerlink" title="1.3.2编写Ansible脚本，部署FTP服务。"></a>1.3.2编写Ansible脚本，部署FTP服务。</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ftp]# cat ftp.yaml </span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">  - hosts: node</span><br><span class="line">    remote_user: root</span><br><span class="line">    tasks:</span><br><span class="line">     - name: install vsftpd </span><br><span class="line">       yum:</span><br><span class="line">         name: vsftpd</span><br><span class="line">     - name: start vsftpd</span><br><span class="line">       service:</span><br><span class="line">         name: vsftpd</span><br><span class="line">         state: started</span><br><span class="line">         enabled: true</span><br></pre></td></tr></table></figure>

<h4 id="1-3-3-Ansible部署zabbix服务"><a href="#1-3-3-Ansible部署zabbix服务" class="headerlink" title="1.3.3   Ansible部署zabbix服务"></a>1.3.3   Ansible部署zabbix服务</h4><p>编写Ansible脚本，部署zabbix服务。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">[root@owncloud zabbix]# cat zabbix.yaml </span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">  - hosts: zabbix</span><br><span class="line">    tasks:</span><br><span class="line">      - name: stop selinux</span><br><span class="line">        shell: setenforce 0</span><br><span class="line">      - name: tar zabbix</span><br><span class="line">        unarchive:</span><br><span class="line">          src: zabbix-repo.tar.gz</span><br><span class="line">          dest: /opt/</span><br><span class="line">      - name: rm -rf /etc/yum.repos.d/*</span><br><span class="line">        shell: rm -rf /etc/yum.repos.d/*</span><br><span class="line">      - name: copy repo</span><br><span class="line">        copy:</span><br><span class="line">          src: local.repo</span><br><span class="line">          dest: /etc/yum.repos.d/</span><br><span class="line">      - name: install httpd mariadb-server mariadb</span><br><span class="line">        yum:</span><br><span class="line">          name: httpd,mariadb-server,mariadb</span><br><span class="line">      - name: start httpd mariadb</span><br><span class="line">        shell: systemctl start httpd mariadb</span><br><span class="line">      - name: install zabbix</span><br><span class="line">        yum:</span><br><span class="line">          name: zabbix-server-mysql,zabbix-web-mysql,zabbix-agent</span><br><span class="line">      - name: init mariadb</span><br><span class="line">        shell: mysqladmin -uroot password 123456</span><br><span class="line">      - name: create database</span><br><span class="line">        shell: mysql -uroot -p123456 -e &quot;create database zabbix character set utf8 collate utf8_bin;&quot;</span><br><span class="line">      - name: create user</span><br><span class="line">        shell: mysql -uroot -p123456 -e &quot;grant all privileges on zabbix.* to zabbix@localhost identified by &#x27;zabbix&#x27;;&quot;</span><br><span class="line">      - name: load sql</span><br><span class="line">        shell: zcat /usr/share/doc/zabbix-server-mysql-4.0.45/create.sql.gz | mysql -uzabbix -pzabbix zabbix</span><br><span class="line">      - name: cp zabbix-web</span><br><span class="line">        shell: cp -rf /usr/share/zabbix/* /var/www/html</span><br><span class="line">      - name: restart httpd</span><br><span class="line">        shell: systemctl restart httpd</span><br><span class="line">      - name: sed config</span><br><span class="line">        shell: sed -i &quot;2a DBPassword = zabbix&quot; /etc/zabbix/zabbix_server.conf</span><br><span class="line">      - name: start zabbix-server</span><br><span class="line">        shell: systemctl start zabbix-server</span><br></pre></td></tr></table></figure>



<h4 id="1-3-4-编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"><a href="#1-3-4-编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）" class="headerlink" title="1.3.4   编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"></a>1.3.4   编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）</h4><h2 id="模块二-容器云（30分）-1"><a href="#模块二-容器云（30分）-1" class="headerlink" title="模块二 容器云（30分）"></a>模块二 容器云（30分）</h2><p>企业构建Kubernetes容器云集群，引入KubeVirt实现OpenStack到Kubernetes的全面转型，用Kubernetes来管一切虚拟化运行时，包含裸金属、VM、容器。同时研发团队决定搭建基于Kubernetes 的CI&#x2F;CD环境，基于这个平台来实现DevOps流程。引入服务网格Istio，实现业务系统的灰度发布，治理和优化公司各种微服务，并开发自动化运维程序。</p>
<h3 id="任务1-容器云服务搭建（5分）-1"><a href="#任务1-容器云服务搭建（5分）-1" class="headerlink" title="任务1 容器云服务搭建（5分）"></a>任务1 容器云服务搭建（5分）</h3><h4 id="2-1-1-部署容器云平台-1"><a href="#2-1-1-部署容器云平台-1" class="headerlink" title="2.1.1   部署容器云平台"></a>2.1.1   部署容器云平台</h4><p>使用OpenStack私有云平台创建两台云主机，分别作为Kubernetes集群的master节点和node节点，然后完成Kubernetes集群的部署，并完成Istio服务网格、KubeVirt虚拟化和Harbor镜像仓库的部署。</p>
<h3 id="任务2-容器云服务运维（15分）-1"><a href="#任务2-容器云服务运维（15分）-1" class="headerlink" title="任务2 容器云服务运维（15分）"></a>任务2 容器云服务运维（15分）</h3><h4 id="2-2-1-容器化Memcache服务："><a href="#2-2-1-容器化Memcache服务：" class="headerlink" title="2.2.1   容器化Memcache服务："></a>2.2.1   容器化Memcache服务：</h4><p>编写Dockerfile文件构建memcached镜像，要求基于centos完成memcached服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-2-容器化MariaDB服务"><a href="#2-2-2-容器化MariaDB服务" class="headerlink" title="2.2.2   容器化MariaDB服务"></a>2.2.2   容器化MariaDB服务</h4><p>编写Dockerfile文件构建mysql镜像，要求基于centos完成MariaDB服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-3-容器化前端服务"><a href="#2-2-3-容器化前端服务" class="headerlink" title="2.2.3   容器化前端服务"></a>2.2.3   容器化前端服务</h4><p>编写Dockerfile文件构建nginx镜像，要求基于centos完成Nginx服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-4-容器化Blog服务"><a href="#2-2-4-容器化Blog服务" class="headerlink" title="2.2.4   容器化Blog服务"></a>2.2.4   容器化Blog服务</h4><p>编写Dockerfile文件构建blog镜像，要求基于centos完成Python3.6环境和DjangoBlog服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-5-编排部署博客系统"><a href="#2-2-5-编排部署博客系统" class="headerlink" title="2.2.5   编排部署博客系统"></a>2.2.5   编排部署博客系统</h4><p>编写docker-compose.yaml文件，要求使用镜像：memcached、mysql、nginx和blog完成Blog博客系统的编排部署。</p>
<h4 id="2-2-6-安装GitLab环境"><a href="#2-2-6-安装GitLab环境" class="headerlink" title="2.2.6   安装GitLab环境"></a>2.2.6   安装GitLab环境</h4><p>新建命名空间kube-ops，将GitLab部署到该命名空间下，然后完成GitLab服务的配置。</p>
<h4 id="2-2-7-部署GitLab-Runner"><a href="#2-2-7-部署GitLab-Runner" class="headerlink" title="2.2.7   部署GitLab Runner"></a>2.2.7   部署GitLab Runner</h4><p>将GitLab Runner部署到kube-ops命名空间下，并完成GitLab Runner在GitLab中的注册。</p>
<h4 id="2-2-8-配置GitLab"><a href="#2-2-8-配置GitLab" class="headerlink" title="2.2.8   配置GitLab"></a>2.2.8   配置GitLab</h4><p>在GitLab中新建公开项目并导入离线项目包，然后将Kubernetes集群添加到GitLab中。</p>
<h4 id="2-2-9-构建CI-x2F-CD-1"><a href="#2-2-9-构建CI-x2F-CD-1" class="headerlink" title="2.2.9   构建CI&#x2F;CD"></a>2.2.9   构建CI&#x2F;CD</h4><p>在项目中编写流水线脚本，然后触发自动构建，要求完成构建代码、构建镜像、推送镜像Harbor、并发布服务到Kubernetes集群。</p>
<h4 id="2-2-10-服务网格：创建DestinationRule"><a href="#2-2-10-服务网格：创建DestinationRule" class="headerlink" title="2.2.10  服务网格：创建DestinationRule"></a>2.2.10  服务网格：创建DestinationRule</h4><p>将Bookinfo应用部署到default命名空间下，为Bookinfo应用的四个微服务设置默认目标规则，指定各个服务的可用版本。</p>
<h4 id="2-2-11-KubeVirt运维：创建VMI"><a href="#2-2-11-KubeVirt运维：创建VMI" class="headerlink" title="2.2.11  KubeVirt运维：创建VMI"></a>2.2.11  KubeVirt运维：创建VMI</h4><p>使用提供的镜像在default命名空间下创建一台VMI，名称为exam，指定VMI的内存、CPU、启动参数等配置。</p>
<p>2.2.12  完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</p>
<h3 id="任务3-容器云运维开发（10分）-1"><a href="#任务3-容器云运维开发（10分）-1" class="headerlink" title="任务3 容器云运维开发（10分）"></a>任务3 容器云运维开发（10分）</h3><p>2.3.1   管理job服务</p>
<p>Kubernetes Python运维脚本开发，使用SDK方式管理job服务。</p>
<h4 id="2-3-2-管理service服务"><a href="#2-3-2-管理service服务" class="headerlink" title="2.3.2   管理service服务"></a>2.3.2   管理service服务</h4><p>Kubernetes Python运维脚本开发，使用Restful APIs方式管理service服务。</p>
<h4 id="2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-1"><a href="#2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-1" class="headerlink" title="2.3.3   编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"></a>2.3.3   编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）</h4><h2 id="模块三-公有云（40分）-1"><a href="#模块三-公有云（40分）-1" class="headerlink" title="模块三 公有云（40分）"></a>模块三 公有云（40分）</h2><p>企业选择国内公有云提供商，选择云主机、云网络、云硬盘、云防火墙、负载均衡等服务，可创建Web服务，共享文件存储服务，数据库服务，数据库集群等服务。搭建基于云原生的DevOps相关服务，构建云、边、端一体化的边缘计算系统，并开发云应用程序。</p>
<p>根据上述公有云平台的特性，完成公有云中的各项运维工作。</p>
<h3 id="任务1-公有云服务搭建（5分）-1"><a href="#任务1-公有云服务搭建（5分）-1" class="headerlink" title="任务1 公有云服务搭建（5分）"></a>任务1 公有云服务搭建（5分）</h3><h4 id="3-1-1-私有网络管理-1"><a href="#3-1-1-私有网络管理-1" class="headerlink" title="3.1.1   私有网络管理"></a>3.1.1   私有网络管理</h4><p>在公有云中完成虚拟私有云网络的创建。</p>
<h4 id="3-1-2-云实例管理-1"><a href="#3-1-2-云实例管理-1" class="headerlink" title="3.1.2   云实例管理"></a>3.1.2   云实例管理</h4><p>登录公有云平台，创建两台云实例虚拟机。</p>
<h4 id="3-1-3-管理数据库-1"><a href="#3-1-3-管理数据库-1" class="headerlink" title="3.1.3   管理数据库"></a>3.1.3   管理数据库</h4><p>使用intnetX-mysql网络创建两台chinaskill-sql-1和chinaskill-sql-2云服务器，并完成MongoDB安装。</p>
<h4 id="3-1-4-主从数据库-1"><a href="#3-1-4-主从数据库-1" class="headerlink" title="3.1.4   主从数据库"></a>3.1.4   主从数据库</h4><p>在chinaskill-sql-1和chinaskill-sql-2云服务器中配置MongoDB主从数据库。</p>
<h4 id="3-1-5-node环境管理-1"><a href="#3-1-5-node环境管理-1" class="headerlink" title="3.1.5   node环境管理"></a>3.1.5   node环境管理</h4><p>使用提供的压缩文件，安装Node.js环境。</p>
<h4 id="3-1-6-安全组管理-1"><a href="#3-1-6-安全组管理-1" class="headerlink" title="3.1.6   安全组管理"></a>3.1.6   安全组管理</h4><p>根据要求，创建一个安全组。</p>
<h4 id="3-1-7-RocketChat上云-1"><a href="#3-1-7-RocketChat上云-1" class="headerlink" title="3.1.7   RocketChat上云"></a>3.1.7   RocketChat上云</h4><p>使用http服务器提供文件，将Rocket.Chat应用部署上云。</p>
<h4 id="3-1-8-NAT网关-1"><a href="#3-1-8-NAT网关-1" class="headerlink" title="3.1.8   NAT网关"></a>3.1.8   NAT网关</h4><p>根据要求创建一个公网NAT网关。</p>
<h4 id="3-1-9-云服务器备份"><a href="#3-1-9-云服务器备份" class="headerlink" title="3.1.9   云服务器备份"></a>3.1.9   云服务器备份</h4><p>创建一个云服务器备份存储库名为server_backup，容量为100G。将ChinaSkill-node-1云服务器制作镜像文件chinaskill-image。</p>
<h4 id="3-1-10-负载均衡器-1"><a href="#3-1-10-负载均衡器-1" class="headerlink" title="3.1.10  负载均衡器"></a>3.1.10  负载均衡器</h4><p>根据要求创建一个负载均衡器chinaskill-elb。</p>
<h4 id="3-1-11-弹性伸缩管理-1"><a href="#3-1-11-弹性伸缩管理-1" class="headerlink" title="3.1.11  弹性伸缩管理"></a>3.1.11  弹性伸缩管理</h4><p>根据要求新建一个弹性伸缩启动配置。</p>
<h3 id="任务2-公有云服务运维（10分）-1"><a href="#任务2-公有云服务运维（10分）-1" class="headerlink" title="任务2 公有云服务运维（10分）"></a>任务2 公有云服务运维（10分）</h3><h4 id="3-2-1-云容器引擎-1"><a href="#3-2-1-云容器引擎-1" class="headerlink" title="3.2.1   云容器引擎"></a>3.2.1   云容器引擎</h4><p>在公有云上，按照要求创建一个x86架构的容器云集群。</p>
<h4 id="3-2-2-云容器管理-1"><a href="#3-2-2-云容器管理-1" class="headerlink" title="3.2.2   云容器管理"></a>3.2.2   云容器管理</h4><p>使用插件管理在kcloud容器集群中安装Dashboard可视化监控界面。</p>
<h4 id="3-2-3-使用kubectl操作集群-1"><a href="#3-2-3-使用kubectl操作集群-1" class="headerlink" title="3.2.3   使用kubectl操作集群"></a>3.2.3   使用kubectl操作集群</h4><p>在kcloud集群中安装kubectl命令，使用kubectl命令管理kcloud集群。</p>
<h4 id="3-2-4-云硬盘存储卷"><a href="#3-2-4-云硬盘存储卷" class="headerlink" title="3.2.4   云硬盘存储卷"></a>3.2.4   云硬盘存储卷</h4><p>按照要求购买云硬盘存储卷。</p>
<h4 id="3-2-5-多容器Pod管理"><a href="#3-2-5-多容器Pod管理" class="headerlink" title="3.2.5   多容器Pod管理"></a>3.2.5   多容器Pod管理</h4><p>在kcloud集群节点&#x2F;root目录下编写YAML文件mu-pod.yaml，要求一个pod中包含两个容器。</p>
<h4 id="3-2-6-Namespace管理"><a href="#3-2-6-Namespace管理" class="headerlink" title="3.2.6   Namespace管理"></a>3.2.6   Namespace管理</h4><p>在kcloud集群节点&#x2F;root目录下编写YAML文件my-namespace.yaml并创建namespace。</p>
<h3 id="任务3-公有云运维开发（10分）-1"><a href="#任务3-公有云运维开发（10分）-1" class="headerlink" title="任务3 公有云运维开发（10分）"></a>任务3 公有云运维开发（10分）</h3><h4 id="3-3-1-开发环境搭建-1"><a href="#3-3-1-开发环境搭建-1" class="headerlink" title="3.3.1   开发环境搭建"></a>3.3.1   开发环境搭建</h4><p>创建一台云主机，并登录此云服务器，安装Python3.68运行环境与SDK依赖库。</p>
<h4 id="3-3-2-虚拟私有云VPC管理"><a href="#3-3-2-虚拟私有云VPC管理" class="headerlink" title="3.3.2   虚拟私有云VPC管理"></a>3.3.2   虚拟私有云VPC管理</h4><p>调用api安全组的接口，实现VPC的增删查改。</p>
<h4 id="3-3-3-虚拟私有云VPC子网管理"><a href="#3-3-3-虚拟私有云VPC子网管理" class="headerlink" title="3.3.3   虚拟私有云VPC子网管理"></a>3.3.3   虚拟私有云VPC子网管理</h4><p>调用api安全组的接口，实现虚拟私有云VPC子网的增删查改。</p>
<h4 id="3-3-4-容器集群管理：调用SDK容器集群方法，实现容器集群增、删查、改。"><a href="#3-3-4-容器集群管理：调用SDK容器集群方法，实现容器集群增、删查、改。" class="headerlink" title="3.3.4   容器集群管理：调用SDK容器集群方法，实现容器集群增、删查、改。"></a>3.3.4   容器集群管理：调用SDK容器集群方法，实现容器集群增、删查、改。</h4><h4 id="3-3-5-完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）-1"><a href="#3-3-5-完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）-1" class="headerlink" title="3.3.5   完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）"></a>3.3.5   完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务4-边缘计算系统运维（10分）-1"><a href="#任务4-边缘计算系统运维（10分）-1" class="headerlink" title="任务4 边缘计算系统运维（10分）"></a>任务4 边缘计算系统运维（10分）</h3><h4 id="3-4-1-云端部署-1"><a href="#3-4-1-云端部署-1" class="headerlink" title="3.4.1   云端部署"></a>3.4.1   云端部署</h4><p>构建Kubernetes容器云平台，云端部署KubeEdge CloudCore云测模块，并启动cloudcore服务。</p>
<h4 id="3-4-2-边端部署-1"><a href="#3-4-2-边端部署-1" class="headerlink" title="3.4.2   边端部署"></a>3.4.2   边端部署</h4><p>在边侧部署KubeEdge EdgeCore边侧模块，并启动edgecore服务。</p>
<h4 id="3-4-3-边缘应用部署-1"><a href="#3-4-3-边缘应用部署-1" class="headerlink" title="3.4.3   边缘应用部署"></a>3.4.3   边缘应用部署</h4><p>通过边缘计算平台完成应用场景镜像部署与调试。（本任务只公布考试范围，不公布赛题）</p>
<h3 id="任务5-边缘计算云应用开发（5分）-1"><a href="#任务5-边缘计算云应用开发（5分）-1" class="headerlink" title="任务5 边缘计算云应用开发（5分）"></a>任务5 边缘计算云应用开发（5分）</h3><h4 id="3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）-1"><a href="#3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）-1" class="headerlink" title="3.5.1   对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）"></a>3.5.1   对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）</h4><h1 id="“云计算应用”赛项赛卷3"><a href="#“云计算应用”赛项赛卷3" class="headerlink" title="“云计算应用”赛项赛卷3"></a>“云计算应用”赛项赛卷3</h1><h2 id="模块一-私有云（30分）-2"><a href="#模块一-私有云（30分）-2" class="headerlink" title="模块一 私有云（30分）"></a>模块一 私有云（30分）</h2><p>企业首先完成私有云平台搭建和运维，私有云平台提供云主机、云网络、云存储等基础架构云服务，并开发自动化运维程序。</p>
<h3 id="任务1-私有云服务搭建（5分）-2"><a href="#任务1-私有云服务搭建（5分）-2" class="headerlink" title="任务1 私有云服务搭建（5分）"></a>任务1 私有云服务搭建（5分）</h3><h4 id="1-1-1-基础环境配置-2"><a href="#1-1-1-基础环境配置-2" class="headerlink" title="1.1.1   基础环境配置"></a>1.1.1   基础环境配置</h4><p>1.控制节点主机名为controller，设置计算节点主机名为compute；</p>
<p>2.hosts文件将IP地址映射为主机名。</p>
<h4 id="1-1-2-yum源配置-1"><a href="#1-1-2-yum源配置-1" class="headerlink" title="1.1.2   yum源配置"></a>1.1.2   yum源配置</h4><p>使用提供的http服务地址，分别设置controller节点和compute节点的yum源文件http.repo。</p>
<h4 id="1-1-3-配置无秘钥ssh-2"><a href="#1-1-3-配置无秘钥ssh-2" class="headerlink" title="1.1.3   配置无秘钥ssh"></a>1.1.3   配置无秘钥ssh</h4><p>配置controller节点可以无秘钥访问compute节点。</p>
<h4 id="1-1-4-基础安装-2"><a href="#1-1-4-基础安装-2" class="headerlink" title="1.1.4   基础安装"></a>1.1.4   基础安装</h4><p>在控制节点和计算节点上分别安装openstack-iaas软件包。</p>
<h4 id="1-1-5-数据库安装与调优-2"><a href="#1-1-5-数据库安装与调优-2" class="headerlink" title="1.1.5   数据库安装与调优"></a>1.1.5   数据库安装与调优</h4><p>在控制节点上使用安装Mariadb、RabbitMQ等服务。并进行相关操作。</p>
<h4 id="1-1-6-Keystone服务安装与使用-2"><a href="#1-1-6-Keystone服务安装与使用-2" class="headerlink" title="1.1.6   Keystone服务安装与使用"></a>1.1.6   Keystone服务安装与使用</h4><p>在控制节点上安装Keystone服务并创建用户。</p>
<h4 id="1-1-7-Glance安装与使用-2"><a href="#1-1-7-Glance安装与使用-2" class="headerlink" title="1.1.7   Glance安装与使用"></a>1.1.7   Glance安装与使用</h4><p>在控制节点上安装Glance 服务。上传镜像至平台，并设置镜像启动的要求参数。</p>
<h4 id="1-1-8-Nova安装-2"><a href="#1-1-8-Nova安装-2" class="headerlink" title="1.1.8   Nova安装"></a>1.1.8   Nova安装</h4><p>在控制节点和计算节点上分别安装Nova服务。安装完成后，完成Nova相关配置。</p>
<h4 id="1-1-9-Neutron安装-2"><a href="#1-1-9-Neutron安装-2" class="headerlink" title="1.1.9   Neutron安装"></a>1.1.9   Neutron安装</h4><p>在控制和计算节点上正确安装Neutron服务。</p>
<h4 id="1-1-10-Dashboard安装-2"><a href="#1-1-10-Dashboard安装-2" class="headerlink" title="1.1.10  Dashboard安装"></a>1.1.10  Dashboard安装</h4><p>在控制节点上安装Dashboard服务。安装完成后，将Dashboard中的 Django数据修改为存储在文件中。</p>
<h4 id="1-1-11-Swift安装-2"><a href="#1-1-11-Swift安装-2" class="headerlink" title="1.1.11  Swift安装"></a>1.1.11  Swift安装</h4><p>在控制节点和计算节点上分别安装Swift服务。安装完成后，将cirros镜像进行分片存储。</p>
<h4 id="1-1-12-Cinder创建硬盘-2"><a href="#1-1-12-Cinder创建硬盘-2" class="headerlink" title="1.1.12  Cinder创建硬盘"></a>1.1.12  Cinder创建硬盘</h4><p>在控制节点和计算节点分别安装Cinder服务，请在计算节点，对块存储进行扩容操作。</p>
<h4 id="1-1-13-Barbican服务安装与使用"><a href="#1-1-13-Barbican服务安装与使用" class="headerlink" title="1.1.13  Barbican服务安装与使用"></a>1.1.13  Barbican服务安装与使用</h4><p>在控制节点安装barbican服务，安装服务完毕后，创建一个密钥。</p>
<h3 id="任务2-私有云服务运维（15分）-2"><a href="#任务2-私有云服务运维（15分）-2" class="headerlink" title="任务2 私有云服务运维（15分）"></a>任务2 私有云服务运维（15分）</h3><h4 id="1-2-1-Glance镜像上传"><a href="#1-2-1-Glance镜像上传" class="headerlink" title="1.2.1   Glance镜像上传"></a>1.2.1   Glance镜像上传</h4><p>在OpenStack私有云平台上，使用cirros-0.3.4-x86_64-disk.img镜像创建一个名为cirros的镜像。</p>
<h4 id="1-2-2-RPM包管理"><a href="#1-2-2-RPM包管理" class="headerlink" title="1.2.2   RPM包管理"></a>1.2.2   RPM包管理</h4><p>解决依赖包冲突，安装libguestfs-tools工具。</p>
<h4 id="1-2-3-Raid磁盘阵列管理"><a href="#1-2-3-Raid磁盘阵列管理" class="headerlink" title="1.2.3   Raid磁盘阵列管理"></a>1.2.3   Raid磁盘阵列管理</h4><p>在云主机上对云硬盘进行操作，先进行分区，然后创建名为&#x2F;dev&#x2F;md5、raid级别为5的磁盘阵列加一个热备盘。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# mdadm -C /dev/md5 -l 5 -n 3 -x 1 /dev/vdb1 /dev/vdb2 /dev/vdb3 /dev/vdb4</span><br></pre></td></tr></table></figure>



<h4 id="1-2-4-使用Heat模板创建flavor"><a href="#1-2-4-使用Heat模板创建flavor" class="headerlink" title="1.2.4   使用Heat模板创建flavor"></a>1.2.4   使用Heat模板创建flavor</h4><p>编写模板server.yaml，按要求创建云主机类型。</p>
<h4 id="1-2-5-虚拟机调整flavor"><a href="#1-2-5-虚拟机调整flavor" class="headerlink" title="1.2.5   虚拟机调整flavor"></a>1.2.5   虚拟机调整flavor</h4><p>使用OpenStack私有云平台，请修改相应配置，实现云主机调整实例大小可以使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allow_resize_to_same_host=true</span><br></pre></td></tr></table></figure>



<h4 id="1-2-6-快照管理"><a href="#1-2-6-快照管理" class="headerlink" title="1.2.6   快照管理"></a>1.2.6   快照管理</h4><p>在OpenStack私有云平台上，创建云主机VM1并打快照，使用qemu-img相关命令，修改compat版本。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack server image create vm1 --name csccvm</span><br><span class="line">[root@controller ~]# mkdir /root/cloudsave</span><br><span class="line">[root@controller ~]# openstack image save --file /root/cloudsave/csccvm.qcow2 csccvm</span><br><span class="line">[root@controller ~]# cd /root/cloudsave/</span><br><span class="line">[root@controller cloudsave]# qemu-img amend -f qcow2 -o compat=0.10 csccvm.qcow2</span><br></pre></td></tr></table></figure>



<h4 id="1-2-7-Swift配置Glance后端存储"><a href="#1-2-7-Swift配置Glance后端存储" class="headerlink" title="1.2.7   Swift配置Glance后端存储"></a>1.2.7   Swift配置Glance后端存储</h4><p>使用OpenStack私有云平台，修改相应的配置文件，使对象存储Swift作为glance镜像服务的后端存储。</p>
<h4 id="1-2-8-Glance镜像存储限制-1"><a href="#1-2-8-Glance镜像存储限制-1" class="headerlink" title="1.2.8   Glance镜像存储限制"></a>1.2.8   Glance镜像存储限制</h4><p>在OpenStack平台上，请修改Glance后端配置文件，将用户的镜像存储配额限制为20GB。</p>
<h4 id="1-2-9-RabbitMQ集群部署"><a href="#1-2-9-RabbitMQ集群部署" class="headerlink" title="1.2.9   RabbitMQ集群部署"></a>1.2.9   RabbitMQ集群部署</h4><p>使用OpenStack私有云平台，创建三个云主机搭建RabbitMQ集群。</p>
<h4 id="1-2-10-云平台安全策略提升"><a href="#1-2-10-云平台安全策略提升" class="headerlink" title="1.2.10  云平台安全策略提升"></a>1.2.10  云平台安全策略提升</h4><p>使用OpenStack，安装必要组件，将私有云平台的访问策略从http提升至https。</p>
<p><code>yum -y install mod_ssl</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/openstack-dashboard/local_settings</span><br><span class="line">##在DEBUG = False下增加4行</span><br><span class="line">USE_SSL = True</span><br><span class="line">CSRF_COOKIE_SECURE = True                              ##原文中有，去掉注释即可</span><br><span class="line">SESSION_COOKIE_SECURE = True                       ##原文中有，去掉注释即可</span><br><span class="line">SESSION_COOKIE_HTTPONLY = True</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/httpd/conf.d/ssl.conf</span><br><span class="line">##将SSLProtocol all -SSLv2 -SSLv3改成：</span><br><span class="line">SSLProtocol all -SSLv2</span><br></pre></td></tr></table></figure>

<p> <code>systemctl restart httpd</code></p>
<p><code>systemctl restart memcached</code></p>
<h4 id="1-2-11-完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-1"><a href="#1-2-11-完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-1" class="headerlink" title="1.2.11  完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"></a>1.2.11  完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务3-私有云运维开发（10分）-2"><a href="#任务3-私有云运维开发（10分）-2" class="headerlink" title="任务3 私有云运维开发（10分）"></a>任务3 私有云运维开发（10分）</h3><h4 id="1-3-1-编写Shell脚本备份数据库"><a href="#1-3-1-编写Shell脚本备份数据库" class="headerlink" title="1.3.1   编写Shell脚本备份数据库"></a>1.3.1   编写Shell脚本备份数据库</h4><p>编写数据库的定期备份shell脚本。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zookeeper-1 ~]# cat mysql_back.sh </span><br><span class="line">#!/bin/bash</span><br><span class="line">datetime=`date +%Y-%m-%d-%H%M%S`</span><br><span class="line">echo $datetime</span><br><span class="line">mysqldump -uroot -p123456 --all-database &gt;&gt; $datetime.sql</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@zookeeper-1 ~]# crontab -e </span><br><span class="line">0 23 * * * /bin/bash /root/mysql_back.sh</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2-Ansible部署MariaDB服务"><a href="#1-3-2-Ansible部署MariaDB服务" class="headerlink" title="1.3.2   Ansible部署MariaDB服务"></a>1.3.2   Ansible部署MariaDB服务</h4><p>编写Ansible脚本，部署MariaDB服务。</p>
<h4 id="1-3-3-Ansible部署ELK服务"><a href="#1-3-3-Ansible部署ELK服务" class="headerlink" title="1.3.3   Ansible部署ELK服务"></a>1.3.3   Ansible部署ELK服务</h4><p>编写Playbook，部署的ELK。</p>
<h4 id="1-3-4-编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-1"><a href="#1-3-4-编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-1" class="headerlink" title="1.3.4   编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"></a>1.3.4   编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）</h4><h2 id="模块二-容器云（30分）-2"><a href="#模块二-容器云（30分）-2" class="headerlink" title="模块二 容器云（30分）"></a>模块二 容器云（30分）</h2><p>企业构建Kubernetes容器云集群，引入KubeVirt实现OpenStack到Kubernetes的全面转型，用Kubernetes来管一切虚拟化运行时，包含裸金属、VM、容器。同时研发团队决定搭建基于Kubernetes 的CI&#x2F;CD环境，基于这个平台来实现DevOps流程。引入服务网格Istio，实现业务系统的灰度发布，治理和优化公司各种微服务，并开发自动化运维程序。</p>
<h3 id="任务1-容器云服务搭建（5分）-2"><a href="#任务1-容器云服务搭建（5分）-2" class="headerlink" title="任务1 容器云服务搭建（5分）"></a>任务1 容器云服务搭建（5分）</h3><h4 id="2-1-1-部署容器云平台-2"><a href="#2-1-1-部署容器云平台-2" class="headerlink" title="2.1.1   部署容器云平台"></a>2.1.1   部署容器云平台</h4><p>使用OpenStack私有云平台创建两台云主机，分别作为Kubernetes集群的master节点和node节点，然后完成Kubernetes集群的部署，并完成Istio服务网格、KubeVirt虚拟化和Harbor镜像仓库的部署。</p>
<h3 id="任务2-容器云服务运维（15分）-2"><a href="#任务2-容器云服务运维（15分）-2" class="headerlink" title="任务2 容器云服务运维（15分）"></a>任务2 容器云服务运维（15分）</h3><h4 id="2-2-1-容器化部署MariaDB："><a href="#2-2-1-容器化部署MariaDB：" class="headerlink" title="2.2.1   容器化部署MariaDB："></a>2.2.1   容器化部署MariaDB：</h4><p>编写Dockerfile文件构建mariadb镜像，要求基于centos完成MariaDB服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-2-容器化部署Redis"><a href="#2-2-2-容器化部署Redis" class="headerlink" title="2.2.2   容器化部署Redis"></a>2.2.2   容器化部署Redis</h4><p>编写Dockerfile文件构建redis镜像，要求基于centos完成Redis服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-3-容器化部署Pig"><a href="#2-2-3-容器化部署Pig" class="headerlink" title="2.2.3   容器化部署Pig"></a>2.2.3   容器化部署Pig</h4><p>编写Dockerfile文件构建pig镜像，要求基于centos完成JDK环境和Pig服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-4-容器化部署Nginx"><a href="#2-2-4-容器化部署Nginx" class="headerlink" title="2.2.4   容器化部署Nginx"></a>2.2.4   容器化部署Nginx</h4><p>编写Dockerfile文件构建nginx镜像，要求基于centos完成Nginx服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-5-编排部署Pig快发开发平台"><a href="#2-2-5-编排部署Pig快发开发平台" class="headerlink" title="2.2.5   编排部署Pig快发开发平台"></a>2.2.5   编排部署Pig快发开发平台</h4><p>编写docker-compose.yaml文件，要求使用镜像mariadb、redis、pig和nginx完成Pig快速开发平台的编排部署。</p>
<h4 id="2-2-6-部署GitLab"><a href="#2-2-6-部署GitLab" class="headerlink" title="2.2.6   部署GitLab"></a>2.2.6   部署GitLab</h4><p>新建命名空间devops，使用Deployment将GitLab部署到该命名空间下，并完成GitLab服务的初始化配置。</p>
<h4 id="2-2-7-配置GitLab"><a href="#2-2-7-配置GitLab" class="headerlink" title="2.2.7   配置GitLab"></a>2.2.7   配置GitLab</h4><p>在GitLab中创建一个名为drone的GitLab OAuth应用程序，创建一个新项目，并将提供的项目包导入到该项目中。</p>
<h4 id="2-2-8-部署Drone"><a href="#2-2-8-部署Drone" class="headerlink" title="2.2.8   部署Drone"></a>2.2.8   部署Drone</h4><p>使用Deployment将Drone服务部署到devops命名空间下，并使用Service暴露服务。</p>
<h4 id="2-2-9-构建CI-x2F-CD-2"><a href="#2-2-9-构建CI-x2F-CD-2" class="headerlink" title="2.2.9   构建CI&#x2F;CD"></a>2.2.9   构建CI&#x2F;CD</h4><p>编写流水线脚本，触发流水线自动构建，完成流水线的构建，构建成功后访问自动发布的服务。</p>
<h4 id="2-2-10-服务网格：创建VirtualService"><a href="#2-2-10-服务网格：创建VirtualService" class="headerlink" title="2.2.10  服务网格：创建VirtualService"></a>2.2.10  服务网格：创建VirtualService</h4><p>将Bookinfo应用部署到default命名空间下，为Bookinfo应用的四个微服务设置默认版本的VirtualService，将所有流量路由到每个微服务的v1版本。</p>
<h4 id="2-2-11-KubeVirt运维：创建VM-1"><a href="#2-2-11-KubeVirt运维：创建VM-1" class="headerlink" title="2.2.11  KubeVirt运维：创建VM"></a>2.2.11  KubeVirt运维：创建VM</h4><p>使用云端镜像在default命名空间下创建一台VM，名称为exam，指定VM的内存、CPU、运行策略、启动参数等配置。</p>
<h4 id="2-2-12-完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-1"><a href="#2-2-12-完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-1" class="headerlink" title="2.2.12  完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"></a>2.2.12  完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务3-容器云运维开发（10分）-2"><a href="#任务3-容器云运维开发（10分）-2" class="headerlink" title="任务3 容器云运维开发（10分）"></a>任务3 容器云运维开发（10分）</h3><h4 id="2-3-1-管理Pod服务"><a href="#2-3-1-管理Pod服务" class="headerlink" title="2.3.1   管理Pod服务"></a>2.3.1   管理Pod服务</h4><p>Kubernetes Python运维脚本开发-使用SDK方式管理Pod服务。</p>
<h4 id="2-3-2-自定义调度器-1"><a href="#2-3-2-自定义调度器-1" class="headerlink" title="2.3.2   自定义调度器"></a>2.3.2   自定义调度器</h4><p>Kubernetes Python运维脚本开发-使用Restful API方式管理调度器。</p>
<h4 id="2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-2"><a href="#2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-2" class="headerlink" title="2.3.3   编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"></a>2.3.3   编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）</h4><h2 id="模块三-公有云（40分）-2"><a href="#模块三-公有云（40分）-2" class="headerlink" title="模块三 公有云（40分）"></a>模块三 公有云（40分）</h2><p>企业选择国内公有云提供商，选择云主机、云网络、云硬盘、云防火墙、负载均衡等服务，可创建Web服务，共享文件存储服务，数据库服务，数据库集群等服务。搭建基于云原生的DevOps相关服务，构建云、边、端一体化的边缘计算系统，并开发云应用程序。</p>
<p>根据上述公有云平台的特性，完成公有云中的各项运维工作。</p>
<h3 id="任务1-公有云服务搭建（5分）-2"><a href="#任务1-公有云服务搭建（5分）-2" class="headerlink" title="任务1 公有云服务搭建（5分）"></a>任务1 公有云服务搭建（5分）</h3><h4 id="3-1-1-私有网络管理-2"><a href="#3-1-1-私有网络管理-2" class="headerlink" title="3.1.1   私有网络管理"></a>3.1.1   私有网络管理</h4><p>在公有云中完成虚拟私有云网络的创建。</p>
<h4 id="3-1-2-云实例管理-2"><a href="#3-1-2-云实例管理-2" class="headerlink" title="3.1.2   云实例管理"></a>3.1.2   云实例管理</h4><p>登录公有云平台，创建两台云实例虚拟机。</p>
<h4 id="3-1-3-管理数据库-2"><a href="#3-1-3-管理数据库-2" class="headerlink" title="3.1.3   管理数据库"></a>3.1.3   管理数据库</h4><p>使用intnetX-mysql网络创建两台chinaskill-sql-1和chinaskill-sql-2云服务器，并完成MongoDB安装。</p>
<h4 id="3-1-4-主从数据库-2"><a href="#3-1-4-主从数据库-2" class="headerlink" title="3.1.4   主从数据库"></a>3.1.4   主从数据库</h4><p>在chinaskill-sql-1和chinaskill-sql-2云服务器中配置MongoDB主从数据库。</p>
<h4 id="3-1-5-node环境管理-2"><a href="#3-1-5-node环境管理-2" class="headerlink" title="3.1.5   node环境管理"></a>3.1.5   node环境管理</h4><p>使用提供的压缩文件，安装Node.js环境。</p>
<h4 id="3-1-6-安全组管理-2"><a href="#3-1-6-安全组管理-2" class="headerlink" title="3.1.6   安全组管理"></a>3.1.6   安全组管理</h4><p>根据要求，创建一个安全组。</p>
<h4 id="3-1-7-RocketChat上云-2"><a href="#3-1-7-RocketChat上云-2" class="headerlink" title="3.1.7   RocketChat上云"></a>3.1.7   RocketChat上云</h4><p>使用http服务器提供文件，将Rocket.Chat应用部署上云。</p>
<h4 id="3-1-8-NAT网关-2"><a href="#3-1-8-NAT网关-2" class="headerlink" title="3.1.8   NAT网关"></a>3.1.8   NAT网关</h4><p>根据要求创建一个公网NAT网关。</p>
<h4 id="3-1-9-云服务器备份-1"><a href="#3-1-9-云服务器备份-1" class="headerlink" title="3.1.9   云服务器备份"></a>3.1.9   云服务器备份</h4><p>创建一个云服务器备份存储库名为server_backup，容量为100G。将ChinaSkill-node-1云服务器制作镜像文件chinaskill-image。</p>
<h4 id="3-1-10-负载均衡器-2"><a href="#3-1-10-负载均衡器-2" class="headerlink" title="3.1.10  负载均衡器"></a>3.1.10  负载均衡器</h4><p>根据要求创建一个负载均衡器chinaskill-elb。</p>
<h4 id="3-1-11-弹性伸缩管理-2"><a href="#3-1-11-弹性伸缩管理-2" class="headerlink" title="3.1.11  弹性伸缩管理"></a>3.1.11  弹性伸缩管理</h4><p>根据要求新建一个弹性伸缩启动配置。</p>
<h3 id="任务2-公有云服务运维（10分）-2"><a href="#任务2-公有云服务运维（10分）-2" class="headerlink" title="任务2 公有云服务运维（10分）"></a>任务2 公有云服务运维（10分）</h3><h4 id="3-2-1-云容器引擎-2"><a href="#3-2-1-云容器引擎-2" class="headerlink" title="3.2.1   云容器引擎"></a>3.2.1   云容器引擎</h4><p>在公有云上，按照要求创建一个x86架构的容器云集群。</p>
<h4 id="3-2-2-云容器管理-2"><a href="#3-2-2-云容器管理-2" class="headerlink" title="3.2.2   云容器管理"></a>3.2.2   云容器管理</h4><p>使用插件管理在kcloud容器集群中安装Dashboard可视化监控界面。</p>
<h4 id="3-2-3-使用kubectl操作集群-2"><a href="#3-2-3-使用kubectl操作集群-2" class="headerlink" title="3.2.3   使用kubectl操作集群"></a>3.2.3   使用kubectl操作集群</h4><p>在kcloud集群中安装kubectl命令，使用kubectl命令管理kcloud集群。</p>
<h4 id="3-2-4-安装Helm-1"><a href="#3-2-4-安装Helm-1" class="headerlink" title="3.2.4   安装Helm"></a>3.2.4   安装Helm</h4><p>使用提供的Helm软件包，在kcloud集群中安装Helm服务。</p>
<h4 id="3-2-5-Secrets管理–Opaque"><a href="#3-2-5-Secrets管理–Opaque" class="headerlink" title="3.2.5   Secrets管理–Opaque"></a>3.2.5   Secrets管理–Opaque</h4><p>在master节点&#x2F;root目录下编写YAML文件secret.yaml，要求执行文件创建密钥。</p>
<h4 id="3-2-6-私有仓库管理"><a href="#3-2-6-私有仓库管理" class="headerlink" title="3.2.6   私有仓库管理"></a>3.2.6   私有仓库管理</h4><p>在master节点添加搭建的本地私有chart仓库源，并上传wordpress-13.0.23.tgz包至chartmuseum私有仓库中。可以使用本地仓库chart源部署应用。</p>
<h3 id="任务3-公有云运维开发（10分）-2"><a href="#任务3-公有云运维开发（10分）-2" class="headerlink" title="任务3 公有云运维开发（10分）"></a>任务3 公有云运维开发（10分）</h3><h4 id="3-3-1-开发环境搭建-2"><a href="#3-3-1-开发环境搭建-2" class="headerlink" title="3.3.1   开发环境搭建"></a>3.3.1   开发环境搭建</h4><p>创建一台云主机，并登录此云服务器，安装Python3.68运行环境与SDK依赖库。</p>
<h4 id="3-3-2-密钥对管理"><a href="#3-3-2-密钥对管理" class="headerlink" title="3.3.2   密钥对管理"></a>3.3.2   密钥对管理</h4><p>编写Python代码，实现密钥对的创建。</p>
<h4 id="3-3-4-云硬盘管理"><a href="#3-3-4-云硬盘管理" class="headerlink" title="3.3.4   云硬盘管理"></a>3.3.4   云硬盘管理</h4><p>调用SDK云硬盘管理的方法，实现云主机的的增删查改。</p>
<h4 id="3-3-4-云主机管理-1"><a href="#3-3-4-云主机管理-1" class="headerlink" title="3.3.4   云主机管理"></a>3.3.4   云主机管理</h4><p>调用SDK云主机管理的方法，实现云主机的的增删查改。</p>
<p>3.3.5   完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）</p>
<h3 id="任务4-边缘计算系统运维（10分）-2"><a href="#任务4-边缘计算系统运维（10分）-2" class="headerlink" title="任务4 边缘计算系统运维（10分）"></a>任务4 边缘计算系统运维（10分）</h3><h4 id="3-4-1-云端部署-2"><a href="#3-4-1-云端部署-2" class="headerlink" title="3.4.1   云端部署"></a>3.4.1   云端部署</h4><p>构建Kubernetes容器云平台，云端部署KubeEdge CloudCore云测模块，并启动cloudcore服务。</p>
<h4 id="3-4-2-边端部署-2"><a href="#3-4-2-边端部署-2" class="headerlink" title="3.4.2   边端部署"></a>3.4.2   边端部署</h4><p>在边侧部署KubeEdge EdgeCore边侧模块，并启动edgecore服务。</p>
<h4 id="3-4-3-边缘应用部署-2"><a href="#3-4-3-边缘应用部署-2" class="headerlink" title="3.4.3   边缘应用部署"></a>3.4.3   边缘应用部署</h4><p>通过边缘计算平台完成应用场景镜像部署与调试。（本任务只公布考试范围，不公布赛题）</p>
<h3 id="任务5-边缘计算云应用开发（5分）-2"><a href="#任务5-边缘计算云应用开发（5分）-2" class="headerlink" title="任务5 边缘计算云应用开发（5分）"></a>任务5 边缘计算云应用开发（5分）</h3><h4 id="3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）-2"><a href="#3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）-2" class="headerlink" title="3.5.1   对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）"></a>3.5.1   对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）</h4><h1 id="“云计算应用”赛项赛卷4"><a href="#“云计算应用”赛项赛卷4" class="headerlink" title="“云计算应用”赛项赛卷4"></a>“云计算应用”赛项赛卷4</h1><h2 id="模块一-私有云（30分）-3"><a href="#模块一-私有云（30分）-3" class="headerlink" title="模块一 私有云（30分）"></a>模块一 私有云（30分）</h2><p>企业首先完成私有云平台搭建和运维，私有云平台提供云主机、云网络、云存储等基础架构云服务，并开发自动化运维程序。</p>
<h3 id="任务1-私有云服务搭建（5分）-3"><a href="#任务1-私有云服务搭建（5分）-3" class="headerlink" title="任务1 私有云服务搭建（5分）"></a>任务1 私有云服务搭建（5分）</h3><h4 id="1-1-1-基础环境配置-3"><a href="#1-1-1-基础环境配置-3" class="headerlink" title="1.1.1   基础环境配置"></a>1.1.1   基础环境配置</h4><p>1.控制节点主机名为controller，设置计算节点主机名为compute；</p>
<p>2.hosts文件将IP地址映射为主机名。</p>
<h4 id="1-1-2-yum源配置-2"><a href="#1-1-2-yum源配置-2" class="headerlink" title="1.1.2   yum源配置"></a>1.1.2   yum源配置</h4><p>使用提供的http服务地址，分别设置controller节点和compute节点的yum源文件http.repo。</p>
<h4 id="1-1-3-配置无秘钥ssh-3"><a href="#1-1-3-配置无秘钥ssh-3" class="headerlink" title="1.1.3   配置无秘钥ssh"></a>1.1.3   配置无秘钥ssh</h4><p>配置controller节点可以无秘钥访问compute节点。</p>
<h4 id="1-1-4-基础安装-3"><a href="#1-1-4-基础安装-3" class="headerlink" title="1.1.4   基础安装"></a>1.1.4   基础安装</h4><p>在控制节点和计算节点上分别安装openstack-iaas软件包。</p>
<h4 id="1-1-5-数据库安装与调优-3"><a href="#1-1-5-数据库安装与调优-3" class="headerlink" title="1.1.5   数据库安装与调优"></a>1.1.5   数据库安装与调优</h4><p>在控制节点上使用安装Mariadb、RabbitMQ等服务。并进行相关操作。</p>
<h4 id="1-1-6-Keystone服务安装与使用-3"><a href="#1-1-6-Keystone服务安装与使用-3" class="headerlink" title="1.1.6   Keystone服务安装与使用"></a>1.1.6   Keystone服务安装与使用</h4><p>在控制节点上安装Keystone服务并创建用户。</p>
<h4 id="1-1-7-Glance安装与使用-3"><a href="#1-1-7-Glance安装与使用-3" class="headerlink" title="1.1.7   Glance安装与使用"></a>1.1.7   Glance安装与使用</h4><p>在控制节点上安装Glance 服务。上传镜像至平台，并设置镜像启动的要求参数。</p>
<h4 id="1-1-8-Nova安装-3"><a href="#1-1-8-Nova安装-3" class="headerlink" title="1.1.8   Nova安装"></a>1.1.8   Nova安装</h4><p>在控制节点和计算节点上分别安装Nova服务。安装完成后，完成Nova相关配置。</p>
<h4 id="1-1-9-Neutron安装-3"><a href="#1-1-9-Neutron安装-3" class="headerlink" title="1.1.9   Neutron安装"></a>1.1.9   Neutron安装</h4><p>在控制和计算节点上正确安装Neutron服务。</p>
<h4 id="1-1-10-Dashboard安装-3"><a href="#1-1-10-Dashboard安装-3" class="headerlink" title="1.1.10  Dashboard安装"></a>1.1.10  Dashboard安装</h4><p>在控制节点上安装Dashboard服务。安装完成后，将Dashboard中的 Django数据修改为存储在文件中。</p>
<h4 id="1-1-11-Swift安装-3"><a href="#1-1-11-Swift安装-3" class="headerlink" title="1.1.11  Swift安装"></a>1.1.11  Swift安装</h4><p>在控制节点和计算节点上分别安装Swift服务。安装完成后，将cirros镜像进行分片存储。</p>
<h4 id="1-1-12-Cinder创建硬盘-3"><a href="#1-1-12-Cinder创建硬盘-3" class="headerlink" title="1.1.12  Cinder创建硬盘"></a>1.1.12  Cinder创建硬盘</h4><p>在控制节点和计算节点分别安装Cinder服务，请在计算节点，对块存储进行扩容操作。</p>
<h4 id="1-1-13-Cloudkitty服务安装与使用-1"><a href="#1-1-13-Cloudkitty服务安装与使用-1" class="headerlink" title="1.1.13  Cloudkitty服务安装与使用"></a>1.1.13  Cloudkitty服务安装与使用</h4><p>在控制节点安装cloudkitty服务，安装完毕后，启用hashmap评级模块，并设置计费规则。</p>
<h3 id="任务2-私有云服务运维（15分）-3"><a href="#任务2-私有云服务运维（15分）-3" class="headerlink" title="任务2 私有云服务运维（15分）"></a>任务2 私有云服务运维（15分）</h3><h4 id="1-2-1-使用Heat模板创建用户"><a href="#1-2-1-使用Heat模板创建用户" class="headerlink" title="1.2.1   使用Heat模板创建用户"></a>1.2.1   使用Heat模板创建用户</h4><p>编写Heat模板create_user.yaml，创建名为heat-user的用户。</p>
<h4 id="1-2-2-KVM优化"><a href="#1-2-2-KVM优化" class="headerlink" title="1.2.2   KVM优化"></a>1.2.2   KVM优化</h4><p>在OpenStack平台上修改相关配置文件，启用-device virtio-net-pci in kvm。</p>
<h4 id="1-2-3-NFS对接Glance后端存储"><a href="#1-2-3-NFS对接Glance后端存储" class="headerlink" title="1.2.3   NFS对接Glance后端存储"></a>1.2.3   NFS对接Glance后端存储</h4><p>使用OpenStack私有云平台，创建一台云主机，安装NFS服务，然后对接Glance后端存储。</p>
<h4 id="1-2-4-Redis主从"><a href="#1-2-4-Redis主从" class="headerlink" title="1.2.4   Redis主从"></a>1.2.4   Redis主从</h4><p>使用赛项提供的OpenStack私有云平台，创建两台云主机，配置为redis的主从架构。</p>
<h4 id="1-2-5-Linux系统调优-脏数据回写"><a href="#1-2-5-Linux系统调优-脏数据回写" class="headerlink" title="1.2.5   Linux系统调优-脏数据回写"></a>1.2.5   Linux系统调优-脏数据回写</h4><p>修改系统配置文件，要求将回写磁盘的时间临时调整为60秒。</p>
<h4 id="1-2-6-Glance调优"><a href="#1-2-6-Glance调优" class="headerlink" title="1.2.6   Glance调优"></a>1.2.6   Glance调优</h4><p>在OpenStack平台中，修改相关配置文件，将子进程数量相应的配置修改成2。</p>
<h4 id="1-2-7-Cinder数据加密"><a href="#1-2-7-Cinder数据加密" class="headerlink" title="1.2.7   Cinder数据加密"></a>1.2.7   Cinder数据加密</h4><p>使用自行创建的OpenStack云计算平台，通过相关配置，开启Cinder块存储的数据加密功能。</p>
<h4 id="1-2-8-Linux内核优化"><a href="#1-2-8-Linux内核优化" class="headerlink" title="1.2.8   Linux内核优化"></a>1.2.8   Linux内核优化</h4><p>修改相应的配置文件，对Linux系统进行内核优化操作。</p>
<h4 id="1-2-9-JumpServer堡垒机部署-1"><a href="#1-2-9-JumpServer堡垒机部署-1" class="headerlink" title="1.2.9   JumpServer堡垒机部署"></a>1.2.9   JumpServer堡垒机部署</h4><p>使用提供的软件包安装JumpServer堡垒机服务，并配置使用该堡垒机对接自己安装的控制和计算节点。</p>
<h4 id="1-2-10-SkyWalking-应用部署"><a href="#1-2-10-SkyWalking-应用部署" class="headerlink" title="1.2.10  SkyWalking 应用部署"></a>1.2.10  SkyWalking 应用部署</h4><p>申请一台云主机，使用提供的软件包安装Elasticsearch服务和SkyWalking服务。再申请一台云主机，用于搭建gpmall商城应用，并配置SkyWalking 监控gpmall主机。</p>
<h4 id="1-2-101完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"><a href="#1-2-101完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）" class="headerlink" title="1.2.101完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"></a>1.2.101完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务3-私有云运维开发（10分）-3"><a href="#任务3-私有云运维开发（10分）-3" class="headerlink" title="任务3 私有云运维开发（10分）"></a>任务3 私有云运维开发（10分）</h3><h4 id="1-3-1-编写Shell一键部署脚本-2"><a href="#1-3-1-编写Shell一键部署脚本-2" class="headerlink" title="1.3.1   编写Shell一键部署脚本"></a>1.3.1   编写Shell一键部署脚本</h4><p>编写一键部署nfs云网盘应用系统。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zookeeper-1 ~]# cat nfs.sh </span><br><span class="line">#!/bin/bash</span><br><span class="line">mkdir -p /data/NFS</span><br><span class="line">yum install -y nfs-utils rpcbind</span><br><span class="line">cat &gt; /etc/exports &lt;&lt; EOF</span><br><span class="line">/data/NFS *(rw,async,no_root_squash)</span><br><span class="line">EOF</span><br><span class="line">systemctl restart nfs rpcbind</span><br><span class="line">systemctl enable nfs rpcbind</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2-Ansible部署MariaDB服务-1"><a href="#1-3-2-Ansible部署MariaDB服务-1" class="headerlink" title="1.3.2   Ansible部署MariaDB服务"></a>1.3.2   Ansible部署MariaDB服务</h4><p>编写Ansible脚本，部署MariaDB服务。</p>
<h4 id="1-3-3-Ansible部署zabbix服务-1"><a href="#1-3-3-Ansible部署zabbix服务-1" class="headerlink" title="1.3.3   Ansible部署zabbix服务"></a>1.3.3   Ansible部署zabbix服务</h4><p>编写Ansible脚本，部署zabbix服务。</p>
<h4 id="1-3-4-编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-2"><a href="#1-3-4-编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-2" class="headerlink" title="1.3.4   编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"></a>1.3.4   编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）</h4><h2 id="模块二-容器云（30分）-3"><a href="#模块二-容器云（30分）-3" class="headerlink" title="模块二 容器云（30分）"></a>模块二 容器云（30分）</h2><p>企业构建Kubernetes容器云集群，引入KubeVirt实现OpenStack到Kubernetes的全面转型，用Kubernetes来管一切虚拟化运行时，包含裸金属、VM、容器。同时研发团队决定搭建基于Kubernetes 的CI&#x2F;CD环境，基于这个平台来实现DevOps流程。引入服务网格Istio，实现业务系统的灰度发布，治理和优化公司各种微服务，并开发自动化运维程序。</p>
<h3 id="任务1-容器云服务搭建（5分）-3"><a href="#任务1-容器云服务搭建（5分）-3" class="headerlink" title="任务1 容器云服务搭建（5分）"></a>任务1 容器云服务搭建（5分）</h3><h4 id="2-1-1-部署容器云平台-3"><a href="#2-1-1-部署容器云平台-3" class="headerlink" title="2.1.1   部署容器云平台"></a>2.1.1   部署容器云平台</h4><p>使用OpenStack私有云平台创建两台云主机，分别作为Kubernetes集群的master节点和node节点，然后完成Kubernetes集群的部署，并完成Istio服务网格、KubeVirt虚拟化和Harbor镜像仓库的部署。</p>
<h3 id="任务2-容器云服务运维（15分）-3"><a href="#任务2-容器云服务运维（15分）-3" class="headerlink" title="任务2 容器云服务运维（15分）"></a>任务2 容器云服务运维（15分）</h3><h4 id="2-2-1-容器化部署Node-Exporter-1"><a href="#2-2-1-容器化部署Node-Exporter-1" class="headerlink" title="2.2.1   容器化部署Node-Exporter"></a>2.2.1   容器化部署Node-Exporter</h4><p>编写Dockerfile文件构建exporter镜像，要求基于centos完成Node-Exporter服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-2-容器化部署Alertmanager-1"><a href="#2-2-2-容器化部署Alertmanager-1" class="headerlink" title="2.2.2   容器化部署Alertmanager"></a>2.2.2   容器化部署Alertmanager</h4><p>编写Dockerfile文件构建alert镜像，要求基于centos：latest完成Alertmanager服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-3-容器化部署Grafana-1"><a href="#2-2-3-容器化部署Grafana-1" class="headerlink" title="2.2.3   容器化部署Grafana"></a>2.2.3   容器化部署Grafana</h4><p>编写Dockerfile文件构建grafana镜像，要求基于centos完成Grafana服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-4-容器化部署Prometheus-1"><a href="#2-2-4-容器化部署Prometheus-1" class="headerlink" title="2.2.4   容器化部署Prometheus"></a>2.2.4   容器化部署Prometheus</h4><p>编写Dockerfile文件构建prometheus镜像，要求基于centos完成Promethues服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-5-编排部署监控系统-1"><a href="#2-2-5-编排部署监控系统-1" class="headerlink" title="2.2.5   编排部署监控系统"></a>2.2.5   编排部署监控系统</h4><p>编写docker-compose.yaml文件，使用镜像exporter、alert、grafana和prometheus完成监控系统的编排部署。</p>
<h4 id="2-2-6-部署GitLab-1"><a href="#2-2-6-部署GitLab-1" class="headerlink" title="2.2.6   部署GitLab"></a>2.2.6   部署GitLab</h4><p>新建命名空间devops，使用Deployment将GitLab部署到该命名空间下，并完成GitLab服务的初始化配置。</p>
<h4 id="2-2-7-配置GitLab-1"><a href="#2-2-7-配置GitLab-1" class="headerlink" title="2.2.7   配置GitLab"></a>2.2.7   配置GitLab</h4><p>在GitLab中创建一个名为drone的GitLab OAuth应用程序，创建一个新项目，并将提供的项目包导入到该项目中。</p>
<h4 id="2-2-8-部署Drone-1"><a href="#2-2-8-部署Drone-1" class="headerlink" title="2.2.8   部署Drone"></a>2.2.8   部署Drone</h4><p>使用Deployment将Drone服务部署到devops命名空间下，并使用Service暴露服务。</p>
<h4 id="2-2-9-构建CI-x2F-CD-3"><a href="#2-2-9-构建CI-x2F-CD-3" class="headerlink" title="2.2.9   构建CI&#x2F;CD"></a>2.2.9   构建CI&#x2F;CD</h4><p>编写流水线脚本，触发流水线自动构建，完成流水线的构建，构建成功后访问自动发布的服务。 </p>
<h4 id="2-2-10-服务网格：创建VirtualService-1"><a href="#2-2-10-服务网格：创建VirtualService-1" class="headerlink" title="2.2.10  服务网格：创建VirtualService"></a>2.2.10  服务网格：创建VirtualService</h4><p>将Bookinfo应用部署到default命名空间下，为Bookinfo应用创建一个名为reviews的VirtualService，要求来自指定用户的所有流量将被路由到reviews服务的v2版本。</p>
<h4 id="2-2-11-KubeVirt运维：快照管理"><a href="#2-2-11-KubeVirt运维：快照管理" class="headerlink" title="2.2.11  KubeVirt运维：快照管理"></a>2.2.11  KubeVirt运维：快照管理</h4><p>使用提供的镜像在default命名空间下创建一台VM，名称为exam，指定VM的配置信息，并为VM创建名为exam的快照。</p>
<h4 id="2-12-完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"><a href="#2-12-完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）" class="headerlink" title="2.12   完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"></a>2.12   完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务3-容器云运维开发（10分）-3"><a href="#任务3-容器云运维开发（10分）-3" class="headerlink" title="任务3 容器云运维开发（10分）"></a>任务3 容器云运维开发（10分）</h3><h4 id="2-3-1-管理service资源"><a href="#2-3-1-管理service资源" class="headerlink" title="2.3.1   管理service资源"></a>2.3.1   管理service资源</h4><p>Kubernetes Python运维脚本开发，使用Restful APIs方式管理service服务。</p>
<h4 id="2-3-2-管理Pod资源"><a href="#2-3-2-管理Pod资源" class="headerlink" title="2.3.2   管理Pod资源"></a>2.3.2   管理Pod资源</h4><p>Kubernetes Python运维脚本开发，使用SDK方式管理Pod服务。</p>
<h4 id="2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-3"><a href="#2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-3" class="headerlink" title="2.3.3   编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"></a>2.3.3   编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）</h4><h2 id="模块三-公有云（40分）-3"><a href="#模块三-公有云（40分）-3" class="headerlink" title="模块三 公有云（40分）"></a>模块三 公有云（40分）</h2><p>企业选择国内公有云提供商，选择云主机、云网络、云硬盘、云防火墙、负载均衡等服务，可创建Web服务，共享文件存储服务，数据库服务，数据库集群等服务。搭建基于云原生的DevOps相关服务，构建云、边、端一体化的边缘计算系统，并开发云应用程序。</p>
<p>根据上述公有云平台的特性，完成公有云中的各项运维工作。</p>
<h3 id="任务1-公有云服务搭建（5分）-3"><a href="#任务1-公有云服务搭建（5分）-3" class="headerlink" title="任务1 公有云服务搭建（5分）"></a>任务1 公有云服务搭建（5分）</h3><h4 id="3-1-1-私有网络管理-3"><a href="#3-1-1-私有网络管理-3" class="headerlink" title="3.1.1   私有网络管理"></a>3.1.1   私有网络管理</h4><p>在公有云中完成虚拟私有云网络的创建。</p>
<h4 id="3-1-2-云实例管理-3"><a href="#3-1-2-云实例管理-3" class="headerlink" title="3.1.2   云实例管理"></a>3.1.2   云实例管理</h4><p>登录公有云平台，创建两台云实例虚拟机。</p>
<h4 id="3-1-3-管理数据库-3"><a href="#3-1-3-管理数据库-3" class="headerlink" title="3.1.3   管理数据库"></a>3.1.3   管理数据库</h4><p>使用intnetX-mysql网络创建两台chinaskill-sql-1和chinaskill-sql-2云服务器，并完成MongoDB安装。</p>
<h4 id="3-1-4-主从数据库-3"><a href="#3-1-4-主从数据库-3" class="headerlink" title="3.1.4   主从数据库"></a>3.1.4   主从数据库</h4><p>在chinaskill-sql-1和chinaskill-sql-2云服务器中配置MongoDB主从数据库。</p>
<h4 id="3-1-5-node环境管理-3"><a href="#3-1-5-node环境管理-3" class="headerlink" title="3.1.5   node环境管理"></a>3.1.5   node环境管理</h4><p>使用提供的压缩文件，安装Node.js环境。</p>
<h4 id="3-1-6-安全组管理-3"><a href="#3-1-6-安全组管理-3" class="headerlink" title="3.1.6   安全组管理"></a>3.1.6   安全组管理</h4><p>根据要求，创建一个安全组。</p>
<h4 id="3-1-7-RocketChat上云-3"><a href="#3-1-7-RocketChat上云-3" class="headerlink" title="3.1.7   RocketChat上云"></a>3.1.7   RocketChat上云</h4><p>使用http服务器提供文件，将Rocket.Chat应用部署上云。</p>
<h4 id="3-1-8-NAT网关-3"><a href="#3-1-8-NAT网关-3" class="headerlink" title="3.1.8   NAT网关"></a>3.1.8   NAT网关</h4><p>根据要求创建一个公网NAT网关。</p>
<h4 id="3-1-9-云服务器备份-2"><a href="#3-1-9-云服务器备份-2" class="headerlink" title="3.1.9   云服务器备份"></a>3.1.9   云服务器备份</h4><p>创建一个云服务器备份存储库名为server_backup，容量为100G。将ChinaSkill-node-1云服务器制作镜像文件chinaskill-image。</p>
<h4 id="3-1-10-负载均衡器-3"><a href="#3-1-10-负载均衡器-3" class="headerlink" title="3.1.10  负载均衡器"></a>3.1.10  负载均衡器</h4><p>根据要求创建一个负载均衡器chinaskill-elb。</p>
<h4 id="3-1-11-弹性伸缩管理-3"><a href="#3-1-11-弹性伸缩管理-3" class="headerlink" title="3.1.11  弹性伸缩管理"></a>3.1.11  弹性伸缩管理</h4><p>根据要求新建一个弹性伸缩启动配置。</p>
<h3 id="任务2-公有云服务运维（10分）-3"><a href="#任务2-公有云服务运维（10分）-3" class="headerlink" title="任务2 公有云服务运维（10分）"></a>任务2 公有云服务运维（10分）</h3><h4 id="3-2-1-云容器引擎-3"><a href="#3-2-1-云容器引擎-3" class="headerlink" title="3.2.1   云容器引擎"></a>3.2.1   云容器引擎</h4><p>在公有云上，按照要求创建一个x86架构的容器云集群。</p>
<h4 id="3-2-2-云容器管理-3"><a href="#3-2-2-云容器管理-3" class="headerlink" title="3.2.2   云容器管理"></a>3.2.2   云容器管理</h4><p>使用插件管理在kcloud容器集群中安装Dashboard可视化监控界面。</p>
<h4 id="3-2-3-使用kubectl操作集群-3"><a href="#3-2-3-使用kubectl操作集群-3" class="headerlink" title="3.2.3   使用kubectl操作集群"></a>3.2.3   使用kubectl操作集群</h4><p>在kcloud集群中安装kubectl命令，使用kubectl命令管理kcloud集群。</p>
<h4 id="3-2-4-Secrets管理–Opaque"><a href="#3-2-4-Secrets管理–Opaque" class="headerlink" title="3.2.4   Secrets管理–Opaque"></a>3.2.4   Secrets管理–Opaque</h4><p>在master节点&#x2F;root目录下编写YAML文件secret.yaml，要求执行文件创建密钥。</p>
<h4 id="3-2-5-公有云安全：入侵检测系统"><a href="#3-2-5-公有云安全：入侵检测系统" class="headerlink" title="3.2.5   公有云安全：入侵检测系统"></a>3.2.5   公有云安全：入侵检测系统</h4><p>使用提供的makechk.tar.gz包安装chkrootkit入侵检测工具，安装完毕后使用chkrootkit工具扫描系。</p>
<h4 id="3-2-6-公有云安全：日志分析服务"><a href="#3-2-6-公有云安全：日志分析服务" class="headerlink" title="3.2.6   公有云安全：日志分析服务"></a>3.2.6   公有云安全：日志分析服务</h4><p>然后使用提供的sepb_elk_latest.tar镜像安装ELK服务。</p>
<h3 id="任务3-公有云运维开发（10分）-3"><a href="#任务3-公有云运维开发（10分）-3" class="headerlink" title="任务3 公有云运维开发（10分）"></a>任务3 公有云运维开发（10分）</h3><h4 id="3-3-1-开发环境搭建-3"><a href="#3-3-1-开发环境搭建-3" class="headerlink" title="3.3.1   开发环境搭建"></a>3.3.1   开发环境搭建</h4><p>创建一台云主机，并登录此云服务器，安装Python3.68运行环境与SDK依赖库。</p>
<h4 id="3-3-2-云数据库管理：调用SDK云数据库管理的方法，实现云数据库的增删查改。"><a href="#3-3-2-云数据库管理：调用SDK云数据库管理的方法，实现云数据库的增删查改。" class="headerlink" title="3.3.2   云数据库管理：调用SDK云数据库管理的方法，实现云数据库的增删查改。"></a>3.3.2   云数据库管理：调用SDK云数据库管理的方法，实现云数据库的增删查改。</h4><h4 id="3-3-3-容器集群管理：调用SDK容器集群方法，实现容器集群增、删查、改。"><a href="#3-3-3-容器集群管理：调用SDK容器集群方法，实现容器集群增、删查、改。" class="headerlink" title="3.3.3   容器集群管理：调用SDK容器集群方法，实现容器集群增、删查、改。"></a>3.3.3   容器集群管理：调用SDK容器集群方法，实现容器集群增、删查、改。</h4><h4 id="3-3-4-弹性伸缩组管理"><a href="#3-3-4-弹性伸缩组管理" class="headerlink" title="3.3.4   弹性伸缩组管理"></a>3.3.4   弹性伸缩组管理</h4><p>编写Python代码，调用弹性伸缩组API，创建弹性伸缩组。</p>
<h4 id="3-3-5-完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）-2"><a href="#3-3-5-完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）-2" class="headerlink" title="3.3.5   完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）"></a>3.3.5   完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务4-边缘计算系统运维（10分）-3"><a href="#任务4-边缘计算系统运维（10分）-3" class="headerlink" title="任务4 边缘计算系统运维（10分）"></a>任务4 边缘计算系统运维（10分）</h3><h4 id="3-4-1-云端部署-3"><a href="#3-4-1-云端部署-3" class="headerlink" title="3.4.1   云端部署"></a>3.4.1   云端部署</h4><p>构建Kubernetes容器云平台，云端部署KubeEdge CloudCore云测模块，并启动cloudcore服务。</p>
<h4 id="3-4-2-边端部署-3"><a href="#3-4-2-边端部署-3" class="headerlink" title="3.4.2   边端部署"></a>3.4.2   边端部署</h4><p>在边侧部署KubeEdge EdgeCore边侧模块，并启动edgecore服务。</p>
<h4 id="3-4-3-边缘应用部署-3"><a href="#3-4-3-边缘应用部署-3" class="headerlink" title="3.4.3   边缘应用部署"></a>3.4.3   边缘应用部署</h4><p>通过边缘计算平台完成应用场景镜像部署与调试。（本任务只公布考试范围，不公布赛题）</p>
<h3 id="任务5-边缘计算云应用开发（5分）-3"><a href="#任务5-边缘计算云应用开发（5分）-3" class="headerlink" title="任务5 边缘计算云应用开发（5分）"></a>任务5 边缘计算云应用开发（5分）</h3><h4 id="3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）-3"><a href="#3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）-3" class="headerlink" title="3.5.1   对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）"></a>3.5.1   对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）</h4><h1 id="“云计算应用”赛项赛卷5"><a href="#“云计算应用”赛项赛卷5" class="headerlink" title="“云计算应用”赛项赛卷5"></a>“云计算应用”赛项赛卷5</h1><h2 id="模块一-私有云（30分）-4"><a href="#模块一-私有云（30分）-4" class="headerlink" title="模块一 私有云（30分）"></a>模块一 私有云（30分）</h2><p>企业首先完成私有云平台搭建和运维，私有云平台提供云主机、云网络、云存储等基础架构云服务，并开发自动化运维程序。</p>
<h3 id="任务1-私有云服务搭建（5分）-4"><a href="#任务1-私有云服务搭建（5分）-4" class="headerlink" title="任务1 私有云服务搭建（5分）"></a>任务1 私有云服务搭建（5分）</h3><h4 id="1-1-1-基础环境配置-4"><a href="#1-1-1-基础环境配置-4" class="headerlink" title="1.1.1   基础环境配置"></a>1.1.1   基础环境配置</h4><p>1.控制节点主机名为controller，设置计算节点主机名为compute；</p>
<p>2.hosts文件将IP地址映射为主机名。</p>
<h4 id="1-1-2-yum源配置-3"><a href="#1-1-2-yum源配置-3" class="headerlink" title="1.1.2   yum源配置"></a>1.1.2   yum源配置</h4><p>使用提供的http服务地址，分别设置controller节点和compute节点的yum源文件http.repo。</p>
<h4 id="1-1-3-配置无秘钥ssh-4"><a href="#1-1-3-配置无秘钥ssh-4" class="headerlink" title="1.1.3   配置无秘钥ssh"></a>1.1.3   配置无秘钥ssh</h4><p>配置controller节点可以无秘钥访问compute节点。</p>
<h4 id="1-1-4-基础安装-4"><a href="#1-1-4-基础安装-4" class="headerlink" title="1.1.4   基础安装"></a>1.1.4   基础安装</h4><p>在控制节点和计算节点上分别安装openstack-iaas软件包。</p>
<h4 id="1-1-5-数据库安装与调优-4"><a href="#1-1-5-数据库安装与调优-4" class="headerlink" title="1.1.5   数据库安装与调优"></a>1.1.5   数据库安装与调优</h4><p>在控制节点上使用安装Mariadb、RabbitMQ等服务。并进行相关操作。</p>
<h4 id="1-1-6-Keystone服务安装与使用-4"><a href="#1-1-6-Keystone服务安装与使用-4" class="headerlink" title="1.1.6   Keystone服务安装与使用"></a>1.1.6   Keystone服务安装与使用</h4><p>在控制节点上安装Keystone服务并创建用户。</p>
<h4 id="1-1-7-Glance安装与使用-4"><a href="#1-1-7-Glance安装与使用-4" class="headerlink" title="1.1.7   Glance安装与使用"></a>1.1.7   Glance安装与使用</h4><p>在控制节点上安装Glance 服务。上传镜像至平台，并设置镜像启动的要求参数。</p>
<h4 id="1-1-8-Nova安装-4"><a href="#1-1-8-Nova安装-4" class="headerlink" title="1.1.8   Nova安装"></a>1.1.8   Nova安装</h4><p>在控制节点和计算节点上分别安装Nova服务。安装完成后，完成Nova相关配置。</p>
<h4 id="1-1-9-Neutron安装-4"><a href="#1-1-9-Neutron安装-4" class="headerlink" title="1.1.9   Neutron安装"></a>1.1.9   Neutron安装</h4><p>在控制和计算节点上正确安装Neutron服务。</p>
<h4 id="1-1-10-Dashboard安装-4"><a href="#1-1-10-Dashboard安装-4" class="headerlink" title="1.1.10  Dashboard安装"></a>1.1.10  Dashboard安装</h4><p>在控制节点上安装Dashboard服务。安装完成后，将Dashboard中的 Django数据修改为存储在文件中。</p>
<h4 id="1-1-11-Swift安装-4"><a href="#1-1-11-Swift安装-4" class="headerlink" title="1.1.11  Swift安装"></a>1.1.11  Swift安装</h4><p>在控制节点和计算节点上分别安装Swift服务。安装完成后，将cirros镜像进行分片存储。</p>
<h4 id="1-1-12-Cinder创建硬盘-4"><a href="#1-1-12-Cinder创建硬盘-4" class="headerlink" title="1.1.12  Cinder创建硬盘"></a>1.1.12  Cinder创建硬盘</h4><p>在控制节点和计算节点分别安装Cinder服务，请在计算节点，对块存储进行扩容操作。</p>
<h4 id="1-1-13-Manila服务安装与使用-1"><a href="#1-1-13-Manila服务安装与使用-1" class="headerlink" title="1.1.13  Manila服务安装与使用"></a>1.1.13  Manila服务安装与使用</h4><p>在控制和计算节点上分别在控制节点和计算节点安装Manila服务。</p>
<h3 id="任务2-私有云服务运维（15分）-4"><a href="#任务2-私有云服务运维（15分）-4" class="headerlink" title="任务2 私有云服务运维（15分）"></a>任务2 私有云服务运维（15分）</h3><h4 id="1-2-1-Keystone优化-优化token失效时间"><a href="#1-2-1-Keystone优化-优化token失效时间" class="headerlink" title="1.2.1   Keystone优化-优化token失效时间"></a>1.2.1   Keystone优化-优化token失效时间</h4><p>请修改相关配置，将Keystone的失效列表缓存时间增加到原来的两倍。</p>
<h4 id="1-2-2-OpenStack消息队列调优"><a href="#1-2-2-OpenStack消息队列调优" class="headerlink" title="1.2.2   OpenStack消息队列调优"></a>1.2.2   OpenStack消息队列调优</h4><p>在OpenStack私有云平台，分别通过用户级别、系统级别、配置文件来设置RabbitMQ服务的最大连接数为10240。</p>
<h4 id="1-2-3-Raid磁盘阵列管理-1"><a href="#1-2-3-Raid磁盘阵列管理-1" class="headerlink" title="1.2.3   Raid磁盘阵列管理"></a>1.2.3   Raid磁盘阵列管理</h4><p>在云主机上对云硬盘进行操作，先进行分区，然后创建名为&#x2F;dev&#x2F;md5、raid级别为5的磁盘阵列加一个热备盘。</p>
<h4 id="1-2-4-虚拟机调整flavor"><a href="#1-2-4-虚拟机调整flavor" class="headerlink" title="1.2.4   虚拟机调整flavor"></a>1.2.4   虚拟机调整flavor</h4><p>使用OpenStack私有云平台，请修改相应配置，实现云主机调整实例大小可以使用。</p>
<h4 id="1-2-5-OpenStack镜像压缩"><a href="#1-2-5-OpenStack镜像压缩" class="headerlink" title="1.2.5   OpenStack镜像压缩"></a>1.2.5   OpenStack镜像压缩</h4><p>在HTTP文件服务器中存在一个镜像为CentOS7.5-compress.qcow2的镜像，请对该镜像进行压缩操作。</p>
<h4 id="1-2-6-Ceph部署"><a href="#1-2-6-Ceph部署" class="headerlink" title="1.2.6   Ceph部署"></a>1.2.6   Ceph部署</h4><p>使用提供的ceph.tar.gz软件包，安装ceph服务并完成初始化操作。</p>
<h4 id="1-2-7-使用Heat模板创建网络-1"><a href="#1-2-7-使用Heat模板创建网络-1" class="headerlink" title="1.2.7   使用Heat模板创建网络"></a>1.2.7   使用Heat模板创建网络</h4><p>在自行搭建的OpenStack私有云平台上，编写Heat模板文件，完成网络的创建。</p>
<h4 id="1-2-8-Glance调优"><a href="#1-2-8-Glance调优" class="headerlink" title="1.2.8   Glance调优"></a>1.2.8   Glance调优</h4><p>在OpenStack平台中，修改相关配置文件，将子进程数量相应的配置修改成2。</p>
<h4 id="1-2-9-Nova资源优化"><a href="#1-2-9-Nova资源优化" class="headerlink" title="1.2.9   Nova资源优化"></a>1.2.9   Nova资源优化</h4><p>编辑nova.conf文件，将内存预留量配置为4GB。</p>
<h4 id="1-2-10-Nova安装与优化-优化数据库连接"><a href="#1-2-10-Nova安装与优化-优化数据库连接" class="headerlink" title="1.2.10  Nova安装与优化-优化数据库连接"></a>1.2.10  Nova安装与优化-优化数据库连接</h4><p>修改nova相关配置文件，修改连接池大小和最大允许超出的连接数为10。</p>
<h4 id="1-2-11-完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-2"><a href="#1-2-11-完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-2" class="headerlink" title="1.2.11  完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"></a>1.2.11  完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务3-私有云运维开发（10分）-4"><a href="#任务3-私有云运维开发（10分）-4" class="headerlink" title="任务3 私有云运维开发（10分）"></a>任务3 私有云运维开发（10分）</h3><h4 id="1-3-1-编写Shell一键部署脚本-3"><a href="#1-3-1-编写Shell一键部署脚本-3" class="headerlink" title="1.3.1   编写Shell一键部署脚本"></a>1.3.1   编写Shell一键部署脚本</h4><p>编写一键部署nfs云网盘应用系统。</p>
<h4 id="1-3-2-Ansible部署MariaDB服务-2"><a href="#1-3-2-Ansible部署MariaDB服务-2" class="headerlink" title="1.3.2   Ansible部署MariaDB服务"></a>1.3.2   Ansible部署MariaDB服务</h4><p>编写Ansible脚本，部署MariaDB服务。</p>
<h4 id="1-3-3-Ansible部署zabbix服务-2"><a href="#1-3-3-Ansible部署zabbix服务-2" class="headerlink" title="1.3.3   Ansible部署zabbix服务"></a>1.3.3   Ansible部署zabbix服务</h4><p>编写Ansible脚本，部署zabbix服务。</p>
<h4 id="1-3-4-编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-3"><a href="#1-3-4-编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-3" class="headerlink" title="1.3.4   编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"></a>1.3.4   编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）</h4><h2 id="模块二-容器云（30分）-4"><a href="#模块二-容器云（30分）-4" class="headerlink" title="模块二 容器云（30分）"></a>模块二 容器云（30分）</h2><p>企业构建Kubernetes容器云集群，引入KubeVirt实现OpenStack到Kubernetes的全面转型，用Kubernetes来管一切虚拟化运行时，包含裸金属、VM、容器。同时研发团队决定搭建基于Kubernetes 的CI&#x2F;CD环境，基于这个平台来实现DevOps流程。引入服务网格Istio，实现业务系统的灰度发布，治理和优化公司各种微服务，并开发自动化运维程序。</p>
<h3 id="任务1-容器云服务搭建（5分）-4"><a href="#任务1-容器云服务搭建（5分）-4" class="headerlink" title="任务1 容器云服务搭建（5分）"></a>任务1 容器云服务搭建（5分）</h3><h4 id="2-1-1-部署容器云平台-4"><a href="#2-1-1-部署容器云平台-4" class="headerlink" title="2.1.1   部署容器云平台"></a>2.1.1   部署容器云平台</h4><p>使用OpenStack私有云平台创建两台云主机，分别作为Kubernetes集群的master节点和node节点，然后完成Kubernetes集群的部署，并完成Istio服务网格、KubeVirt虚拟化和Harbor镜像仓库的部署。</p>
<h3 id="任务2-容器云服务运维（15分）-4"><a href="#任务2-容器云服务运维（15分）-4" class="headerlink" title="任务2 容器云服务运维（15分）"></a>任务2 容器云服务运维（15分）</h3><h4 id="2-2-1-容器化部署MariaDB"><a href="#2-2-1-容器化部署MariaDB" class="headerlink" title="2.2.1   容器化部署MariaDB"></a>2.2.1   容器化部署MariaDB</h4><p>编写Dockerfile文件构建mysql镜像，要求基于centos完成MariaDB数据库的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-2-容器化部署Redis-1"><a href="#2-2-2-容器化部署Redis-1" class="headerlink" title="2.2.2   容器化部署Redis"></a>2.2.2   容器化部署Redis</h4><p>编写Dockerfile文件构建redis镜像，要求基于centos完成Redis服务的安装和配置，并设置服务开机自启。</p>
<h4 id="2-2-3-容器化部署Nginx"><a href="#2-2-3-容器化部署Nginx" class="headerlink" title="2.2.3   容器化部署Nginx"></a>2.2.3   容器化部署Nginx</h4><p>编写Dockerfile文件构建nginx镜像，要求基于centos完成Nginx服务的安装和配置，并设置服务开机自启。</p>
<h4 id="2-2-4-容器化部署Explorer"><a href="#2-2-4-容器化部署Explorer" class="headerlink" title="2.2.4   容器化部署Explorer"></a>2.2.4   容器化部署Explorer</h4><p>编写Dockerfile文件构建explorer镜像，要求基于centos完成PHP和HTTP环境的安装和配置，并设置服务开机自启。</p>
<h4 id="2-2-5-编排部署Explorer管理系统"><a href="#2-2-5-编排部署Explorer管理系统" class="headerlink" title="2.2.5   编排部署Explorer管理系统"></a>2.2.5   编排部署Explorer管理系统</h4><p>编写docker-compose.yaml文件，要求使用镜像mysql、redis、nginx和explorer完成Explorer管理系统的编排部署。</p>
<h4 id="2-2-6-安装GitLab环境-1"><a href="#2-2-6-安装GitLab环境-1" class="headerlink" title="2.2.6   安装GitLab环境"></a>2.2.6   安装GitLab环境</h4><p>新建命名空间kube-ops，将GitLab部署到该命名空间下，然后完成GitLab服务的配置。</p>
<h4 id="2-2-7-部署GitLab-Runner-1"><a href="#2-2-7-部署GitLab-Runner-1" class="headerlink" title="2.2.7   部署GitLab Runner"></a>2.2.7   部署GitLab Runner</h4><p>将GitLab Runner部署到kube-ops命名空间下，并完成GitLab Runner在GitLab中的注册。</p>
<h4 id="2-2-8-配置GitLab-1"><a href="#2-2-8-配置GitLab-1" class="headerlink" title="2.2.8   配置GitLab"></a>2.2.8   配置GitLab</h4><p>在GitLab中新建公开项目并导入离线项目包，然后将Kubernetes集群添加到GitLab中。</p>
<h4 id="2-2-9-构建CI-x2F-CD-4"><a href="#2-2-9-构建CI-x2F-CD-4" class="headerlink" title="2.2.9   构建CI&#x2F;CD"></a>2.2.9   构建CI&#x2F;CD</h4><p>在项目中编写流水线脚本，然后触发自动构建，要求完成构建代码、构建镜像、推送镜像Harbor、并发布服务到Kubernetes集群。</p>
<h4 id="2-2-10-服务网格：路由管理"><a href="#2-2-10-服务网格：路由管理" class="headerlink" title="2.2.10  服务网格：路由管理"></a>2.2.10  服务网格：路由管理</h4><p>将Bookinfo应用部署到default命名空间下，应用默认请求路由，将所有流量路由到各个微服务的v1版本。然后更改请求路由reviews，将指定比例的流量从reviews的v1转移到v3。</p>
<h4 id="2-2-11-KubeVirt运维：VMI管理"><a href="#2-2-11-KubeVirt运维：VMI管理" class="headerlink" title="2.2.11  KubeVirt运维：VMI管理"></a>2.2.11  KubeVirt运维：VMI管理</h4><p>将提供的镜像在default命名空间下创建一台VMI，名称为exam，使用Service对外暴露VMI。</p>
<h4 id="2-2-12-完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-2"><a href="#2-2-12-完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-2" class="headerlink" title="2.2.12  完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"></a>2.2.12  完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务3-容器云运维开发（10分）-4"><a href="#任务3-容器云运维开发（10分）-4" class="headerlink" title="任务3 容器云运维开发（10分）"></a>任务3 容器云运维开发（10分）</h3><h4 id="2-3-2-管理Deployment资源"><a href="#2-3-2-管理Deployment资源" class="headerlink" title="2.3.2   管理Deployment资源"></a>2.3.2   管理Deployment资源</h4><p>Kubernetes Python运维脚本开发，使用SDK方式管理Deployment服务。</p>
<h4 id="2-3-1-管理service资源-1"><a href="#2-3-1-管理service资源-1" class="headerlink" title="2.3.1   管理service资源"></a>2.3.1   管理service资源</h4><p>Kubernetes Python运维脚本开发，使用Restful APIs方式管理service服务。</p>
<h4 id="2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-4"><a href="#2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-4" class="headerlink" title="2.3.3   编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"></a>2.3.3   编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）</h4><h2 id="模块三-公有云（40分）-4"><a href="#模块三-公有云（40分）-4" class="headerlink" title="模块三 公有云（40分）"></a>模块三 公有云（40分）</h2><p>企业选择国内公有云提供商，选择云主机、云网络、云硬盘、云防火墙、负载均衡等服务，可创建Web服务，共享文件存储服务，数据库服务，数据库集群等服务。搭建基于云原生的DevOps相关服务，构建云、边、端一体化的边缘计算系统，并开发云应用程序。</p>
<p>根据上述公有云平台的特性，完成公有云中的各项运维工作。</p>
<h3 id="任务1-公有云服务搭建（5分）-4"><a href="#任务1-公有云服务搭建（5分）-4" class="headerlink" title="任务1 公有云服务搭建（5分）"></a>任务1 公有云服务搭建（5分）</h3><h4 id="3-1-1-私有网络管理-4"><a href="#3-1-1-私有网络管理-4" class="headerlink" title="3.1.1   私有网络管理"></a>3.1.1   私有网络管理</h4><p>在公有云中完成虚拟私有云网络的创建。</p>
<h4 id="3-1-2-云实例管理-4"><a href="#3-1-2-云实例管理-4" class="headerlink" title="3.1.2   云实例管理"></a>3.1.2   云实例管理</h4><p>登录公有云平台，创建两台云实例虚拟机。</p>
<h4 id="3-1-3-管理数据库-4"><a href="#3-1-3-管理数据库-4" class="headerlink" title="3.1.3   管理数据库"></a>3.1.3   管理数据库</h4><p>使用intnetX-mysql网络创建两台chinaskill-sql-1和chinaskill-sql-2云服务器，并完成MongoDB安装。</p>
<h4 id="3-1-4-主从数据库-4"><a href="#3-1-4-主从数据库-4" class="headerlink" title="3.1.4   主从数据库"></a>3.1.4   主从数据库</h4><p>在chinaskill-sql-1和chinaskill-sql-2云服务器中配置MongoDB主从数据库。</p>
<h4 id="3-1-5-node环境管理-4"><a href="#3-1-5-node环境管理-4" class="headerlink" title="3.1.5   node环境管理"></a>3.1.5   node环境管理</h4><p>使用提供的压缩文件，安装Node.js环境。</p>
<h4 id="3-1-6-安全组管理-4"><a href="#3-1-6-安全组管理-4" class="headerlink" title="3.1.6   安全组管理"></a>3.1.6   安全组管理</h4><p>根据要求，创建一个安全组。</p>
<h4 id="3-1-7-RocketChat上云-4"><a href="#3-1-7-RocketChat上云-4" class="headerlink" title="3.1.7   RocketChat上云"></a>3.1.7   RocketChat上云</h4><p>使用http服务器提供文件，将Rocket.Chat应用部署上云。</p>
<h4 id="3-1-8-NAT网关-4"><a href="#3-1-8-NAT网关-4" class="headerlink" title="3.1.8   NAT网关"></a>3.1.8   NAT网关</h4><p>根据要求创建一个公网NAT网关。</p>
<h4 id="3-1-9-云服务器备份-3"><a href="#3-1-9-云服务器备份-3" class="headerlink" title="3.1.9   云服务器备份"></a>3.1.9   云服务器备份</h4><p>创建一个云服务器备份存储库名为server_backup，容量为100G。将ChinaSkill-node-1云服务器制作镜像文件chinaskill-image。</p>
<h3 id="任务2-公有云服务运维（10分）-4"><a href="#任务2-公有云服务运维（10分）-4" class="headerlink" title="任务2 公有云服务运维（10分）"></a>任务2 公有云服务运维（10分）</h3><h4 id="3-2-1-云容器引擎-4"><a href="#3-2-1-云容器引擎-4" class="headerlink" title="3.2.1   云容器引擎"></a>3.2.1   云容器引擎</h4><p>在公有云上，按照要求创建一个x86架构的容器云集群。</p>
<h4 id="3-2-2-云容器管理-4"><a href="#3-2-2-云容器管理-4" class="headerlink" title="3.2.2   云容器管理"></a>3.2.2   云容器管理</h4><p>使用插件管理在kcloud容器集群中安装Dashboard可视化监控界面。</p>
<h4 id="3-2-3-使用kubectl操作集群-4"><a href="#3-2-3-使用kubectl操作集群-4" class="headerlink" title="3.2.3   使用kubectl操作集群"></a>3.2.3   使用kubectl操作集群</h4><p>在kcloud集群中安装kubectl命令，使用kubectl命令管理kcloud集群。</p>
<h4 id="3-2-4-安装Helm-2"><a href="#3-2-4-安装Helm-2" class="headerlink" title="3.2.4   安装Helm"></a>3.2.4   安装Helm</h4><p>使用提供的Helm软件包，在kcloud集群中安装Helm服务。</p>
<h4 id="3-2-5-WordPress应用部署"><a href="#3-2-5-WordPress应用部署" class="headerlink" title="3.2.5   WordPress应用部署"></a>3.2.5   WordPress应用部署</h4><p>根据提供的chart包wordpress-13.0.23.tgz部署WordPress服务。</p>
<h4 id="3-2-6-ChartMuseum仓库部署"><a href="#3-2-6-ChartMuseum仓库部署" class="headerlink" title="3.2.6   ChartMuseum仓库部署"></a>3.2.6   ChartMuseum仓库部署</h4><p>在k8s集群中创建chartmuseum命名空间，编写yaml文件在chartmuseum命名空间中使用chartmuseum:latest镜像创建本地私有chart仓库。</p>
<h3 id="任务3-公有云运维开发（10分）-4"><a href="#任务3-公有云运维开发（10分）-4" class="headerlink" title="任务3 公有云运维开发（10分）"></a>任务3 公有云运维开发（10分）</h3><h4 id="3-3-1-开发环境搭建-4"><a href="#3-3-1-开发环境搭建-4" class="headerlink" title="3.3.1   开发环境搭建"></a>3.3.1   开发环境搭建</h4><p>创建一台云主机，并登录此云服务器，安装Python3.68运行环境与SDK依赖库。</p>
<h4 id="3-3-2-云主机管理"><a href="#3-3-2-云主机管理" class="headerlink" title="3.3.2   云主机管理"></a>3.3.2   云主机管理</h4><p>调用SDK云主机管理的方法，实现云主机的的增删查改。</p>
<h4 id="3-3-3-云主机组管理"><a href="#3-3-3-云主机组管理" class="headerlink" title="3.3.3   云主机组管理"></a>3.3.3   云主机组管理</h4><p>调用SDK云主机组管理的方法，实现云主机组的的增删查改。</p>
<h4 id="3-3-4-弹性伸缩组管理-1"><a href="#3-3-4-弹性伸缩组管理-1" class="headerlink" title="3.3.4   弹性伸缩组管理"></a>3.3.4   弹性伸缩组管理</h4><p>编写Python代码，调用弹性伸缩组API，创建弹性伸缩组。</p>
<h4 id="3-3-5-完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）-3"><a href="#3-3-5-完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）-3" class="headerlink" title="3.3.5   完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）"></a>3.3.5   完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务4-边缘计算系统运维（10分）-4"><a href="#任务4-边缘计算系统运维（10分）-4" class="headerlink" title="任务4 边缘计算系统运维（10分）"></a>任务4 边缘计算系统运维（10分）</h3><h4 id="3-4-1-云端部署-4"><a href="#3-4-1-云端部署-4" class="headerlink" title="3.4.1   云端部署"></a>3.4.1   云端部署</h4><p>构建Kubernetes容器云平台，云端部署KubeEdge CloudCore云测模块，并启动cloudcore服务。</p>
<h4 id="3-4-2-边端部署-4"><a href="#3-4-2-边端部署-4" class="headerlink" title="3.4.2   边端部署"></a>3.4.2   边端部署</h4><p>在边侧部署KubeEdge EdgeCore边侧模块，并启动edgecore服务。</p>
<h4 id="3-4-3-边缘应用部署-4"><a href="#3-4-3-边缘应用部署-4" class="headerlink" title="3.4.3   边缘应用部署"></a>3.4.3   边缘应用部署</h4><p>通过边缘计算平台完成应用场景镜像部署与调试。（本任务只公布考试范围，不公布赛题）</p>
<h3 id="任务5-边缘计算云应用开发（5分）-4"><a href="#任务5-边缘计算云应用开发（5分）-4" class="headerlink" title="任务5 边缘计算云应用开发（5分）"></a>任务5 边缘计算云应用开发（5分）</h3><h4 id="3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）-4"><a href="#3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）-4" class="headerlink" title="3.5.1   对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）"></a>3.5.1   对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）</h4><h1 id="“云计算应用”赛项赛卷6"><a href="#“云计算应用”赛项赛卷6" class="headerlink" title="“云计算应用”赛项赛卷6"></a>“云计算应用”赛项赛卷6</h1><h2 id="模块一-私有云（30分）-5"><a href="#模块一-私有云（30分）-5" class="headerlink" title="模块一 私有云（30分）"></a>模块一 私有云（30分）</h2><p>企业首先完成私有云平台搭建和运维，私有云平台提供云主机、云网络、云存储等基础架构云服务，并开发自动化运维程序。</p>
<h3 id="任务1-私有云服务搭建（5分）-5"><a href="#任务1-私有云服务搭建（5分）-5" class="headerlink" title="任务1 私有云服务搭建（5分）"></a>任务1 私有云服务搭建（5分）</h3><h4 id="1-1-1-基础环境配置-5"><a href="#1-1-1-基础环境配置-5" class="headerlink" title="1.1.1   基础环境配置"></a>1.1.1   基础环境配置</h4><p>1.控制节点主机名为controller，设置计算节点主机名为compute；</p>
<p>2.hosts文件将IP地址映射为主机名。</p>
<h4 id="1-1-2-yum源配置-4"><a href="#1-1-2-yum源配置-4" class="headerlink" title="1.1.2   yum源配置"></a>1.1.2   yum源配置</h4><p>使用提供的http服务地址，分别设置controller节点和compute节点的yum源文件http.repo。</p>
<h4 id="1-1-3-配置无秘钥ssh-5"><a href="#1-1-3-配置无秘钥ssh-5" class="headerlink" title="1.1.3   配置无秘钥ssh"></a>1.1.3   配置无秘钥ssh</h4><p>配置controller节点可以无秘钥访问compute节点。</p>
<h4 id="1-1-4-基础安装-5"><a href="#1-1-4-基础安装-5" class="headerlink" title="1.1.4   基础安装"></a>1.1.4   基础安装</h4><p>在控制节点和计算节点上分别安装openstack-iaas软件包。</p>
<h4 id="1-1-5-数据库安装与调优-5"><a href="#1-1-5-数据库安装与调优-5" class="headerlink" title="1.1.5   数据库安装与调优"></a>1.1.5   数据库安装与调优</h4><p>在控制节点上使用安装Mariadb、RabbitMQ等服务。并进行相关操作。</p>
<h4 id="1-1-6-Keystone服务安装与使用-5"><a href="#1-1-6-Keystone服务安装与使用-5" class="headerlink" title="1.1.6   Keystone服务安装与使用"></a>1.1.6   Keystone服务安装与使用</h4><p>在控制节点上安装Keystone服务并创建用户。</p>
<h4 id="1-1-7-Glance安装与使用-5"><a href="#1-1-7-Glance安装与使用-5" class="headerlink" title="1.1.7   Glance安装与使用"></a>1.1.7   Glance安装与使用</h4><p>在控制节点上安装Glance 服务。上传镜像至平台，并设置镜像启动的要求参数。</p>
<h4 id="1-1-8-Nova安装-5"><a href="#1-1-8-Nova安装-5" class="headerlink" title="1.1.8   Nova安装"></a>1.1.8   Nova安装</h4><p>在控制节点和计算节点上分别安装Nova服务。安装完成后，完成Nova相关配置。</p>
<h4 id="1-1-9-Neutron安装-5"><a href="#1-1-9-Neutron安装-5" class="headerlink" title="1.1.9   Neutron安装"></a>1.1.9   Neutron安装</h4><p>在控制和计算节点上正确安装Neutron服务。</p>
<h4 id="1-1-10-Dashboard安装-5"><a href="#1-1-10-Dashboard安装-5" class="headerlink" title="1.1.10  Dashboard安装"></a>1.1.10  Dashboard安装</h4><p>在控制节点上安装Dashboard服务。安装完成后，将Dashboard中的 Django数据修改为存储在文件中。</p>
<h4 id="1-1-11-Swift安装-5"><a href="#1-1-11-Swift安装-5" class="headerlink" title="1.1.11  Swift安装"></a>1.1.11  Swift安装</h4><p>在控制节点和计算节点上分别安装Swift服务。安装完成后，将cirros镜像进行分片存储。</p>
<h4 id="1-1-12-Cinder创建硬盘-5"><a href="#1-1-12-Cinder创建硬盘-5" class="headerlink" title="1.1.12  Cinder创建硬盘"></a>1.1.12  Cinder创建硬盘</h4><p>在控制节点和计算节点分别安装Cinder服务，请在计算节点，对块存储进行扩容操作。</p>
<h4 id="1-1-13-OpenStack平台内存优化"><a href="#1-1-13-OpenStack平台内存优化" class="headerlink" title="1.1.13  OpenStack平台内存优化"></a>1.1.13  OpenStack平台内存优化</h4><p>搭建完OpenStack平台后，关闭系统的内存共享，打开透明大页。</p>
<h3 id="任务2-私有云服务运维（15分）-5"><a href="#任务2-私有云服务运维（15分）-5" class="headerlink" title="任务2 私有云服务运维（15分）"></a>任务2 私有云服务运维（15分）</h3><h4 id="1-2-1-OpenStack开放镜像权限-1"><a href="#1-2-1-OpenStack开放镜像权限-1" class="headerlink" title="1.2.1   OpenStack开放镜像权限"></a>1.2.1   OpenStack开放镜像权限</h4><p>在admin项目中存在glance-cirros镜像文件，将glance-cirros镜像指定demo项目进行共享使用。</p>
<h4 id="1-2-2-OpenStack消息队列调优-1"><a href="#1-2-2-OpenStack消息队列调优-1" class="headerlink" title="1.2.2   OpenStack消息队列调优"></a>1.2.2   OpenStack消息队列调优</h4><p>在OpenStack私有云平台，分别通过用户级别、系统级别、配置文件来设置RabbitMQ服务的最大连接数为10240。</p>
<h4 id="1-2-3-OpenStack镜像压缩-1"><a href="#1-2-3-OpenStack镜像压缩-1" class="headerlink" title="1.2.3   OpenStack镜像压缩"></a>1.2.3   OpenStack镜像压缩</h4><p>在HTTP文件服务器中存在一个镜像为CentOS7.5-compress.qcow2的镜像，请对该镜像进行压缩操作。</p>
<h4 id="1-2-4-Glance对接Cinder存储-1"><a href="#1-2-4-Glance对接Cinder存储-1" class="headerlink" title="1.2.4   Glance对接Cinder存储"></a>1.2.4   Glance对接Cinder存储</h4><p>在自行搭建的OpenStack平台中修改相关参数，使Glance可以使用Cinder作为后端存储。</p>
<h4 id="1-2-5-使用Heat模板创建容器-1"><a href="#1-2-5-使用Heat模板创建容器-1" class="headerlink" title="1.2.5   使用Heat模板创建容器"></a>1.2.5   使用Heat模板创建容器</h4><p>在自行搭建的OpenStack私有云平台上，在&#x2F;root目录下编写Heat模板文件，要求执行yaml文件可以创建名为heat-swift的容器。</p>
<h4 id="1-2-6-Nova清除缓存-1"><a href="#1-2-6-Nova清除缓存-1" class="headerlink" title="1.2.6   Nova清除缓存"></a>1.2.6   Nova清除缓存</h4><p>在OpenStack平台上，修改相关配置，让长时间不用的镜像缓存在过一定的时间后会被自动删除。</p>
<h4 id="1-2-7-Redis集群部署。-1"><a href="#1-2-7-Redis集群部署。-1" class="headerlink" title="1.2.7   Redis集群部署。"></a>1.2.7   Redis集群部署。</h4><p>部署Redis集群，Redis的一主二从三哨兵架构。</p>
<h4 id="1-2-8-redis服务调优-内存大页"><a href="#1-2-8-redis服务调优-内存大页" class="headerlink" title="1.2.8   redis服务调优-内存大页"></a>1.2.8   redis服务调优-内存大页</h4><p>请修改Redis的内存大页机制，规避大量拷贝时的性能变慢问题。</p>
<h4 id="1-2-9-JumpServer堡垒机部署-2"><a href="#1-2-9-JumpServer堡垒机部署-2" class="headerlink" title="1.2.9   JumpServer堡垒机部署"></a>1.2.9   JumpServer堡垒机部署</h4><p>使用提供的软件包安装JumpServer堡垒机服务，并配置使用该堡垒机对接自己安装的控制和计算节点。</p>
<h4 id="1-2-10-MongoDB主从"><a href="#1-2-10-MongoDB主从" class="headerlink" title="1.2.10  MongoDB主从"></a>1.2.10  MongoDB主从</h4><p>使用提供的OpenStack云平台创建两台云主机，在两台云主机中部署MongoDB数据库服务并配置MongoDB主从数据库。</p>
<h4 id="1-2-11-完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-3"><a href="#1-2-11-完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-3" class="headerlink" title="1.2.11  完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"></a>1.2.11  完成私有云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务3-私有云运维开发（10分）-5"><a href="#任务3-私有云运维开发（10分）-5" class="headerlink" title="任务3 私有云运维开发（10分）"></a>任务3 私有云运维开发（10分）</h3><h4 id="1-3-1-编写Shell一键部署脚本-4"><a href="#1-3-1-编写Shell一键部署脚本-4" class="headerlink" title="1.3.1   编写Shell一键部署脚本"></a>1.3.1   编写Shell一键部署脚本</h4><p>编写一键部署脚本，要求可以一键部署gpmall商城应用系统。</p>
<h4 id="1-3-2-Ansible部署FTP服务-1"><a href="#1-3-2-Ansible部署FTP服务-1" class="headerlink" title="1.3.2   Ansible部署FTP服务"></a>1.3.2   Ansible部署FTP服务</h4><p>编写Ansible脚本，部署FTP服务。</p>
<h4 id="1-3-3-Ansible部署Kafka服务-1"><a href="#1-3-3-Ansible部署Kafka服务-1" class="headerlink" title="1.3.3   Ansible部署Kafka服务"></a>1.3.3   Ansible部署Kafka服务</h4><p>编写Playbook，部署的ZooKeeper和Kafka。</p>
<h4 id="1-3-4-编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-4"><a href="#1-3-4-编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-4" class="headerlink" title="1.3.4   编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"></a>1.3.4   编写OpenStack容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）</h4><h2 id="模块二-容器云（30分）-5"><a href="#模块二-容器云（30分）-5" class="headerlink" title="模块二 容器云（30分）"></a>模块二 容器云（30分）</h2><p>企业构建Kubernetes容器云集群，引入KubeVirt实现OpenStack到Kubernetes的全面转型，用Kubernetes来管一切虚拟化运行时，包含裸金属、VM、容器。同时研发团队决定搭建基于Kubernetes 的CI&#x2F;CD环境，基于这个平台来实现DevOps流程。引入服务网格Istio，实现业务系统的灰度发布，治理和优化公司各种微服务，并开发自动化运维程序。</p>
<h3 id="任务1-容器云服务搭建（5分）-5"><a href="#任务1-容器云服务搭建（5分）-5" class="headerlink" title="任务1 容器云服务搭建（5分）"></a>任务1 容器云服务搭建（5分）</h3><h4 id="2-1-1-部署容器云平台-5"><a href="#2-1-1-部署容器云平台-5" class="headerlink" title="2.1.1   部署容器云平台"></a>2.1.1   部署容器云平台</h4><p>使用OpenStack私有云平台创建两台云主机，分别作为Kubernetes集群的master节点和node节点，然后完成Kubernetes集群的部署，并完成Istio服务网格、KubeVirt虚拟化和Harbor镜像仓库的部署。</p>
<h3 id="任务2-容器云服务运维（15分）-5"><a href="#任务2-容器云服务运维（15分）-5" class="headerlink" title="任务2 容器云服务运维（15分）"></a>任务2 容器云服务运维（15分）</h3><h4 id="2-2-1-容器化部署MariaDB-1"><a href="#2-2-1-容器化部署MariaDB-1" class="headerlink" title="2.2.1   容器化部署MariaDB"></a>2.2.1   容器化部署MariaDB</h4><p>编写Dockerfile文件构建mysql镜像，要求基于centos完成MariaDB数据库的安装和配置，并设置服务开机自启。</p>
<h4 id="2-2-2-容器化部署Redis-2"><a href="#2-2-2-容器化部署Redis-2" class="headerlink" title="2.2.2   容器化部署Redis"></a>2.2.2   容器化部署Redis</h4><p>编写Dockerfile文件构建redis镜像，要求基于centos完成Redis服务的安装和配置，并设置服务开机自启。</p>
<h4 id="2-2-3-容器化部署Nginx-1"><a href="#2-2-3-容器化部署Nginx-1" class="headerlink" title="2.2.3   容器化部署Nginx"></a>2.2.3   容器化部署Nginx</h4><p>编写Dockerfile文件构建nginx镜像，要求基于centos完成Nginx服务的安装和配置，并设置服务开机自启。</p>
<h4 id="2-2-4-容器化部署ERP"><a href="#2-2-4-容器化部署ERP" class="headerlink" title="2.2.4   容器化部署ERP"></a>2.2.4   容器化部署ERP</h4><p>编写Dockerfile文件构建erp镜像，要求基于centos完成JDK环境和ERP服务的安装与配置，并设置服务开机自启。</p>
<h4 id="2-2-5-编排部署ERP管理系统"><a href="#2-2-5-编排部署ERP管理系统" class="headerlink" title="2.2.5   编排部署ERP管理系统"></a>2.2.5   编排部署ERP管理系统</h4><p>编写docker-compose.yaml文件，要求使用镜像mysql、redis、nginx和erp完成ERP管理系统的编排部署。</p>
<h4 id="2-2-6-部署Jenkins"><a href="#2-2-6-部署Jenkins" class="headerlink" title="2.2.6   部署Jenkins"></a>2.2.6   部署Jenkins</h4><p>使用Deployment将Jenkins部署到devops命名空间下，使用提供的软件包完成离线插件的安装，并完成Jenkins的基础配置。</p>
<h4 id="2-2-7-部署GitLab"><a href="#2-2-7-部署GitLab" class="headerlink" title="2.2.7   部署GitLab"></a>2.2.7   部署GitLab</h4><p>使用Deployment将GitLab部署到devops命名空间下，设置GitLab登录信息，然后新建公开项目，并将提供的代码上传到该项目。</p>
<h4 id="2-2-8-配置Jenkins连接GitLab-1"><a href="#2-2-8-配置Jenkins连接GitLab-1" class="headerlink" title="2.2.8   配置Jenkins连接GitLab"></a>2.2.8   配置Jenkins连接GitLab</h4><p>在Jenkins中配置GitLab凭据，完成后测试其连通性。</p>
<h4 id="2-2-9-构建CI-x2F-CD-5"><a href="#2-2-9-构建CI-x2F-CD-5" class="headerlink" title="2.2.9   构建CI&#x2F;CD"></a>2.2.9   构建CI&#x2F;CD</h4><p>在Jenkins中新建流水线任务，然后在GitLab项目中编写声明式Pipeline，触发构建，要求完成构建项目，然后构建Docker镜像并推送到Harbor仓库，并基于新构建的镜像完成服务自动发布到Kubernetes集群。</p>
<h4 id="2-2-10-服务网格：流量镜像"><a href="#2-2-10-服务网格：流量镜像" class="headerlink" title="2.2.10  服务网格：流量镜像"></a>2.2.10  服务网格：流量镜像</h4><p>将Bookinfo应用部署到default命名空间下，创建请求路由reviews，将指定的流量路由到reviews微服务的v1版本，然后将相同流量镜像到reviews微服务的v2版本。</p>
<h4 id="2-2-11-KubeVirt运维：快照管理-1"><a href="#2-2-11-KubeVirt运维：快照管理-1" class="headerlink" title="2.2.11  KubeVirt运维：快照管理"></a>2.2.11  KubeVirt运维：快照管理</h4><p>使用提供的镜像在default命名空间下创建一台VM，名称为exam，指定VM的配置信息，并为VM创建名为exam的快照。</p>
<h4 id="2-2-12-完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-3"><a href="#2-2-12-完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）-3" class="headerlink" title="2.2.12  完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）"></a>2.2.12  完成容器云平台的调优或排错工作。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务3-容器云运维开发（10分）-5"><a href="#任务3-容器云运维开发（10分）-5" class="headerlink" title="任务3 容器云运维开发（10分）"></a>任务3 容器云运维开发（10分）</h3><h4 id="2-3-1-管理Deployment服务"><a href="#2-3-1-管理Deployment服务" class="headerlink" title="2.3.1   管理Deployment服务"></a>2.3.1   管理Deployment服务</h4><p>Kubernetes Python运维脚本开发-使用SDK方式管理Deployment服务。</p>
<h4 id="2-3-2-自定义调度器-2"><a href="#2-3-2-自定义调度器-2" class="headerlink" title="2.3.2   自定义调度器"></a>2.3.2   自定义调度器</h4><p>Kubernetes Python运维脚本开发-使用Restful API方式管理调度器。</p>
<h4 id="2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-5"><a href="#2-3-3-编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）-5" class="headerlink" title="2.3.3   编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）"></a>2.3.3   编写Kubernetes容器云平台自动化运维工具。（本任务只公布考试范围，不公布赛题）</h4><h2 id="模块三-公有云（40分）-5"><a href="#模块三-公有云（40分）-5" class="headerlink" title="模块三 公有云（40分）"></a>模块三 公有云（40分）</h2><p>企业选择国内公有云提供商，选择云主机、云网络、云硬盘、云防火墙、负载均衡等服务，可创建Web服务，共享文件存储服务，数据库服务，数据库集群等服务。搭建基于云原生的DevOps相关服务，构建云、边、端一体化的边缘计算系统，并开发云应用程序。</p>
<p>根据上述公有云平台的特性，完成公有云中的各项运维工作。</p>
<h3 id="任务1-公有云服务搭建（5分）-5"><a href="#任务1-公有云服务搭建（5分）-5" class="headerlink" title="任务1 公有云服务搭建（5分）"></a>任务1 公有云服务搭建（5分）</h3><h4 id="3-1-1-私有网络管理-5"><a href="#3-1-1-私有网络管理-5" class="headerlink" title="3.1.1   私有网络管理"></a>3.1.1   私有网络管理</h4><p>在公有云中完成虚拟私有云网络的创建。</p>
<h4 id="3-1-2-云实例管理-5"><a href="#3-1-2-云实例管理-5" class="headerlink" title="3.1.2   云实例管理"></a>3.1.2   云实例管理</h4><p>登录公有云平台，创建两台云实例虚拟机。</p>
<h4 id="3-1-3-管理数据库-5"><a href="#3-1-3-管理数据库-5" class="headerlink" title="3.1.3   管理数据库"></a>3.1.3   管理数据库</h4><p>使用intnetX-mysql网络创建两台chinaskill-sql-1和chinaskill-sql-2云服务器，并完成MongoDB安装。</p>
<h4 id="3-1-4-主从数据库-5"><a href="#3-1-4-主从数据库-5" class="headerlink" title="3.1.4   主从数据库"></a>3.1.4   主从数据库</h4><p>在chinaskill-sql-1和chinaskill-sql-2云服务器中配置MongoDB主从数据库。</p>
<h4 id="3-1-5-node环境管理-5"><a href="#3-1-5-node环境管理-5" class="headerlink" title="3.1.5   node环境管理"></a>3.1.5   node环境管理</h4><p>使用提供的压缩文件，安装Node.js环境。</p>
<h4 id="3-1-6-安全组管理-5"><a href="#3-1-6-安全组管理-5" class="headerlink" title="3.1.6   安全组管理"></a>3.1.6   安全组管理</h4><p>根据要求，创建一个安全组。</p>
<h4 id="3-1-7-RocketChat上云-5"><a href="#3-1-7-RocketChat上云-5" class="headerlink" title="3.1.7   RocketChat上云"></a>3.1.7   RocketChat上云</h4><p>使用http服务器提供文件，将Rocket.Chat应用部署上云。</p>
<h4 id="3-1-8-NAT网关-5"><a href="#3-1-8-NAT网关-5" class="headerlink" title="3.1.8   NAT网关"></a>3.1.8   NAT网关</h4><p>根据要求创建一个公网NAT网关。</p>
<h4 id="3-1-9-云服务器备份-4"><a href="#3-1-9-云服务器备份-4" class="headerlink" title="3.1.9   云服务器备份"></a>3.1.9   云服务器备份</h4><p>创建一个云服务器备份存储库名为server_backup，容量为100G。将ChinaSkill-node-1云服务器制作镜像文件chinaskill-image。</p>
<h4 id="3-1-10-负载均衡器-4"><a href="#3-1-10-负载均衡器-4" class="headerlink" title="3.1.10  负载均衡器"></a>3.1.10  负载均衡器</h4><p>根据要求创建一个负载均衡器chinaskill-elb。</p>
<h4 id="3-1-11-弹性伸缩管理-4"><a href="#3-1-11-弹性伸缩管理-4" class="headerlink" title="3.1.11  弹性伸缩管理"></a>3.1.11  弹性伸缩管理</h4><p>根据要求新建一个弹性伸缩启动配置。</p>
<h3 id="任务2-公有云服务运维（10分）-5"><a href="#任务2-公有云服务运维（10分）-5" class="headerlink" title="任务2 公有云服务运维（10分）"></a>任务2 公有云服务运维（10分）</h3><h4 id="3-2-1-云容器引擎-5"><a href="#3-2-1-云容器引擎-5" class="headerlink" title="3.2.1   云容器引擎"></a>3.2.1   云容器引擎</h4><p>在公有云上，按照要求创建一个x86架构的容器云集群。</p>
<h4 id="3-2-2-云容器管理-5"><a href="#3-2-2-云容器管理-5" class="headerlink" title="3.2.2   云容器管理"></a>3.2.2   云容器管理</h4><p>使用插件管理在kcloud容器集群中安装Dashboard可视化监控界面。</p>
<h4 id="3-2-3-使用kubectl操作集群-5"><a href="#3-2-3-使用kubectl操作集群-5" class="headerlink" title="3.2.3   使用kubectl操作集群"></a>3.2.3   使用kubectl操作集群</h4><p>在kcloud集群中安装kubectl命令，使用kubectl命令管理kcloud集群。</p>
<h4 id="3-2-4-安装Helm-3"><a href="#3-2-4-安装Helm-3" class="headerlink" title="3.2.4   安装Helm"></a>3.2.4   安装Helm</h4><p>使用提供的Helm软件包，在kcloud集群中安装Helm服务。</p>
<h4 id="3-2-5-云硬盘存储卷"><a href="#3-2-5-云硬盘存储卷" class="headerlink" title="3.2.5   云硬盘存储卷"></a>3.2.5   云硬盘存储卷</h4><p>根据要求购买云硬盘存储卷。</p>
<h4 id="3-2-6-Secrets管理–Opaque"><a href="#3-2-6-Secrets管理–Opaque" class="headerlink" title="3.2.6   Secrets管理–Opaque"></a>3.2.6   Secrets管理–Opaque</h4><p>在master节点&#x2F;root目录下编写YAML文件secret.yaml，要求执行文件创建密钥。</p>
<h3 id="任务3-公有云运维开发（10分）-5"><a href="#任务3-公有云运维开发（10分）-5" class="headerlink" title="任务3 公有云运维开发（10分）"></a>任务3 公有云运维开发（10分）</h3><h4 id="3-3-1-开发环境搭建-5"><a href="#3-3-1-开发环境搭建-5" class="headerlink" title="3.3.1   开发环境搭建"></a>3.3.1   开发环境搭建</h4><p>创建一台云主机，并登录此云服务器，安装Python3.68运行环境与SDK依赖库。</p>
<h4 id="3-3-2-安全组管理-1"><a href="#3-3-2-安全组管理-1" class="headerlink" title="3.3.2   安全组管理"></a>3.3.2   安全组管理</h4><p>调用api安全组的接口，实现安全组的增删查改。</p>
<h4 id="3-3-3-安全组规则管理-1"><a href="#3-3-3-安全组规则管理-1" class="headerlink" title="3.3.3   安全组规则管理"></a>3.3.3   安全组规则管理</h4><p>调用SDK安全组规则的方法，实现安全组规则的增删查改。</p>
<h4 id="3-3-4-云主机管理-2"><a href="#3-3-4-云主机管理-2" class="headerlink" title="3.3.4   云主机管理"></a>3.3.4   云主机管理</h4><p>调用SDK云主机管理的方法，实现云主机的的增删查改。</p>
<h4 id="3-3-5-完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）-4"><a href="#3-3-5-完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）-4" class="headerlink" title="3.3.5   完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）"></a>3.3.5   完成公有云平台自动化运维程序开发。（本任务只公布考试范围，不公布赛题）</h4><h3 id="任务4-边缘计算系统运维（10分）-5"><a href="#任务4-边缘计算系统运维（10分）-5" class="headerlink" title="任务4 边缘计算系统运维（10分）"></a>任务4 边缘计算系统运维（10分）</h3><h4 id="3-4-1-云端部署-5"><a href="#3-4-1-云端部署-5" class="headerlink" title="3.4.1   云端部署"></a>3.4.1   云端部署</h4><p>构建Kubernetes容器云平台，云端部署KubeEdge CloudCore云测模块，并启动cloudcore服务。</p>
<h4 id="3-4-2-边端部署-5"><a href="#3-4-2-边端部署-5" class="headerlink" title="3.4.2   边端部署"></a>3.4.2   边端部署</h4><p>在边侧部署KubeEdge EdgeCore边侧模块，并启动edgecore服务。</p>
<h4 id="3-4-3-边缘应用部署-5"><a href="#3-4-3-边缘应用部署-5" class="headerlink" title="3.4.3   边缘应用部署"></a>3.4.3   边缘应用部署</h4><p>通过边缘计算平台完成应用场景镜像部署与调试。（本任务只公布考试范围，不公布赛题）</p>
<h3 id="任务5-边缘计算云应用开发（5分）-5"><a href="#任务5-边缘计算云应用开发（5分）-5" class="headerlink" title="任务5 边缘计算云应用开发（5分）"></a>任务5 边缘计算云应用开发（5分）</h3><h4 id="3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）-5"><a href="#3-5-1-对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）-5" class="headerlink" title="3.5.1   对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）"></a>3.5.1   对接边缘计算系统，完成云应用微服务开发。（本任务只公布考试范围，不公布赛题）</h4>
      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2023/04/20/docker%E9%83%A8%E7%BD%B2prometheus/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title"></div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>






</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2023 Miss
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/preccrep/hexo-theme-jelly" target="_blank">Jelly</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="/js/main.js"></script>




  </div>
</body>
</html>