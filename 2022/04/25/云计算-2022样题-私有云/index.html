<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>云计算-2022样题-私有云 | Misswjy&#39;Blog</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="云计算赛项赛卷1OpenStack云平台运维1.使用提供的云安全框架组件，将提供的OpenStack云平台的安全策略从http优化至https。">
<meta property="og:type" content="article">
<meta property="og:title" content="云计算-2022样题-私有云">
<meta property="og:url" content="http://example.com/2022/04/25/%E4%BA%91%E8%AE%A1%E7%AE%97-2022%E6%A0%B7%E9%A2%98-%E7%A7%81%E6%9C%89%E4%BA%91/index.html">
<meta property="og:site_name" content="Misswjy&#39;Blog">
<meta property="og:description" content="云计算赛项赛卷1OpenStack云平台运维1.使用提供的云安全框架组件，将提供的OpenStack云平台的安全策略从http优化至https。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-04-25T08:40:51.000Z">
<meta property="article:modified_time" content="2022-07-03T08:46:50.000Z">
<meta property="article:author" content="Miss">
<meta property="article:tag" content="私有云">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Misswjy&#39;Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  

  
<script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>

  
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  
<meta name="generator" content="Hexo 6.1.0"></head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
				<img lazy-src="/img/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
			<h1 class="header-author"><a href="/">Miss</a></h1>
		</hgroup>

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Home</a></li>
				        
							<li><a href="/archives">Archives</a></li>
				        
						</ul>
					</nav>
					<nav class="half-header-menu">
						<a class="hide">Home</a>
						<a>Tags</a>
						<a>Links</a>
						<a>About</a>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Misswjy" title="github">github</a>
					        
								<a class="mail" target="_blank" href="/dockery@foxmail.com" title="mail">mail</a>
					        
								<a class="bilibili" target="_blank" href="https://space.bilibili.com/292671654" title="bilibili">bilibili</a>
					        
						</div>
						<!-- music -->
						
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/k8s/" style="font-size: 15px;">k8s</a> <a href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/" style="font-size: 12.5px;">云计算</a> <a href="/tags/%E5%AE%B9%E5%99%A8%E4%BA%91/" style="font-size: 17.5px;">容器云</a> <a href="/tags/%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2%E5%92%8C%E8%BF%90%E7%BB%B4/" style="font-size: 10px;">应用部署和运维</a> <a href="/tags/%E7%A7%81%E6%9C%89%E4%BA%91/" style="font-size: 20px;">私有云</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/">github</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">I&#39;m a developer.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/avatar.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Home</a></li>
		        
					<li><a href="/archives">Archives</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Misswjy" title="github">github</a>
			        
						<a class="mail" target="_blank" href="/dockery@foxmail.com" title="mail">mail</a>
			        
						<a class="bilibili" target="_blank" href="https://space.bilibili.com/292671654" title="bilibili">bilibili</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-云计算-2022样题-私有云" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/04/25/%E4%BA%91%E8%AE%A1%E7%AE%97-2022%E6%A0%B7%E9%A2%98-%E7%A7%81%E6%9C%89%E4%BA%91/" class="article-date">
  	<time datetime="2022-04-25T08:40:51.000Z" itemprop="datePublished">2022-04-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      云计算-2022样题-私有云
      
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%A7%81%E6%9C%89%E4%BA%91/" rel="tag">私有云</a></li></ul>
	</div>

        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="云计算赛项赛卷1"><a href="#云计算赛项赛卷1" class="headerlink" title="云计算赛项赛卷1"></a>云计算赛项赛卷1</h1><h2 id="OpenStack云平台运维"><a href="#OpenStack云平台运维" class="headerlink" title="OpenStack云平台运维"></a>OpenStack云平台运维</h2><p><strong>1.使用提供的云安全框架组件，将提供的OpenStack云平台的安全策略从http优化至https。</strong><span id="more"></span></p>
<p>使用提供的云安全框架组件，将自行搭建的OpenStack云平台的安全策略从http优化至https。<br><code>yum -y install mod_ssl</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/openstack-dashboard/local_settings</span><br><span class="line">##在DEBUG = False下增加4行</span><br><span class="line">USE_SSL = True</span><br><span class="line">CSRF_COOKIE_SECURE = True                              ##原文中有，去掉注释即可</span><br><span class="line">SESSION_COOKIE_SECURE = True                       ##原文中有，去掉注释即可</span><br><span class="line">SESSION_COOKIE_HTTPONLY = True</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/httpd/conf.d/ssl.conf</span><br><span class="line">##将SSLProtocol all -SSLv2 -SSLv3改成：</span><br><span class="line">SSLProtocol all -SSLv2</span><br></pre></td></tr></table></figure>

<p> <code>systemctl restart httpd</code></p>
<p><code>systemctl restart memcached</code></p>
<p><strong>2.在提供的OpenStack平台上，通过修改相关参数对openstack平台进行调优操作，相应的调优操作有：</strong></p>
<p>（1）设置内存超售比例为1.5倍；</p>
<p>（2）设置为120秒。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf</span><br><span class="line">ram_allocation_ratio=1.5 ##设置内存超售比例为1.5倍</span><br><span class="line">service_down_time = 120  ##设置nova服务心跳检查时间为120秒</span><br></pre></td></tr></table></figure>

<p><code>systemctl restart *nova*</code></p>
<p><strong>3.在提供的OpenStack平台上，使用Swift对象存储服务，修改相应的配置文件，使对象存储Swift作为glance镜像服务的后端存储</strong></p>
<p> <code>vi /etc/glance/glance-api.conf</code> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[glance_store]</span><br><span class="line">#stores = file,http</span><br><span class="line">#default_store = file</span><br><span class="line">#filesystem_store_datadir = /var/lib/glance/images/</span><br><span class="line">default_store=swift</span><br><span class="line">stores=glance.store.swift.Store</span><br><span class="line">swift_store_auth_address=http://controller:5000/v3.0</span><br><span class="line">swift_store_endpoint_type=internalURL</span><br><span class="line">swift_store_multi_tenant=True</span><br><span class="line">swift_store_admin_tenants=service</span><br><span class="line">swift_store_user=glance</span><br><span class="line">swift_store_key=000000</span><br><span class="line">swift_store_container=glance</span><br><span class="line">swift_store_create_container_on_put=True</span><br></pre></td></tr></table></figure>

<p><strong>4.在提供的OpenStack平台上，编写heat模板createvm.yml文件，模板作用为按照要求创建一个云主机。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat createvm.yml </span><br><span class="line">heat_template_version: 2018-03-02</span><br><span class="line">resources:</span><br><span class="line">  server:</span><br><span class="line">    type: OS::Nova::Server</span><br><span class="line">    properties:</span><br><span class="line">      name: &quot;testvm1&quot;</span><br><span class="line">      image: cirros</span><br><span class="line">      flavor: m1.flavor</span><br><span class="line">      networks:</span><br><span class="line">        - network: extnet</span><br></pre></td></tr></table></figure>

<p><strong>5.在提供的OpenStack平台上，对cinder存储空间进行扩容操作，要求将cinder存储空间扩容10G。</strong></p>
<p><strong>创建一块新分区（vdb3）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# fdisk /dev/vdb</span><br><span class="line">欢迎使用 fdisk (util-linux 2.23.2)。</span><br><span class="line">更改将停留在内存中，直到您决定将更改写入磁盘。</span><br><span class="line">使用写入命令前请三思。</span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (2 primary, 0 extended, 2 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): </span><br><span class="line">Using default response p</span><br><span class="line">分区号 (3,4，默认 3)：</span><br><span class="line">起始 扇区 (83888128-104857599，默认为 83888128)：</span><br><span class="line">将使用默认值 83888128</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (83888128-104857599，默认为 104857599)：</span><br><span class="line">将使用默认值 104857599</span><br><span class="line">分区 3 已设置为 Linux 类型，大小设为 10 GiB</span><br><span class="line">命令(输入 m 获取帮助)：w!</span><br><span class="line">The partition table has been altered!</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">WARNING: Re-reading the partition table failed with error 16: 设备或资源忙.</span><br><span class="line">The kernel still uses the old table. The new table will be used at</span><br><span class="line">the next reboot or after you run partprobe(8) or kpartx(8)</span><br><span class="line">正在同步磁盘。</span><br></pre></td></tr></table></figure>

<p><strong>重启一下</strong></p>
<p><code>reboot</code></p>
<p><strong>vgextend cinder-volumes &#x2F;dev&#x2F;vdb3 添加</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# vgextend cinder-volumes /dev/vdb3</span><br><span class="line">  Physical volume &quot;/dev/vdb3&quot; successfully created.</span><br><span class="line">  Volume group &quot;cinder-volumes&quot; successfully extended</span><br></pre></td></tr></table></figure>

<p><strong>vgdisplay  查看</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# vgdisplay</span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               cinder-volumes</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        2</span><br><span class="line">  Metadata Sequence No  9</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                2</span><br><span class="line">  Open LV               0</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                2</span><br><span class="line">  Act PV                2</span><br><span class="line">  VG Size               29.99 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              7678</span><br><span class="line">  Alloc PE / Size       4874 / &lt;19.04 GiB</span><br><span class="line">  Free  PE / Size       2804 / 10.95 GiB</span><br><span class="line">  VG UUID               LOomGq-bcsf-Lqpe-sgmi-hJU3-H7rk-8DHfz2</span><br></pre></td></tr></table></figure>

<p><strong>6.在OpenStack私有云平台，创建一台云主机，使用提供的软件包，编写一键部署脚本，要求可以一键部署gpmall商城应用系统。</strong></p>
<p><strong>7.使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。</strong></p>
<p><strong>8.使用Blazar服务，使得管理员可以在OpenStack中为虚拟（实例，卷等）和物理（主机，存储等）的不同资源类型提供资源预留的能力。</strong></p>
<p><strong>9.使用cloudkitty计费服务，处理来自不同监控指标后端的数据并进行计费规则创建。以达到费用核算目的。</strong></p>
<p><strong>10.使用提供的iaas-error1镜像创建云主机，创建后的云主机内有错误的OpenStack平台，错误现象为cinder服务无法正常使用，请结合报错信息排查错误，使cinder服务可以正常使用。</strong></p>
<h1 id="云计算赛项赛卷2"><a href="#云计算赛项赛卷2" class="headerlink" title="云计算赛项赛卷2"></a>云计算赛项赛卷2</h1><p><strong>1.使用自动搭建的OpenStack平台，登录数据库，创建库test，并在库test中创建表company（表结构如(id int not null primary key,name varchar(50),addr varchar(255))所示），在表company中插入一条数据(1,”alibaba”,”china”)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; create database test;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">MariaDB [(none)]&gt; use test;</span><br><span class="line">Database changed</span><br><span class="line">MariaDB [test]&gt; create table company(</span><br><span class="line">    -&gt; id int not null primary key,</span><br><span class="line">    -&gt; name varchar(50),</span><br><span class="line">    -&gt; addr varchar(255));</span><br><span class="line">Query OK, 0 rows affected (0.15 sec)</span><br><span class="line">MariaDB [test]&gt; insert into company values(1,&quot;alibaba&quot;,&quot;chinas&quot;);</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br></pre></td></tr></table></figure>

<p><strong>2.OpenStack各服务内部通信都是通过RPC来交互，各agent都需要去连接RabbitMQ；随着各服务agent增多，MQ的连接数会随之增多，最终可能会到达上限，成为瓶颈。使用提供的Ope nStack私有云平台，通过修改limits.conf配置文件来修改RabbitMQ服务的最大连接数为10240</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@controller /]# cat /etc/security/limits.conf </span><br><span class="line">...........................................</span><br><span class="line">#&lt;domain&gt;      &lt;type&gt;  &lt;item&gt;         &lt;value&gt;</span><br><span class="line">#</span><br><span class="line">#*               soft    core            0</span><br><span class="line">#*               hard    rss             10000</span><br><span class="line">#@student        hard    nproc           20</span><br><span class="line">#@faculty        soft    nproc           20</span><br><span class="line">#@faculty        hard    nproc           50</span><br><span class="line">#ftp             hard    nproc           0</span><br><span class="line">#@student        -       maxlogins       4</span><br><span class="line">user             soft    nofile          10240</span><br><span class="line">user             hard    nofile          10240</span><br><span class="line"># End of file</span><br></pre></td></tr></table></figure>

<p><strong>3.在提供的OpenStack私有云平台上，在&#x2F;root目录下编写Heat模板create_user.yaml，创建名为heat-user的用户，属于admin项目，并赋予heat-user用户admin的权限，配置用户密码为123456。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat create_user.yml </span><br><span class="line">heat_template_version: 2018-03-02</span><br><span class="line">resources:</span><br><span class="line">  user:</span><br><span class="line">    type: OS::Keystone::User</span><br><span class="line">    properties:</span><br><span class="line">      name: heat-user</span><br><span class="line">      password: &quot;000000&quot;</span><br><span class="line">      domain: demo</span><br><span class="line">      default_project: admin</span><br><span class="line">      roles: [&#123;&quot;role&quot;:&quot;admin&quot;,&quot;project&quot;:&quot;admin&quot;&#125;]</span><br></pre></td></tr></table></figure>

<p><strong>4.在提供的OpenStack私有云平台上，使用cirros-0.3.4-x86_64-disk.img镜像，创建一个名为Gmirror1的镜像，要求启动该镜像的最小硬盘是30G、最小内存是2048M。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack image create Gmirror1 --disk-format qcow2 --container-format bare --min-disk 30 --min-ram 2048 &lt; cirros-0.3.4-x86_64-disk.img </span><br><span class="line">+------------------+------------------------------------------------------+</span><br><span class="line">| Field            | Value                                                |</span><br><span class="line">+------------------+------------------------------------------------------+</span><br><span class="line">| checksum         | ee1eca47dc88f4879d8a229cc70a07c6                     |</span><br><span class="line">| container_format | bare                                                 |</span><br><span class="line">| created_at       | 2022-05-03T00:34:26Z                                 |</span><br><span class="line">| disk_format      | qcow2                                                |</span><br><span class="line">| file             | /v2/images/1a1ef251-a1d6-4f53-87aa-beef8fae8e64/file |</span><br><span class="line">| id               | 1a1ef251-a1d6-4f53-87aa-beef8fae8e64                 |</span><br><span class="line">| min_disk         | 30                                                   |</span><br><span class="line">| min_ram          | 2048                                                 |</span><br><span class="line">| name             | Gmirror1                                             |</span><br><span class="line">| owner            | f9ef9bd849374360807c1fa567b44862                     |</span><br><span class="line">| protected        | False                                                |</span><br><span class="line">| schema           | /v2/schemas/image                                    |</span><br><span class="line">| size             | 13287936                                             |</span><br><span class="line">| status           | active                                               |</span><br><span class="line">| tags             |                                                      |</span><br><span class="line">| updated_at       | 2022-05-03T00:34:27Z                                 |</span><br><span class="line">| virtual_size     | None                                                 |</span><br><span class="line">| visibility       | shared                                               |</span><br><span class="line">+------------------+------------------------------------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>5.在提供的OpenStack私有云平台上，自行安装Swift服务，新建名为chinaskill的容器，将cirros-0.3.4-x86_64-disk.img镜像上传到chinaskill容器中，并设置分段存放，每一段大小为10M。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# swift post chinaskill</span><br><span class="line">[root@controller ~]# swift list</span><br><span class="line">chinaskill</span><br><span class="line">[root@controller ~]# swift upload chinaskill -S 10000000 cirros-0.3.4-x86_64-disk.img </span><br><span class="line">cirros-0.3.4-x86_64-disk.img segment 0</span><br><span class="line">cirros-0.3.4-x86_64-disk.img segment 1</span><br><span class="line">cirros-0.3.4-x86_64-disk.img</span><br></pre></td></tr></table></figure>

<p><strong>6.使用OpenStack私有云平台，创建两台云主机vm1和vm2，在这两台云主机上分别安装数据库服务，并配置成主从数据库，vm1节点为主库，vm2节点为从库（数据库密码设置为000000）。</strong></p>
<p><strong>（1）修改主机名</strong></p>
<p><strong>mysql1</strong></p>
<p><code>hostnamectl set-hostname mysql1</code></p>
<p><code>bash</code></p>
<p><code>exit</code></p>
<p><strong>mysql2</strong></p>
<p><code>hostnamectl set-hostname mysql2</code></p>
<p><code>bash</code></p>
<p><code>exit</code></p>
<p><strong>（2）配置hosts文件</strong></p>
<p>两个节点配置&#x2F;etc&#x2F;hosts文件，修改为如下</p>
<p><code>vi /etc/hosts</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">192.168.20.107  mysql1</span><br><span class="line">192.168.20.109  mysql2</span><br><span class="line">192.168.20.137  mycat</span><br></pre></td></tr></table></figure>

<p><strong>（3）配置YUM源</strong></p>
<p>两个节点均使用提供的mariadb–10.3.23-repo.tar.gz的压缩包，解压并放在&#x2F;opt目录下，进入&#x2F;etc&#x2F;yum.repos.d目录下，将原来的repo文件移除，新建local.repo文件并编辑内容，具体操作命令如下：</p>
<p><code>curl -O http://172.19.25.11/mariadb-10.3.23-repo.tar.gz</code></p>
<p> <code>tar -zxvf mariadb-10.3.23-repo.tar.gz -C /opt</code></p>
<p><code>rm -rf /etc/yum.repos.d/*</code></p>
<p><code>vi /etc/yum.repos.d/local.repo</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mariadb]</span><br><span class="line">name=mariadb</span><br><span class="line">baseurl=file:///opt/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure>

<p><strong>（4）安装数据库服务并启动</strong></p>
<p>配置完毕后，两个节点安装数据库服务，命令如下：</p>
<p><code>yum install -y mariadb mariadb-server</code></p>
<p><code>systemctl start mariadb</code></p>
<p><code>systemctl enable mariadb</code></p>
<p><strong>(5）初始化数据库</strong></p>
<p>两个节点初始化数据库，配置数据库root密码为000000，命令如下：</p>
<p><code>mysql_secure_installation</code> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/mysql_secure_installation: line 379: find_mysql_client: command not found</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span><br><span class="line"></span><br><span class="line">   SERVERS IN PRODUCTION USE! PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to log into MariaDB to secure it, we&#x27;ll need the current</span><br><span class="line">password for the root user. If you&#x27;ve just installed MariaDB, and</span><br><span class="line">you haven&#x27;t set the root password yet, the password will be blank,</span><br><span class="line">so you should just press enter here.</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Enter current password for root (enter for none):     #默认按Enter键</span><br><span class="line">OK, successfully used password, moving on...</span><br><span class="line"></span><br><span class="line">Setting the root password ensures that nobody can log into the MariaDB</span><br><span class="line">root user without the proper authorisation.</span><br><span class="line"></span><br><span class="line">Set root password? [Y/n] y</span><br><span class="line"></span><br><span class="line">New password:                 #输入数据库root密码000000</span><br><span class="line">Re-enter new password:             #再次输入密码000000</span><br><span class="line">Password updated successfully!</span><br><span class="line">Reloading privilege tables..</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">By default, a MariaDB installation has an anonymous user, allowing anyone</span><br><span class="line">to log into MariaDB without having to have a user account created for</span><br><span class="line">them. This is intended only for testing, and to make the installation</span><br><span class="line">go a bit smoother. You should remove them before moving into a</span><br><span class="line">production environment.</span><br><span class="line"></span><br><span class="line">Remove anonymous users? [Y/n] y</span><br><span class="line"> ... Success!</span><br><span class="line"> </span><br><span class="line">Normally, root should only be allowed to connect from &#x27;localhost&#x27;. This</span><br><span class="line">ensures that someone cannot guess at the root password from the network.</span><br><span class="line"> </span><br><span class="line">Disallow root login remotely? [Y/n] n</span><br><span class="line"> ... skipping.</span><br><span class="line"></span><br><span class="line">By default, MariaDB comes with a database named &#x27;test&#x27; that anyone can</span><br><span class="line">access. This is also intended only for testing, and should be removed</span><br><span class="line">before moving into a production environment.</span><br><span class="line"></span><br><span class="line">Remove test database and access to it? [Y/n] y</span><br><span class="line"> \- Dropping test database...</span><br><span class="line"> ... Success!</span><br><span class="line"> \- Removing privileges on test database...</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Reloading the privilege tables will ensure that all changes made so far</span><br><span class="line">will take effect immediately.</span><br><span class="line"></span><br><span class="line">Reload privilege tables now? [Y/n] y</span><br><span class="line"> ... Success!</span><br><span class="line"> </span><br><span class="line">Cleaning up...</span><br><span class="line"></span><br><span class="line">All done! If you&#x27;ve completed all of the above steps, your MariaDB</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks for using MariaDB!</span><br></pre></td></tr></table></figure>

<p><strong>（6）配置mysql1主节点</strong></p>
<p>修改mysql1节点的数据库配置文件，在配置文件&#x2F;etc&#x2F;my.cnf.d&#x2F;server.cnf中的[mysqld]增添如下内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql1 ~]# cat /etc/my.cnf.d/server.cnf</span><br><span class="line">... ...</span><br><span class="line">[mysqld]</span><br><span class="line">log_bin = mysql-bin            #记录操作日志</span><br><span class="line">binlog_ignore_db = mysql         #不同步MySQL系统数据库</span><br><span class="line">server_id = 12              #数据库集群中的每个节点id都要不同，一般使用IP地址的最后段的数字，例如172.30.11.12，server_id就写12</span><br></pre></td></tr></table></figure>

<p>重启数据库服务，并进入数据库，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql1 ~]# systemctl restart mariadb</span><br><span class="line">[root@mysql1 ~]# mysql -uroot -p000000</span><br><span class="line">Welcome to the MariaDB monitor. Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 9</span><br><span class="line">Server version: 10.3.23-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"> </span><br><span class="line">MariaDB [(none)]&gt; </span><br></pre></td></tr></table></figure>

<p>在mysql1节点，授权在任何客户端机器上可以以root用户登录到数据库，然后在主节点上创建一个user用户连接节点mysql2，并赋予从节点同步主节点数据库的权限。命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; grant all privileges on *.* to root@&#x27;%&#x27; identified by &quot;000000&quot;;</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; grant replication slave on *.* to &#x27;user&#x27;@&#x27;mysql2&#x27; identified by &#x27;000000&#x27;;</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>（7）配置mysql2从节点</strong></p>
<p>修改mysql2节点的数据库配置文件，在配置文件&#x2F;etc&#x2F;my.cnf.d&#x2F;server.cnf中的[mysqld]增添如下内容。</p>
<p><code>[root@mysql2 ~]# cat /etc/my.cnf.d/server.cnf</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">... ...</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">log_bin = mysql-bin            #记录操作日志</span><br><span class="line">binlog_ignore_db = mysql         #不同步MySQL系统数据库</span><br><span class="line">server_id = 13              #数据库集群中的每个节点id都要不同，一般使用IP地址的最后段的数字，例如172.30.11.13，server_id就写13</span><br><span class="line"></span><br><span class="line">... ...</span><br></pre></td></tr></table></figure>

<p>修改完配置文件后，重启数据库服务，并在从节点mysql2上登录MariaDB数据库，配置从节点连接主节点的连接信息。master_host为主节点主机名mysql1，master_user为上一步中创建的用户user，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql2 ~]# systemctl restart mariadb</span><br><span class="line">[root@mysql2 ~]# mysql -uroot -p000000</span><br><span class="line">Welcome to the MariaDB monitor. Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 9</span><br><span class="line">Server version: 10.3.23-MariaDB-log MariaDB Server</span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; change master to master_host=&#x27;mysql1&#x27;,master_user=&#x27;user&#x27;,master_password=&#x27;000000&#x27;;</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure>

<p>配置完毕主从数据库之间的连接信息之后，开启从节点服务。使用show slave status\G命令，并查看从节点服务状态，如果Slave_IO_Running和Slave_SQL_Running的状态都为YES，则从节点服务开启成功。命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; start slave;</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show slave status\G</span><br><span class="line"></span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">        Slave_IO_State: Waiting for master to send event</span><br><span class="line">          Master_Host: mysql1</span><br><span class="line">          Master_User: user</span><br><span class="line">         Master_Port: 3306</span><br><span class="line">         Connect_Retry: 60</span><br><span class="line">........</span><br><span class="line">      Slave_IO_Running: Yes</span><br><span class="line">       Slave_SQL_Running: Yes</span><br><span class="line">.........</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可以看到Slave_IO_Running和Slave_SQL_Running的状态都是Yes，配置数据库主从集群成功。</p>
<p><strong>（8）主节点创建数据库</strong></p>
<p>先在主节点mysql1中创建库test，并在库test中创建表company，插入表数据，创建完成后，查看表company数据，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql1 ~]# mysql -uroot -p000000</span><br><span class="line"></span><br><span class="line">Welcome to the MariaDB monitor. Commands end with ; or \g.</span><br><span class="line"></span><br><span class="line">Your MariaDB connection id is 11</span><br><span class="line"></span><br><span class="line">Server version: 10.3.23-MariaDB-log MariaDB Server</span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"> </span><br><span class="line">MariaDB [(none)]&gt; create database test;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">MariaDB [(none)]&gt; use test;</span><br><span class="line">Database changed</span><br><span class="line">MariaDB [test]&gt; create table company(id int not null primary key,name varchar(50),addr varchar(255));</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"> </span><br><span class="line">MariaDB [test]&gt; insert into company values(1,&quot;alibaba&quot;,&quot;china&quot;);</span><br><span class="line"></span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">MariaDB [test]&gt; select * from company;</span><br><span class="line"></span><br><span class="line">+----+---------+-------+</span><br><span class="line">| id | name  | addr |</span><br><span class="line">+----+---------+-------+</span><br><span class="line">| 1 | alibaba | china |</span><br><span class="line">+----+---------+-------+</span><br><span class="line"></span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>（9）从节点验证复制功能</strong></p>
<p>登录mysql2节点的数据库，查看数据库列表。找到test数据库，查询表，并查询内容验证从数据库的复制功能，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql2 ~]# mysql -uroot -p000000</span><br><span class="line">Welcome to the MariaDB monitor. Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 12</span><br><span class="line">Server version: 10.3.23-MariaDB-log MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"> </span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"> </span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database      |</span><br><span class="line">+--------------------+</span><br><span class="line"></span><br><span class="line">| information_schema |</span><br><span class="line">| mysql       |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test        |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows in set (0.00 sec) </span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use test;</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line">Database changed</span><br><span class="line">MariaDB [test]&gt; show tables;</span><br><span class="line">+----------------+</span><br><span class="line">| Tables_in_test |</span><br><span class="line">+----------------+</span><br><span class="line">| company    |</span><br><span class="line">+----------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line">MariaDB [test]&gt; select * from company;</span><br><span class="line">+----+---------+-------+</span><br><span class="line">| id | name  | addr |</span><br><span class="line">+----+---------+-------+</span><br><span class="line">| 1 | alibaba | china |</span><br><span class="line">+----+---------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>可以查看到主数据库中刚刚创建的库、表、信息，验证从数据库的复制功能成功。</p>
<p><strong>7.在OpenStack私有云平台，创建一台云主机，使用提供的软件包，编写一键部署脚本，要求可以一键部署owncloud云网盘应用系统。</strong></p>
<p><strong>8.使用Blazar服务，使得管理员可以在OpenStack中为虚拟（实例，卷等）和物理（主机，存储等）的不同资源类型提供资源预留的能力。</strong></p>
<p><strong>9.使用cloudkitty计费服务，处理虚拟机实例(compute)、云硬盘(volume)、镜像(image)、网络进出流量(network.bw.in, network.bw.out)、浮动IP(network.floating)的计费数据并进行计费规则创建，以达到费用核算目的。</strong></p>
<p><strong>10.使用提供的iaas-error2镜像创建云主机，创建后的云主机内有错误的OpenStack平台，错误现象为glance服务无法正常使用，请结合报错信息排查错误，使glance服务可以正常使用。</strong></p>
<h1 id="云计算赛项赛卷3"><a href="#云计算赛项赛卷3" class="headerlink" title="云计算赛项赛卷3"></a>云计算赛项赛卷3</h1><p><strong>1.使用提供的OpenStack私有云平台，修改相关配置文件，启用-device virtio-net-pci in kvm。</strong></p>
<p><strong>2.在提供的OpenStack平台上，通过修改相关参数对openstack平台进行调优操作，相应的调优操作有：</strong></p>
<p>（1）预留前2个物理CPU，把后面的所有CPU分配给虚拟机使用（假设vcpu为16个）；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf</span><br><span class="line">vcpu_pin_set= 3-16</span><br></pre></td></tr></table></figure>

<p>（2）设置cpu超售比例为4倍；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf</span><br><span class="line">cpu_allocation_ratio=4.0</span><br></pre></td></tr></table></figure>

<p><strong>3.在提供的OpenStack平台上，对mencached服务进行操作使memcached的缓存由64MB变为256MB。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/sysconfig/memcached </span><br><span class="line">PORT=&quot;11211&quot;</span><br><span class="line">USER=&quot;memcached&quot;</span><br><span class="line">MAXCONN=&quot;1024&quot;</span><br><span class="line">CACHESIZE=&quot;256&quot; #缓存</span><br><span class="line">OPTIONS=&quot;-l 127.0.0.1,::1,controller&quot;</span><br></pre></td></tr></table></figure>

<p><strong>4.在提供的OpenStack平台上，编写heat模板createnet.yml文件，模板作用为按照要求创建一个网络和子网。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat createnet.yml </span><br><span class="line">heat_template_version: 2018-03-02</span><br><span class="line">resources:</span><br><span class="line">  network:</span><br><span class="line">    type: OS::Neutron::Net</span><br><span class="line">    properties:</span><br><span class="line">      name: &quot;extnet&quot;</span><br><span class="line">      shared: false</span><br><span class="line">      admin_state_up: true</span><br><span class="line">  subnet:</span><br><span class="line">    type: OS::Neutron::Subnet</span><br><span class="line">    properties:</span><br><span class="line">      cidr: 10.10.2.0/24</span><br><span class="line">      enable_dhcp: true</span><br><span class="line">      gateway_ip: 10.10.2.1</span><br><span class="line">      allocation_pools:</span><br><span class="line">        - start: 10.10.2.20</span><br><span class="line">          end: 10.10.2.100</span><br><span class="line">      name: &quot;subextnet&quot;</span><br><span class="line">      network_id: &#123;get_resource: &quot;network&quot;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>5.使用提供的OpenStack私有云平台，修改普通用户权限，使普通用户不能对镜像进行创建和删除操作</strong></p>
<p><strong>6.在OpenStack私有云平台，创建一台云主机，并创建一个40G大小的cinder块存储，将块存储连接到云主机，然后在云主机上对云硬盘进行操作。要求分出2个大小为10G的分区，使用这2个分区，创建名为&#x2F;dev&#x2F;md0、raid级别为0的磁盘阵列，最后将md0格式化为ext4格式并挂载至&#x2F;mnt目录。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql1 ~]# fdisk /dev/vdc</span><br><span class="line">欢迎使用 fdisk (util-linux 2.23.2)。</span><br><span class="line">更改将停留在内存中，直到您决定将更改写入磁盘。</span><br><span class="line">使用写入命令前请三思。</span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): </span><br><span class="line">Using default response p</span><br><span class="line">分区号 (1-4，默认 1)：</span><br><span class="line">起始 扇区 (2048-83886079，默认为 2048)：</span><br><span class="line">将使用默认值 2048</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (2048-83886079，默认为 83886079)：+10G</span><br><span class="line">分区 1 已设置为 Linux 类型，大小设为 10 GiB</span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (1 primary, 0 extended, 3 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): </span><br><span class="line">Using default response p</span><br><span class="line">分区号 (2-4，默认 2)：</span><br><span class="line">起始 扇区 (20973568-83886079，默认为 20973568)：</span><br><span class="line">将使用默认值 20973568</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (20973568-83886079，默认为 83886079)：+10G</span><br><span class="line">分区 2 已设置为 Linux 类型，大小设为 10 GiB</span><br><span class="line">命令(输入 m 获取帮助)：t</span><br><span class="line">分区号 (1,2，默认 2)：1</span><br><span class="line">Hex 代码(输入 L 列出所有代码)：fd</span><br><span class="line">已将分区“Linux”的类型更改为“Linux raid autodetect”</span><br><span class="line">命令(输入 m 获取帮助)：t</span><br><span class="line">分区号 (1,2，默认 2)：</span><br><span class="line">Hex 代码(输入 L 列出所有代码)：fd</span><br><span class="line">已将分区“Linux”的类型更改为“Linux raid autodetect”</span><br><span class="line">命令(输入 m 获取帮助)：w</span><br><span class="line">The partition table has been altered!</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">正在同步磁盘。</span><br><span class="line">[root@mysql1 ~]# lsblk</span><br><span class="line">NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">vda    253:0    0  50G  0 disk </span><br><span class="line">└─vda1 253:1    0  50G  0 part /</span><br><span class="line">vdb    253:16   0  50G  0 disk /mnt</span><br><span class="line">vdc    253:32   0  40G  0 disk </span><br><span class="line">├─vdc1 253:33   0  10G  0 part </span><br><span class="line">└─vdc2 253:34   0  10G  0 part </span><br></pre></td></tr></table></figure>

<p><strong>创建磁盘阵列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql1 ~]# mdadm -C /dev/md0 -l 0 -n 2 /dev/vdc1 /dev/vdc2</span><br><span class="line">mdadm: Fail create md0 when using /sys/module/md_mod/parameters/new_array</span><br><span class="line">mdadm: Defaulting to version 1.2 metadata</span><br><span class="line">mdadm: array /dev/md0 started.</span><br><span class="line">[root@mysql1 ~]# lsblk</span><br><span class="line">NAME    MAJ:MIN RM SIZE RO TYPE  MOUNTPOINT</span><br><span class="line">vda     253:0    0  50G  0 disk  </span><br><span class="line">└─vda1  253:1    0  50G  0 part  /</span><br><span class="line">vdb     253:16   0  50G  0 disk  /mnt</span><br><span class="line">vdc     253:32   0  40G  0 disk  </span><br><span class="line">├─vdc1  253:33   0  10G  0 part  </span><br><span class="line">│ └─md0   9:0    0  20G  0 raid0 </span><br><span class="line">└─vdc2  253:34   0  10G  0 part  </span><br><span class="line">  └─md0   9:0    0  20G  0 raid0 </span><br></pre></td></tr></table></figure>

<p><strong>格式化为ext4格式</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql1 ~]# mkfs.ext4 /dev/md0</span><br><span class="line">mke2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">文件系统标签=</span><br><span class="line">OS type: Linux</span><br><span class="line">块大小=4096 (log=2)</span><br><span class="line">分块大小=4096 (log=2)</span><br><span class="line">Stride=128 blocks, Stripe width=256 blocks</span><br><span class="line">1310720 inodes, 5238272 blocks</span><br><span class="line">261913 blocks (5.00%) reserved for the super user</span><br><span class="line">第一个数据块=0</span><br><span class="line">Maximum filesystem blocks=2153775104</span><br><span class="line">160 block groups</span><br><span class="line">32768 blocks per group, 32768 fragments per group</span><br><span class="line">8192 inodes per group</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br><span class="line">        4096000</span><br><span class="line">Allocating group tables: 完成                            </span><br><span class="line">正在写入inode表: 完成                            </span><br><span class="line">Creating journal (32768 blocks): 完成</span><br><span class="line">Writing superblocks and filesystem accounting information: 完成</span><br></pre></td></tr></table></figure>

<p><strong>挂载到mnt</strong></p>
<p><code>mount /dev/md0 /mnt/</code></p>
<p><strong>7.使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。</strong></p>
<p><strong>8.使用cyborg硬件加速服务，实现硬件资源的发现、上报、挂载＼卸载等资源管理。</strong></p>
<p><strong>9.在OpenStack私有云平台，创建一台云主机，编写脚本，要求可以完成数据库的定期备份，并把数据库备份文件存放在&#x2F;opt目录下。</strong></p>
<p><strong>10.使用提供的iaas-error3镜像创建云主机，创建后的云主机内有错误的OpenStack平台，错误现象为nova服务无法正常使用，创建云主机报错，请结合报错信息排查错误，使nova服务可以正常使用，可以正常创建云主机。</strong></p>
<h1 id="云计算赛项赛卷4"><a href="#云计算赛项赛卷4" class="headerlink" title="云计算赛项赛卷4"></a>云计算赛项赛卷4</h1><p><strong>1.在提供的OpenStack私有云平台上，在&#x2F;root目录下编写Heat模板create_net.yaml，创建名为Heat-Network网络，选择不共享；创建子网名为Heat-Subnet，子网网段设置为10.20.2.0&#x2F;24，开启DHCP服务，地址池为10.20.2.20-10.20.2.100。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat createnet.yml </span><br><span class="line">heat_template_version: 2018-03-02</span><br><span class="line">resources:</span><br><span class="line">  network:</span><br><span class="line">    type: OS::Neutron::Net</span><br><span class="line">    properties:</span><br><span class="line">      name: &quot;extnet&quot;</span><br><span class="line">      shared: false</span><br><span class="line">      admin_state_up: true</span><br><span class="line">  subnet:</span><br><span class="line">    type: OS::Neutron::Subnet</span><br><span class="line">    properties:</span><br><span class="line">      cidr: 10.10.2.0/24</span><br><span class="line">      enable_dhcp: true</span><br><span class="line">      gateway_ip: 10.10.2.1</span><br><span class="line">      allocation_pools:</span><br><span class="line">        - start: 10.10.2.20</span><br><span class="line">          end: 10.10.2.100</span><br><span class="line">      name: &quot;subextnet&quot;</span><br><span class="line">      network_id: &#123;get_resource: &quot;network&quot;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.在提供的OpenStack私有云平台，创建一台云主机（镜像使用CentOS7.9，flavor使用带临时磁盘50G的），配置该主机为nfs的server端，将该云主机中的&#x2F;mnt&#x2F;test目录进行共享（目录不存在可自行创建）。然后配置controller节点为nfs的client端，要求将&#x2F;mnt&#x2F;test目录作为glance后端存储的挂载目录。</strong></p>
<p><strong>nfs服务端：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs ~]# umount /mnt</span><br><span class="line">[root@nfs ~]# lsblk</span><br><span class="line">NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">vda    253:0    0  100G  0 disk </span><br><span class="line">└─vda1 253:1    0  100G  0 part /</span><br><span class="line">vdb    253:16   0   50G  0 disk </span><br><span class="line">[root@nfs ~]# </span><br><span class="line">[root@nfs ~]# mkfs.ext4 /dev/vdb</span><br><span class="line">mke2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">文件系统标签=</span><br><span class="line">OS type: Linux</span><br><span class="line">块大小=4096 (log=2)</span><br><span class="line">分块大小=4096 (log=2)</span><br><span class="line">Stride=0 blocks, Stripe width=0 blocks</span><br><span class="line">3276800 inodes, 13107200 blocks</span><br><span class="line">655360 blocks (5.00%) reserved for the super user</span><br><span class="line">第一个数据块=0</span><br><span class="line">Maximum filesystem blocks=2162163712</span><br><span class="line">400 block groups</span><br><span class="line">32768 blocks per group, 32768 fragments per group</span><br><span class="line">8192 inodes per group</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br><span class="line">        4096000, 7962624, 11239424</span><br><span class="line">Allocating group tables: 完成                            </span><br><span class="line">正在写入inode表: 完成                            </span><br><span class="line">Creating journal (32768 blocks): 完成</span><br><span class="line">Writing superblocks and filesystem accounting information: 完成   </span><br><span class="line">[root@nfs ~]# mount /dev/vdb /mnt</span><br><span class="line">[root@nfs ~]# lsblk</span><br><span class="line">NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">vda    253:0    0  100G  0 disk </span><br><span class="line">└─vda1 253:1    0  100G  0 part /</span><br><span class="line">vdb    253:16   0   50G  0 disk /mnt</span><br></pre></td></tr></table></figure>

<p><code>yum install -y nfs-utils rpcbind</code></p>
<p> <code>mkdir /mnt/test</code></p>
<p><code>echo /mnt/test *(rw,async,no_root_squash) &gt; /etc/exports</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs ~]# systemctl restart rpcbind</span><br><span class="line">[root@nfs ~]# systemctl restart nfs</span><br><span class="line">[root@nfs ~]# systemctl enable rpcbind</span><br><span class="line">[root@nfs ~]# systemctl enable nfs</span><br></pre></td></tr></table></figure>

<p><strong>nfs客户端：</strong></p>
<p><code>echo 192.168.20.106:/mnt/test /var/lib/glance/images nfs default netdev 0 0 &gt; /etc/fstab</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl restart rpcbind</span><br><span class="line">[root@controller ~]# systemctl restart nfs</span><br><span class="line">[root@controller ~]# systemctl enable rpcbind</span><br><span class="line">[root@controller ~]# systemctl enable nfs</span><br><span class="line">[root@controller ~]# showmount -e 192.168.20.106</span><br><span class="line">Export list for 192.168.20.106:</span><br><span class="line">/mnt/test *</span><br><span class="line">[root@controller ~]# mount -t nfs 192.168.20.106:/mnt/test /var/lib/glance/images/</span><br><span class="line">[root@controller ~]# chown -R glance:glance /var/lib/glance/images/</span><br><span class="line">[root@controller ~]# ll /var/lib/glance/</span><br><span class="line">总用量 4</span><br><span class="line">drwxr-xr-x 2 glance glance 4096 4月  25 06:18 images</span><br><span class="line">[root@controller ~]# mount </span><br><span class="line">...............................................................</span><br><span class="line">192.168.20.106:/mnt/test on /var/lib/glance/images type nfs4 (rw,relatime,vers=4.1,rsize=1048576,wsize=1048576,namlen=255,hard,proto=tcp,port=0,timeo=600,retrans=2,sec=sys,clientaddr=192.168.20.105,local_lock=none,addr=192.168.20.106)</span><br></pre></td></tr></table></figure>

<p><strong>3.使用OpenStack私有云平台，找到virsh中ID为10的云主机（若不存在请自行创建）。在云主机所在的物理节点，进入virsh交互式界面，使用virsh命令，将memory虚拟机的内存调整为5242880KB大小。</strong></p>
<p><strong>4.使用OpenStack私有云平台，创建一台云主机，创建完之后对该云主机进行打快照处理，并将该快照保存至&#x2F;root&#x2F;cloudsave目录，保存名字为csccvm.qcow2。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack server image create vm1 --name csccvm</span><br><span class="line">[root@controller ~]# mkdir /root/cloudsave</span><br><span class="line">[root@controller ~]# openstack image save --file /root/cloudsave/csccvm.qcow2 csccvm</span><br></pre></td></tr></table></figure>

<p><strong>5.使用OpenStack私有云平台，使用centos7.9镜像，flavor使用1vcpu&#x2F;2G内存&#x2F;40G硬盘，创建云主机cscc_vm，假设在使用过程中，发现该云主机配置太低，需要调整，请修改相应配置，将dashboard界面上的云主机调整实例大小可以使用，将该云主机实例大小调整为2vcpu&#x2F;4G内存&#x2F;40G硬盘。</strong></p>
<p><code>sed -i &#39;s/#allow_resize_to_same_host=false/allow_resize_to_same_host=True/g&#39; /etc/nova/nova.conf</code></p>
<p><code>systemctl restart *nova*</code></p>
<p>然后图形化操作</p>
<p><strong>6.使用OpenStack私有云平台，创建三个云主机，使用提供的软件包安装RabbitMQ服务，安装完毕后，搭建RabbitMQ集群，并打开RabbitMQ服务的图形化监控页面插件。集群使用普通集群模式，其中第一台做磁盘节点，另外两台做内存节点。</strong></p>
<p><strong>（1）修改主机名</strong></p>
<p>对这3台虚拟机进行修改主机名的操作，主机名修改为rabbitmq1，rabbitmq2，rabbitmq3。命令如下</p>
<p><strong>rabbitmaq1</strong></p>
<p><code>hostnamectl set-hostname rabbitmq1</code></p>
<p><code>bash</code></p>
<p><code>exit</code></p>
<p> <strong>rabbitmaq2</strong></p>
<p><code>hostnamectl set-hostname rabbitmq2</code></p>
<p><code>bash</code></p>
<p><code>exit</code></p>
<p> <strong>rabbitmaq3</strong></p>
<p><code>hostnamectl set-hostname rabbitmq3</code></p>
<p><code>bash</code></p>
<p><code>exit</code></p>
<p><strong>（2）修改hosts</strong></p>
<p>三个节点都配置hosts</p>
<p><code>vi /etc/hosts</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">192.168.20.121  rabbitmq1</span><br><span class="line">192.168.20.128  rabbitmq2</span><br><span class="line">192.168.20.116  rabbitmq3</span><br></pre></td></tr></table></figure>

<p><strong>（4）配置yum源</strong></p>
<p>三个节点均使用提供的rabbitmq-repo.tar.gz的压缩包，上传至虚拟机的&#x2F;root目录下，解压并放在&#x2F;opt目录下，进入&#x2F;etc&#x2F;yum.repos.d目录下，将原来的repo文件移除，新建local.repo文件并编辑内容，具体操作命令如下：</p>
<p><code>curl -O http://172.19.25.11/rabbitmq-repo.tar.gz</code></p>
<p><code>tar -zxvf rabbitmq-repo.tar.gz -C /opt/</code></p>
<p><code>mv /etc/yum.repos.d/* /tmp/</code></p>
<p><code>vi local.repo</code> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[rabbitmq]</span><br><span class="line">name=rabbitmq</span><br><span class="line">baseurl=file:///opt/rabbitmq-repo</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure>

<p><strong>（5）安装RabbitMQ服务并启动</strong></p>
<p>配置完毕后，三个节点安装RabbitMQ服务，命令如下：</p>
<p><code>yum install -y rabbitmq-server</code></p>
<p>rabbitmq1节点启动RabbitMQ服务并查看服务状态，命令如下：</p>
<p><code>systemctl start rabbitmq-server</code></p>
<p><code>systemctl status rabbitmq-server</code></p>
<p><strong>（6）配置界面访问</strong></p>
<p>RabbitMQ提供了一个非常友好的图形化监控页面插件（rabbitmq_management），让我们可以一目了然看见Rabbit的状态或集群状态。启用图形化页面插件的具体命令如下：</p>
<p><code>rabbitmq-plugins enable rabbitmq_management</code></p>
<p><code>service rabbitmq-server restart</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@rabbitmq1 ~]# netstat -ntpl</span><br><span class="line"></span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line"></span><br><span class="line">Proto Recv-Q Send-Q Local Address      Foreign Address     State    PID/Program name  </span><br><span class="line"></span><br><span class="line">tcp    0   0 0.0.0.0:25672      0.0.0.0:*        LISTEN   13685/beam     </span><br><span class="line"></span><br><span class="line">tcp    0   0 0.0.0.0:111       0.0.0.0:*        LISTEN   500/rpcbind     </span><br><span class="line"></span><br><span class="line">tcp    0   0 0.0.0.0:4369      0.0.0.0:*        LISTEN   11320/epmd     </span><br><span class="line"></span><br><span class="line">tcp    0   0 0.0.0.0:22       0.0.0.0:*        LISTEN   1162/sshd      </span><br><span class="line"></span><br><span class="line">tcp    0   0 0.0.0.0:15672      0.0.0.0:*        LISTEN   13685/beam     </span><br><span class="line"></span><br><span class="line">tcp    0   0 127.0.0.1:25      0.0.0.0:*        LISTEN   932/master     </span><br><span class="line"></span><br><span class="line">tcp6    0   0 :::5672         :::*          LISTEN   13685/beam     </span><br><span class="line"></span><br><span class="line">tcp6    0   0 :::111         :::*          LISTEN   500/rpcbind     </span><br><span class="line"></span><br><span class="line">tcp6    0   0 :::4369         :::*          LISTEN   11320/epmd     </span><br><span class="line"></span><br><span class="line">tcp6    0   0 :::22          :::*          LISTEN   1162/sshd      </span><br><span class="line"></span><br><span class="line">tcp6    0   0 ::1:25         :::*          LISTEN   932/master  </span><br></pre></td></tr></table></figure>

<p>可以看到15672端口已开放，打开浏览器，输入rabbitmq1节点的IP+端口15672（<a href="http://172.30.11.12:15672）访问RabbitMQ监控界面，使用默认的用户名和密码登录（用户名和密码都为guest）">http://172.30.11.12:15672）访问RabbitMQ监控界面，使用默认的用户名和密码登录（用户名和密码都为guest）</a></p>
<p><strong>（7）配置节点间的通信</strong></p>
<p>RabbitMQ的集群是依附于erlang集群来工作的，所以必须先构建起一个erlang集群。erlang集群中各节点是由magic cookie来实现的，每个节点上要保持相同的.erlang.cookie文件，这个cookie存放在&#x2F;var&#x2F;lib&#x2F;rabbitmq&#x2F;.erlang.cookie中，文件是400的权限。必须保证各节点cookie一致，不然节点之间就无法通信。</p>
<p>查看rabbitmq1节点的.erlang.cookie文件，并将该文件复制到rabbitmq2和rabbitmq3节点的&#x2F;var&#x2F;lib&#x2F;rabbitmq&#x2F;目录下，命令如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@rabbitmq1 ~]# cat /var/lib/rabbitmq/.erlang.cookie </span><br><span class="line"></span><br><span class="line">EZYGPUJOTSESXPAUFMWO</span><br><span class="line"></span><br><span class="line">[root@rabbitmq1 ~]# scp /var/lib/rabbitmq/.erlang.cookie root@rabbitmq2:/var/lib/rabbitmq/</span><br><span class="line"></span><br><span class="line">[root@rabbitmq1 ~]# scp /var/lib/rabbitmq/.erlang.cookie root@rabbitmq3:/var/lib/rabbitmq/</span><br></pre></td></tr></table></figure>

<p>将.erlang.cookie文件传至rabbitmq2和rabbitmq3节点后，需要修改该文件的用户与用户组，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rabbitmq1 ~]#cd /var/lib/rabbitmq/</span><br><span class="line">[root@rabbitmq1 rabbitmq]# chown rabbitmq:rabbitmq .erlang.cookie</span><br><span class="line">[root@rabbitmq2 ~]#cd /var/lib/rabbitmq/</span><br><span class="line">[root@rabbitmq2 rabbitmq]# chown rabbitmq:rabbitmq .erlang.cookie</span><br><span class="line">[root@rabbitmq3 ~]#cd /var/lib/rabbitmq/</span><br><span class="line">[root@rabbitmq3 rabbitmq]# chown rabbitmq:rabbitmq .erlang.cookie</span><br></pre></td></tr></table></figure>

<p><strong>（8）配置节点加入集群</strong></p>
<p>在rabbitmq2、rabbitmq3节点执行如下命令，将这两个节点作为RAM节点加入到RabbitMQ集群中，具体命令如下：</p>
<p>rabbitmq2节点：</p>
<p><code>systemctl start rabbitmq-server</code></p>
<p><code>service rabbitmq-server restart</code></p>
<p>rabbitmq3节点：</p>
<p><code>systemctl start rabbitmq-server</code></p>
<p><code>service rabbitmq-server restart</code></p>
<p>上面这俩步千万不要忘记打</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">rabbitmq2节点：</span><br><span class="line"></span><br><span class="line">[root@rabbitmq2 rabbitmq]# rabbitmqctl stop_app</span><br><span class="line"></span><br><span class="line">Stopping node rabbit@rabbitmq2 ...</span><br><span class="line"></span><br><span class="line">...done.</span><br><span class="line"></span><br><span class="line">[root@rabbitmq2 rabbitmq]# rabbitmqctl join_cluster --ram rabbit@rabbitmq1</span><br><span class="line"></span><br><span class="line">Clustering node rabbit@rabbitmq2 with rabbit@rabbitmq1 ...</span><br><span class="line"></span><br><span class="line">...done.</span><br><span class="line"></span><br><span class="line">[root@rabbitmq2 rabbitmq]# rabbitmqctl start_app</span><br><span class="line"></span><br><span class="line">Starting node rabbit@rabbitmq2 ...</span><br><span class="line"></span><br><span class="line">...done.</span><br><span class="line"></span><br><span class="line">rabbitmq3节点：</span><br><span class="line"></span><br><span class="line">[root@rabbitmq3 rabbitmq]# rabbitmqctl stop_app</span><br><span class="line"></span><br><span class="line">Stopping node rabbit@rabbitmq3 ...</span><br><span class="line"></span><br><span class="line">...done.</span><br><span class="line"></span><br><span class="line">[root@rabbitmq3 rabbitmq]# rabbitmqctl join_cluster --ram rabbit@rabbitmq1</span><br><span class="line"></span><br><span class="line">Clustering node rabbit@rabbitmq3 with rabbit@rabbitmq1 ...</span><br><span class="line"></span><br><span class="line">...done.</span><br><span class="line"></span><br><span class="line">[root@rabbitmq3 rabbitmq]# rabbitmqctl start_app</span><br><span class="line"></span><br><span class="line">Starting node rabbit@rabbitmq3 ...</span><br><span class="line"></span><br><span class="line">...done.</span><br></pre></td></tr></table></figure>

<p>默认rabbitmq启动后是磁盘节点，在这个cluster命令下，rabbitmq2和rabbitmq3是内存节点，rabbitmq1是磁盘节点。</p>
<p>如果要使rabbitmq2、rabbitmq3都是磁盘节点，去掉–ram参数即可。</p>
<p>如果想要更改节点类型，可以使用命令rabbitmqctl change_cluster_node_type disc(ram)，前提是必须停掉Rabbit应用。</p>
<p><strong>（9）配置RAM节点启用界面</strong></p>
<p>在rabbitmq2和rabbitmq3节点上启用rabbitmq_management，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">rabbitmq2节点：</span><br><span class="line"></span><br><span class="line">[root@rabbitmq2 rabbitmq]# rabbitmq-plugins enable rabbitmq_management</span><br><span class="line"></span><br><span class="line">The following plugins have been enabled:</span><br><span class="line"></span><br><span class="line"> mochiweb</span><br><span class="line"></span><br><span class="line"> webmachine</span><br><span class="line"></span><br><span class="line"> rabbitmq_web_dispatch</span><br><span class="line"></span><br><span class="line"> amqp_client</span><br><span class="line"></span><br><span class="line"> rabbitmq_management_agent</span><br><span class="line"></span><br><span class="line"> rabbitmq_management</span><br><span class="line"></span><br><span class="line">Plugin configuration has changed. Restart RabbitMQ for changes to take effect.</span><br><span class="line"></span><br><span class="line">[root@rabbitmq2 rabbitmq]# systemctl restart rabbitmq-server</span><br><span class="line"></span><br><span class="line">rabbitmq3节点：</span><br><span class="line"></span><br><span class="line">[root@rabbitmq3 rabbitmq]# rabbitmq-plugins enable rabbitmq_management</span><br><span class="line"></span><br><span class="line">The following plugins have been enabled:</span><br><span class="line"></span><br><span class="line"> mochiweb</span><br><span class="line"></span><br><span class="line"> webmachine</span><br><span class="line"></span><br><span class="line"> rabbitmq_web_dispatch</span><br><span class="line"></span><br><span class="line"> amqp_client</span><br><span class="line"></span><br><span class="line"> rabbitmq_management_agent</span><br><span class="line"></span><br><span class="line"> rabbitmq_management</span><br><span class="line"></span><br><span class="line">Plugin configuration has changed. Restart RabbitMQ for changes to take effect.</span><br><span class="line"></span><br><span class="line">[root@rabbitmq3 rabbitmq]# systemctl restart rabbitmq-server</span><br></pre></td></tr></table></figure>

<p>启用rabbitmq2节点和rabbitmq3节点的监控界面后，登录</p>
<p><strong>（10）查看集群状态</strong></p>
<p>在RabbitMQ集群的任一节点上，可以查看RabbitMQ集群的状态，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@rabbitmq1 ~]# rabbitmqctl cluster_status</span><br><span class="line"></span><br><span class="line">Cluster status of node rabbit@rabbitmq1 ...</span><br><span class="line"></span><br><span class="line">[&#123;nodes,[&#123;disc,[rabbit@rabbitmq1]&#125;,&#123;ram,[rabbit@rabbitmq3,rabbit@rabbitmq2]&#125;]&#125;,</span><br><span class="line"></span><br><span class="line"> &#123;running_nodes,[rabbit@rabbitmq3,rabbit@rabbitmq2,rabbit@rabbitmq1]&#125;,</span><br><span class="line"></span><br><span class="line"> &#123;cluster_name,&lt;&lt;&quot;rabbit@rabbitmq1&quot;&gt;&gt;&#125;,</span><br><span class="line"></span><br><span class="line"> &#123;partitions,[]&#125;]</span><br><span class="line"></span><br><span class="line">...done.</span><br></pre></td></tr></table></figure>

<p>可以查看到rabbitmq1节点为disc磁盘节点，rabbitmq2节点和rabbitmq3节点为RAM内存节点。</p>
<p><strong>7.使用karbor服务，保护云平台上的卷（一般就是映射到VMs上的可进行读写的数据存储载体或设备）</strong></p>
<p><strong>8.使用Blazar服务，使得管理员可以在OpenStack中为虚拟（实例，卷等）和物理（主机，存储等）的不同资源类型提供资源预留的能力。</strong></p>
<p><strong>9.使用octavia负载均衡服务，实现云平台上的负载均衡。</strong></p>
<p><strong>10.使用提供的iaas-error4镜像创建云主机，创建后的云主机内有错误的OpenStack平台，错误现象为dashboard界面服务无法正常使用，请结合报错信息排查错误，使dashboard界面服务可以正常使用。</strong></p>
<h1 id="云计算赛项赛卷5"><a href="#云计算赛项赛卷5" class="headerlink" title="云计算赛项赛卷5"></a>云计算赛项赛卷5</h1><p><strong>1.使用OpenStack私有云平台，创建三个云主机，使用提供的软件包安装RabbitMQ服务，安装完毕后，搭建RabbitMQ集群，并打开RabbitMQ服务的图形化监控页面插件。集群使用普通集群模式，其中第一台做磁盘节点，另外两台做内存节点。</strong></p>
<p>略</p>
<p><strong>2.在openstack私有云平台上，创建云主机VM1，镜像使用cirros。创建成功后，将云主机打快照并保存到controller节点&#x2F;root&#x2F;cloudsave目录下，保存名字为csccvm.qcow2。最后使用qemu-img相关命令，将镜像的campat版本修改为0.10（该操作是为了适配某些低版本的云平台）。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack server image create vm1 --name csccvm</span><br><span class="line">[root@controller ~]# mkdir /root/cloudsave</span><br><span class="line">[root@controller ~]# openstack image save --file /root/cloudsave/csccvm.qcow2 csccvm</span><br><span class="line">[root@controller ~]# cd /var/lib/glance/images/</span><br><span class="line">[root@controller images]# ll</span><br><span class="line">总用量 47464</span><br><span class="line">-rw-r----- 1 glance glance 22020096 5月   9 03:25 10b86659-1951-452b-9dbf-1ba3d5ad2f9d</span><br><span class="line">-rw-r----- 1 glance glance 13287936 5月   8 02:08 bd74df22-1558-4fff-b4f3-f78aee4275d6</span><br><span class="line">-rw-r----- 1 glance glance 13287936 5月   9 02:39 ccf243c9-8cb7-453e-902b-de66867c7e5f</span><br><span class="line">[root@controller images]# qemu-img amend -f qcow2 -o compat=0.10 10b86659-1951-452b-9dbf-1ba3d5ad2f9d</span><br></pre></td></tr></table></figure>

<p><strong>3.在提供OpenStack私有云平台，创建一台云主机，云主机名为cscc_vm，镜像使用cirros、flavor自行创建（配置自定义）。然后创建一块大小为1G的云硬盘，命名为block，并挂载到该云主机。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cinder create --name block 1</span><br><span class="line">+--------------------------------+--------------------------------------+</span><br><span class="line">| Property                       | Value                                |</span><br><span class="line">+--------------------------------+--------------------------------------+</span><br><span class="line">| attachments                    | []                                   |</span><br><span class="line">| availability_zone              | nova                                 |</span><br><span class="line">| bootable                       | false                                |</span><br><span class="line">| consistencygroup_id            | None                                 |</span><br><span class="line">| created_at                     | 2022-05-09T03:28:56.000000           |</span><br><span class="line">| description                    | None                                 |</span><br><span class="line">| encrypted                      | False                                |</span><br><span class="line">| id                             | 1dd10e41-f0c6-4feb-a7e8-ddb1d99b067f |</span><br><span class="line">| metadata                       | &#123;&#125;                                   |</span><br><span class="line">| migration_status               | None                                 |</span><br><span class="line">| multiattach                    | False                                |</span><br><span class="line">| name                           | block                                |</span><br><span class="line">| os-vol-host-attr:host          | None                                 |</span><br><span class="line">| os-vol-mig-status-attr:migstat | None                                 |</span><br><span class="line">| os-vol-mig-status-attr:name_id | None                                 |</span><br><span class="line">| os-vol-tenant-attr:tenant_id   | 0047a899f1b34aaba102c89bf5dbeab4     |</span><br><span class="line">| replication_status             | None                                 |</span><br><span class="line">| size                           | 1                                    |</span><br><span class="line">| snapshot_id                    | None                                 |</span><br><span class="line">| source_volid                   | None                                 |</span><br><span class="line">| status                         | creating                             |</span><br><span class="line">| updated_at                     | None                                 |</span><br><span class="line">| user_id                        | 73ba03dfca0f4de6953a79e478cd035f     |</span><br><span class="line">| volume_type                    | None                                 |</span><br><span class="line">+--------------------------------+--------------------------------------+</span><br><span class="line">[root@controller ~]# openstack server add volume vm1 block</span><br></pre></td></tr></table></figure>

<p><strong>4.在提供的OpenStack平台上，编写heat模板createcinder.yml文件，模板作用为按照要求创建一个云硬盘。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat createcinder.yml </span><br><span class="line">heat_template_version: 2018-03-02</span><br><span class="line">resources:</span><br><span class="line">  cinder:</span><br><span class="line">    type: OS::Cinder::Volume</span><br><span class="line">    properties:</span><br><span class="line">      name: dsb</span><br><span class="line">      size: 10</span><br></pre></td></tr></table></figure>

<p><strong>5.在OpenStack私有云平台，创建一台云主机，并创建一个40G大小的cinder块存储，将块存储连接到云主机，然后在云主机上对云硬盘进行操作。要求分出4个大小为5G的分区，使用这4个分区，创建名为&#x2F;dev&#x2F;md5、raid级别为5的磁盘阵列加一个热备盘（&#x2F;dev&#x2F;vdb4为热备盘）。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql1 ~]# fdisk /dev/vdd</span><br><span class="line">欢迎使用 fdisk (util-linux 2.23.2)。</span><br><span class="line">更改将停留在内存中，直到您决定将更改写入磁盘。</span><br><span class="line">使用写入命令前请三思。</span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">使用磁盘标识符 0x206f71f2 创建新的 DOS 磁盘标签。</span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): </span><br><span class="line">Using default response p</span><br><span class="line">分区号 (1-4，默认 1)：</span><br><span class="line">起始 扇区 (2048-83886079，默认为 2048)：</span><br><span class="line">将使用默认值 2048</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (2048-83886079，默认为 83886079)：+5G</span><br><span class="line">分区 1 已设置为 Linux 类型，大小设为 5 GiB</span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (1 primary, 0 extended, 3 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): </span><br><span class="line">Using default response p</span><br><span class="line">分区号 (2-4，默认 2)：</span><br><span class="line">起始 扇区 (10487808-83886079，默认为 10487808)：</span><br><span class="line">将使用默认值 10487808</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (10487808-83886079，默认为 83886079)：+5G</span><br><span class="line">分区 2 已设置为 Linux 类型，大小设为 5 GiB</span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (2 primary, 0 extended, 2 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): </span><br><span class="line">Using default response p</span><br><span class="line">分区号 (3,4，默认 3)：</span><br><span class="line">起始 扇区 (20973568-83886079，默认为 20973568)：</span><br><span class="line">将使用默认值 20973568</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (20973568-83886079，默认为 83886079)：+5G</span><br><span class="line">分区 3 已设置为 Linux 类型，大小设为 5 GiB</span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (3 primary, 0 extended, 1 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default e): p</span><br><span class="line">已选择分区 4</span><br><span class="line">起始 扇区 (31459328-83886079，默认为 31459328)：</span><br><span class="line">将使用默认值 31459328</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (31459328-83886079，默认为 83886079)：+5G</span><br><span class="line">分区 4 已设置为 Linux 类型，大小设为 5 GiB</span><br><span class="line">命令(输入 m 获取帮助)：t</span><br><span class="line">分区号 (1-4，默认 4)：1</span><br><span class="line">Hex 代码(输入 L 列出所有代码)：fd</span><br><span class="line">已将分区“Linux”的类型更改为“Linux raid autodetect”</span><br><span class="line">命令(输入 m 获取帮助)：t</span><br><span class="line">分区号 (1-4，默认 4)：2</span><br><span class="line">Hex 代码(输入 L 列出所有代码)：fd</span><br><span class="line">已将分区“Linux”的类型更改为“Linux raid autodetect”</span><br><span class="line">命令(输入 m 获取帮助)：t</span><br><span class="line">分区号 (1-4，默认 4)：3</span><br><span class="line">Hex 代码(输入 L 列出所有代码)：fd</span><br><span class="line">已将分区“Linux”的类型更改为“Linux raid autodetect”</span><br><span class="line">命令(输入 m 获取帮助)：t</span><br><span class="line">分区号 (1-4，默认 4)：</span><br><span class="line">Hex 代码(输入 L 列出所有代码)：fd</span><br><span class="line">已将分区“Linux”的类型更改为“Linux raid autodetect”</span><br><span class="line">命令(输入 m 获取帮助)：w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">正在同步磁盘。</span><br><span class="line">[root@mysql1 ~]# mdadm -C /dev/md5 -l 5 -n 3 -x 1 /dev/vdd1 /dev/vdd2 /dev/vdd3 /dev/vdd4</span><br><span class="line">mdadm: Fail create md5 when using /sys/module/md_mod/parameters/new_array</span><br><span class="line">mdadm: Defaulting to version 1.2 metadata</span><br><span class="line">mdadm: array /dev/md5 started.</span><br><span class="line">[root@mysql1 ~]# lsblk</span><br><span class="line">NAME    MAJ:MIN RM SIZE RO TYPE  MOUNTPOINT</span><br><span class="line">vda     253:0    0  50G  0 disk  </span><br><span class="line">└─vda1  253:1    0  50G  0 part  /</span><br><span class="line">vdb     253:16   0  50G  0 disk  /mnt</span><br><span class="line">vdd     253:48   0  40G  0 disk  </span><br><span class="line">├─vdd1  253:49   0   5G  0 part  </span><br><span class="line">│ └─md5   9:5    0  10G  0 raid5 </span><br><span class="line">├─vdd2  253:50   0   5G  0 part  </span><br><span class="line">│ └─md5   9:5    0  10G  0 raid5 </span><br><span class="line">├─vdd3  253:51   0   5G  0 part  </span><br><span class="line">│ └─md5   9:5    0  10G  0 raid5 </span><br><span class="line">└─vdd4  253:52   0   5G  0 part  </span><br><span class="line">  └─md5   9:5    0  10G  0 raid5 </span><br><span class="line">[root@mysql1 ~]# mdadm -D /dev/md5</span><br><span class="line">/dev/md5:</span><br><span class="line">           Version : 1.2</span><br><span class="line">     Creation Time : Mon May  9 03:40:45 2022</span><br><span class="line">        Raid Level : raid5</span><br><span class="line">        Array Size : 10475520 (9.99 GiB 10.73 GB)</span><br><span class="line">     Used Dev Size : 5237760 (5.00 GiB 5.36 GB)</span><br><span class="line">      Raid Devices : 3</span><br><span class="line">     Total Devices : 4</span><br><span class="line">       Persistence : Superblock is persistent</span><br><span class="line"></span><br><span class="line">       Update Time : Mon May  9 03:41:31 2022</span><br><span class="line">             State : clean </span><br><span class="line">    Active Devices : 3</span><br><span class="line">   Working Devices : 4</span><br><span class="line">    Failed Devices : 0</span><br><span class="line">     Spare Devices : 1</span><br><span class="line">            Layout : left-symmetric</span><br><span class="line">        Chunk Size : 512K</span><br><span class="line"></span><br><span class="line">Consistency Policy : resync</span><br><span class="line"></span><br><span class="line">              Name : mysql1:5  (local to host mysql1)</span><br><span class="line">              UUID : d90bb669:5411f2f1:d6f25855:d80efe7e</span><br><span class="line">            Events : 18</span><br><span class="line">    Number   Major   Minor   RaidDevice State</span><br><span class="line">       0     253       49        0      active sync   /dev/vdd1</span><br><span class="line">       1     253       50        1      active sync   /dev/vdd2</span><br><span class="line">       4     253       51        2      active sync   /dev/vdd3</span><br><span class="line">       3     253       52        -      spare   /dev/vdd4</span><br></pre></td></tr></table></figure>

<p><strong>6.使用提供的OpenStack平台，创建一台云主机，根据提供的软件包，编写一键部署LNMP+WordPress的部署脚本。</strong></p>
<p><strong>7.使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。</strong></p>
<p><strong>8.使用Blazar服务，使得管理员可以在OpenStack中为虚拟（实例，卷等）和物理（主机，存储等）的不同资源类型提供资源预留的能力。</strong></p>
<p><strong>9.使用cloudkitty计费服务，使用noop计费模型处理来自不同监控指标后端的数据并进行计费规则创建。以达到费用核算目的。</strong></p>
<p><strong>10.使用提供的iaas-error5镜像创建云主机，创建后的云主机内有错误的OpenStack平台，错误现象为无法创建用户和项目，请结合报错信息排查错误，使keystone服务可以正常使用，可以正常创建用户与项目。</strong></p>
<h1 id="云计算赛项赛卷6"><a href="#云计算赛项赛卷6" class="headerlink" title="云计算赛项赛卷6"></a>云计算赛项赛卷6</h1><p><strong>1.使用提供的OpenStack私有云平台，修改相关参数对openstack平台进行调优操作，相应的调优操作有：</strong></p>
<p>（1）预留前2个物理CPU，把后面的所有CPU分配给虚拟机使用（假设vcpu为16个）；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf </span><br><span class="line">vcpu_pin_set= 3-16</span><br></pre></td></tr></table></figure>

<p>（2）设置cpu超售比例为4倍；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf </span><br><span class="line">cpu_allocation_ratio=4.0</span><br></pre></td></tr></table></figure>

<p>（3）设置内存超售比例为1.5倍；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf </span><br><span class="line">ram_allocation_ratio=1.5</span><br></pre></td></tr></table></figure>

<p>（4）预留2048mb内存，这部分内存不能被虚拟机使用；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf </span><br><span class="line">reserved_host_memory_mb=2048</span><br></pre></td></tr></table></figure>

<p>（5）预留10240mb磁盘，这部分磁盘不能被虚拟机使用；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf </span><br><span class="line">reserved_host_disk_mb=10240</span><br></pre></td></tr></table></figure>

<p>（6）设置nova服务心跳检查时间为120秒。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf </span><br><span class="line">service_down_time = 120</span><br></pre></td></tr></table></figure>

<p><code>systemctl restart *nova*</code></p>
<p><strong>2.使用OpenStack私有云平台，创建一台云主机，创建完之后对该云主机进行打快照处理，并将该快照保存至&#x2F;root&#x2F;cloudsave目录，保存名字为csccvm.qcow2。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack server image create vm1 --name csccvm</span><br><span class="line">[root@controller ~]# mkdir /root/cloudsave</span><br><span class="line">[root@controller ~]# openstack image save --file /root/cloudsave/csccvm.qcow2 csccvm</span><br></pre></td></tr></table></figure>

<p><strong>3.在提供的OpenStack平台上，使用Swift对象存储服务，修改相应的配置文件，使对象存储Swift作为glance镜像服务的后端存储。</strong></p>
<p> <code>vi /etc/glance/glance-api.conf</code> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[glance_store]</span><br><span class="line">#stores = file,http</span><br><span class="line">#default_store = file</span><br><span class="line">#filesystem_store_datadir = /var/lib/glance/images/</span><br><span class="line">default_store=swift</span><br><span class="line">stores=glance.store.swift.Store</span><br><span class="line">swift_store_auth_address=http://controller:5000/v3.0</span><br><span class="line">swift_store_endpoint_type=internalURL</span><br><span class="line">swift_store_multi_tenant=True</span><br><span class="line">swift_store_admin_tenants=service</span><br><span class="line">swift_store_user=glance</span><br><span class="line">swift_store_key=000000</span><br><span class="line">swift_store_container=glance</span><br><span class="line">swift_store_create_container_on_put=True</span><br></pre></td></tr></table></figure>

<p><code>systemctl restart *glance*</code></p>
<p><strong>4.在提供的OpenStack平台上，编写heat模板createswift.yml文件，模板作用为按照要求创建容器。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat swift.yml </span><br><span class="line">heat_template_version: 2018-03-02</span><br><span class="line">resources:</span><br><span class="line">  swift:</span><br><span class="line">    type: OS::Swift::Container</span><br><span class="line">    properties:</span><br><span class="line">      name: skill</span><br></pre></td></tr></table></figure>

<p><strong>5.使用Blazar服务，使得管理员可以在OpenStack中为虚拟（实例，卷等）和物理（主机，存储等）的不同资源类型提供资源预留的能力。</strong></p>
<p><strong>6.使用cloudkitty计费服务，处理来自不同监控指标后端的数据并进行计费规则创建。以达到费用核算目的。</strong></p>
<p><strong>7.使用OpenStack私有云平台，创建两台云主机vm1和vm2，在这两台云主机上分别安装数据库服务，并配置成主从数据库，vm1节点为主库，vm2节点为从库（数据库密码设置为000000）。</strong></p>
<p>略</p>
<p><strong>8.使用OpenStack私有云平台，创建三台云主机vm1、vm2和vm3，首先使用两台云主机完成MariaDB数据库的主从配置，接着根据提供的数据库中间件Mycat。完成Mycat读写分离数据库的配置安装（逻辑库名称使用“USERDB”，数据库密码使用000000）。</strong></p>
<p>略</p>
<p><strong>9.在OpenStack私有云平台，创建一台云主机，使用提供的软件包，编写脚本，要求可以一键部署nfs服务。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@mycat ~]# cat nfs.sh </span><br><span class="line">#!/bin/bash</span><br><span class="line">yum install -y nfs-utils rpcbind</span><br><span class="line">umount /mnt</span><br><span class="line">mkfs.ext4 /dev/vdb</span><br><span class="line">mount /dev/vdb /mnt</span><br><span class="line">mkdir /mnt/test</span><br><span class="line">echo &#x27;/mnt/test *(rw,async,no_root_squash)&#x27; &gt; /etc/exports</span><br><span class="line">systemctl restart rpcbind</span><br><span class="line">systemctl restart nfs</span><br><span class="line">systemctl enable rpcbind</span><br><span class="line">systemctl enable nfs</span><br></pre></td></tr></table></figure>

<p><strong>10.使用提供的iaas-error6镜像创建云主机，创建后的云主机内有错误的OpenStack平台，错误现象为所有的命令均无法正常使用，请结合报错信息排查错误，使OpenStack平台服务可以正常使用。</strong></p>
<h1 id="云计算赛项赛卷7"><a href="#云计算赛项赛卷7" class="headerlink" title="云计算赛项赛卷7"></a>云计算赛项赛卷7</h1><p><strong>1.在提供的OpenStack平台上，使用Cinder块存储服务，创建块存储卷，并使用该卷连接到云主机。</strong></p>
<p>略</p>
<p><strong>2.在提供的OpenStack平台上，编写heat模板createuser.yml文件，模板作用为按照要求创建项目与用户，并赋予用户admin权限。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat user.yml </span><br><span class="line">heat_template_version: 2018-03-02</span><br><span class="line">resources:</span><br><span class="line">  user:</span><br><span class="line">    type: OS::Keystone::User</span><br><span class="line">    properties:</span><br><span class="line">      name: heat-user</span><br><span class="line">      password: 000000</span><br><span class="line">      domain: demo</span><br><span class="line">      default_project: admin</span><br><span class="line">      roles: [&#123;&quot;role&quot;:&quot;admin&quot;,&quot;project&quot;:&quot;admin&quot;&#125;]</span><br></pre></td></tr></table></figure>

<p><strong>3.在提供的OpenStack平台上，上传cirros镜像，要求启动该镜像起码需要1G内存和10G硬盘。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack image create cirros1 --min-disk 10 --min-ram 1024 --disk-format qcow2 --container-format bare &lt; cirros-0.3.4-x86_64-disk.img </span><br><span class="line">+------------------+------------------------------------------------------+</span><br><span class="line">| Field            | Value                                                |</span><br><span class="line">+------------------+------------------------------------------------------+</span><br><span class="line">| checksum         | ee1eca47dc88f4879d8a229cc70a07c6                     |</span><br><span class="line">| container_format | bare                                                 |</span><br><span class="line">| created_at       | 2022-05-09T05:16:23Z                                 |</span><br><span class="line">| disk_format      | qcow2                                                |</span><br><span class="line">| file             | /v2/images/0621890a-626c-485e-b6e6-db8bbee96898/file |</span><br><span class="line">| id               | 0621890a-626c-485e-b6e6-db8bbee96898                 |</span><br><span class="line">| min_disk         | 10                                                   |</span><br><span class="line">| min_ram          | 1024                                                 |</span><br><span class="line">| name             | cirros1                                              |</span><br><span class="line">| owner            | 0047a899f1b34aaba102c89bf5dbeab4                     |</span><br><span class="line">| protected        | False                                                |</span><br><span class="line">| schema           | /v2/schemas/image                                    |</span><br><span class="line">| size             | 13287936                                             |</span><br><span class="line">| status           | active                                               |</span><br><span class="line">| tags             |                                                      |</span><br><span class="line">| updated_at       | 2022-05-09T05:16:24Z                                 |</span><br><span class="line">| virtual_size     | None                                                 |</span><br><span class="line">| visibility       | shared                                               |</span><br><span class="line">+------------------+------------------------------------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>4.使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。</strong></p>
<p><strong>5.使用Blazar服务，使得管理员可以在OpenStack中为虚拟（实例，卷等）和物理（主机，存储等）的不同资源类型提供资源预留的能力。</strong></p>
<p><strong>6.使用cloudkitty计费服务，处理来自不同监控指标后端的数据并进行计费规则创建。以达到费用核算目的。</strong></p>
<p><strong>7.在OpenStack私有云平台，创建一台云主机，编写定时任务脚本，要求可以在每个星期的周三晚上11点，定时自动备份数据库。</strong></p>
<p><strong>8.在OpenStack私有云平台，创建一台云主机，并创建一个40G大小的cinder块存储，将块存储连接到云主机，然后在云主机上对云硬盘进行操作。要求分出三个大小为5G的分区，使用这三个分区，创建名chinaskill-vg的卷组。然后创建名chinaskill-lv的逻辑卷，大小为12G。</strong></p>
<p><code>yum install openstack-cinder -y</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# fdisk /dev/vdb</span><br><span class="line">欢迎使用 fdisk (util-linux 2.23.2)。</span><br><span class="line">更改将停留在内存中，直到您决定将更改写入磁盘。</span><br><span class="line">使用写入命令前请三思。</span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">使用磁盘标识符 0x1ef41573 创建新的 DOS 磁盘标签。</span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): </span><br><span class="line">Using default response p</span><br><span class="line">分区号 (1-4，默认 1)：</span><br><span class="line">起始 扇区 (2048-83886079，默认为 2048)：</span><br><span class="line">将使用默认值 2048</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (2048-83886079，默认为 83886079)：+5G</span><br><span class="line">分区 1 已设置为 Linux 类型，大小设为 5 GiB</span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (1 primary, 0 extended, 3 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): </span><br><span class="line">Using default response p</span><br><span class="line">分区号 (2-4，默认 2)：</span><br><span class="line">起始 扇区 (10487808-83886079，默认为 10487808)：</span><br><span class="line">将使用默认值 10487808</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (10487808-83886079，默认为 83886079)：+5G</span><br><span class="line">分区 2 已设置为 Linux 类型，大小设为 5 GiB</span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (2 primary, 0 extended, 2 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): </span><br><span class="line">Using default response p</span><br><span class="line">分区号 (3,4，默认 3)：</span><br><span class="line">起始 扇区 (20973568-83886079，默认为 20973568)：</span><br><span class="line">将使用默认值 20973568</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (20973568-83886079，默认为 83886079)：+5G</span><br><span class="line">分区 3 已设置为 Linux 类型，大小设为 5 GiB</span><br><span class="line">命令(输入 m 获取帮助)：w</span><br><span class="line">The partition table has been altered!</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">正在同步磁盘。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# vgcreate chinaskill-vg /dev/vdb1 /dev/vdb2 /dev/vdb3</span><br><span class="line">  Physical volume &quot;/dev/vdb1&quot; successfully created.</span><br><span class="line">  Physical volume &quot;/dev/vdb2&quot; successfully created.</span><br><span class="line">  Physical volume &quot;/dev/vdb3&quot; successfully created.</span><br><span class="line">  Volume group &quot;chinaskill-vg&quot; successfully created</span><br></pre></td></tr></table></figure>

<p><strong>9.使用OpenStack私有云平台，创建三个云主机，使用提供的软件包安装RabbitMQ服务，安装完毕后，搭建RabbitMQ集群，并打开RabbitMQ服务的图形化监控页面插件。集群使用普通集群模式，其中第一台做磁盘节点，另外两台做内存节点。</strong></p>
<p>略</p>
<p><strong>10.使用提供的iaas-error7镜像创建云主机，创建后的云主机内有错误的OpenStack平台，错误现象为neutron网络命令无法正常使用，请结合报错信息排查错误，使neutron服务可以正常使用。</strong></p>
<h1 id="云计算赛项赛卷8"><a href="#云计算赛项赛卷8" class="headerlink" title="云计算赛项赛卷8"></a><strong>云计算赛项赛卷8</strong></h1><p><strong>1.使用提供的OpenStack私有云平台，修改普通用户权限，使普通用户不能对镜像进行创建和删除操作。</strong></p>
<p><strong>2.在提供的OpenStack私有云平台上，在&#x2F;root目录下编写Heat模板create_user.yaml，创建名为heat-user的用户，属于admin项目，并赋予heat-user用户admin的权限，配置用户密码为123456。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat user.yml </span><br><span class="line">heat_template_version: 2018-03-02</span><br><span class="line">resources:</span><br><span class="line">  user:</span><br><span class="line">    type: OS::Keystone::User</span><br><span class="line">    properties:</span><br><span class="line">      name: heat-user</span><br><span class="line">      password: 000000</span><br><span class="line">      domain: demo</span><br><span class="line">      default_project: admin</span><br><span class="line">      roles: [&#123;&quot;role&quot;:&quot;admin&quot;,&quot;project&quot;:&quot;admin&quot;&#125;]</span><br></pre></td></tr></table></figure>

<p><strong>3.使用提供的OpenStack私有云平台，优化KVM的I&#x2F;O调度算法，将默认的deadline修改为none模式。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# echo none &gt; /sys/block/vda/queue/scheduler </span><br><span class="line">[root@controller ~]# cat /sys/block/vda/queue/scheduler </span><br><span class="line">[none] mq-deadline kyber </span><br></pre></td></tr></table></figure>

<p><strong>4.在提供的OpenStack私有云平台，创建一台云主机，配置该主机为nfs的server端，将该云主机中的&#x2F;mnt&#x2F;test目录进行共享（目录不存在可自行创建）。然后配置controller节点为nfs的client端，要求将&#x2F;mnt&#x2F;test目录作为glance后端存储的挂载目录。</strong></p>
<p>略</p>
<p><strong>5.使用提供的OpenStack私有云平台，申请三台云主机，使用提供的http源，在两个节点自行安装redis服务并启动，配置redis的访问需要密码，密码设置为123456。然后将这三个redis节点配置为redis的一主二从三哨兵架构</strong></p>
<p>主节点：</p>
<p><code>yum install -y redis</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/redis.conf </span><br><span class="line">bind 0.0.0.0</span><br><span class="line">protected-mode no</span><br><span class="line">daemonize yes</span><br><span class="line">masterauth 123456</span><br><span class="line">requirepass 123456</span><br></pre></td></tr></table></figure>

<p><code>systemctl restart redis</code></p>
<p><code>systemctl enable  redis</code></p>
<p>从节点1：</p>
<p><code>yum install -y redis</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/redis.conf</span><br><span class="line">bind 0.0.0.0</span><br><span class="line">protected-mode no</span><br><span class="line">daemonize yes</span><br><span class="line">slaveof 192.168.20.104 6379</span><br><span class="line">masterauth 123456</span><br><span class="line">requirepass 123456</span><br></pre></td></tr></table></figure>

<p><code>systemctl restart redis</code></p>
<p><code>systemctl enable  redis</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@redis-2 ~]# redis-cli </span><br><span class="line">127.0.0.1:6379&gt; info</span><br><span class="line">.................</span><br><span class="line"># Replication</span><br><span class="line">role:slave</span><br><span class="line">master_host:192.168.20.104</span><br><span class="line">master_port:6379</span><br><span class="line">master_link_status:up</span><br><span class="line">master_last_io_seconds_ago:7</span><br><span class="line">master_sync_in_progress:0</span><br><span class="line">slave_repl_offset:589</span><br><span class="line">slave_priority:100</span><br><span class="line">slave_read_only:1</span><br><span class="line">connected_slaves:0</span><br><span class="line">master_repl_offset:0</span><br><span class="line">repl_backlog_active:0</span><br><span class="line">repl_backlog_size:1048576</span><br><span class="line">repl_backlog_first_byte_offset:0</span><br><span class="line">repl_backlog_histlen:0</span><br><span class="line">....................</span><br></pre></td></tr></table></figure>

<p>从节点2：</p>
<p><code>yum install -y redis</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/redis.conf</span><br><span class="line">bind 0.0.0.0</span><br><span class="line">protected-mode no</span><br><span class="line">daemonize yes</span><br><span class="line">slaveof 192.168.20.104 6379</span><br><span class="line">masterauth 123456</span><br><span class="line">requirepass 123456</span><br></pre></td></tr></table></figure>

<p><code>systemctl restart redis</code></p>
<p><code>systemctl enable  redis</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@redis-3 ~]# redis-cli </span><br><span class="line">127.0.0.1:6379&gt; info</span><br><span class="line">.................</span><br><span class="line"># Replication</span><br><span class="line">role:slave</span><br><span class="line">master_host:192.168.20.104</span><br><span class="line">master_port:6379</span><br><span class="line">master_link_status:up</span><br><span class="line">master_last_io_seconds_ago:7</span><br><span class="line">master_sync_in_progress:0</span><br><span class="line">slave_repl_offset:589</span><br><span class="line">slave_priority:100</span><br><span class="line">slave_read_only:1</span><br><span class="line">connected_slaves:0</span><br><span class="line">master_repl_offset:0</span><br><span class="line">repl_backlog_active:0</span><br><span class="line">repl_backlog_size:1048576</span><br><span class="line">repl_backlog_first_byte_offset:0</span><br><span class="line">repl_backlog_histlen:0</span><br><span class="line">....................</span><br></pre></td></tr></table></figure>

<p>1、哨兵模式搭建：<br>哨兵模式需要修改sentinel.conf文件，三台服务器均为此配置</p>
<p><code>vi /etc/redis-sentinel.conf</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">端口默认为26379。</span><br><span class="line">port 26379</span><br><span class="line">关闭保护模式，可以外部访问。</span><br><span class="line">protected-mode no</span><br><span class="line">设置为后台启动。</span><br><span class="line">daemonize yes</span><br><span class="line">指定主机IP地址和端口(三台配置均为指定主机ip)，并且指定当有2台哨兵认为主机宕机，则对主机进行容灾切换。mymaster：设置master名字，必须在其它有用到该名字的命令之前设置</span><br><span class="line">sentinel monitor mymaster 192.168.20.104 6379 2</span><br><span class="line">当在Redis实例中开启了requirepass，这里就需要提供密码。</span><br><span class="line">sentinel auth-pass mymaster 123456</span><br><span class="line">这里设置了主机多少秒无响应，则认为挂了。此处3秒</span><br><span class="line">sentinel down-after-milliseconds mymaster 3000</span><br><span class="line">主备切换时，最多有多少个slave同时对新的master进行同步，这里设置为默认的1。</span><br><span class="line">snetinel parallel-syncs mymaster 1</span><br><span class="line">故障转移的超时时间，这里设置为三分钟。</span><br><span class="line">sentinel failover-timeout mymaster 180000</span><br></pre></td></tr></table></figure>

<p><strong>启动哨兵模式</strong></p>
<p><code>redis-sentinel /etc/redis-sentinel.conf</code></p>
<p><strong>6.使用提供的OpenStack私有云平台，申请三台云主机，分别命令为node1、node2、node3，使用提供的软件包，在这三个节点上安装数据库服务，数据库密码设置为123456。将这三个节点配置为数据库高可用集群即MariaDB_Galera_Cluster。</strong></p>
<p><strong>7.使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。</strong></p>
<p><strong>8.使用Blazar服务，使得管理员可以在OpenStack中为虚拟（实例，卷等）和物理（主机，存储等）的不同资源类型提供资源预留的能力。</strong></p>
<p><strong>9.使用cloudkitty计费服务，使用hashmap计费模型处理来自不同监控指标后端的数据并进行计费规则创建。以达到费用核算目的。</strong></p>
<p><strong>10.使用提供的iaas-error8镜像创建云主机，创建后的云主机内有错误的OpenStack平台，错误现象为上传镜像一直处于pending状态，请结合报错信息排查错误，使glance服务可以正常使用。</strong></p>
<h1 id="云计算赛项赛卷9"><a href="#云计算赛项赛卷9" class="headerlink" title="云计算赛项赛卷9"></a>云计算赛项赛卷9</h1><p><strong>1.OpenStack各服务内部通信都是通过RPC来交互，各agent都需要去连接RabbitMQ；随着各服务agent增多，MQ的连接数会随之增多，最终可能会到达上限，成为瓶颈。使用提供的OpenStack私有云平台，通过修改limits.conf配置文件来修改RabbitMQ服务的最大连接数为10240。</strong></p>
<p>略</p>
<p><strong>2.在提供的OpenStack私有云平台上，在&#x2F;root目录下编写Heat模板create_net.yaml，创建名为Heat-Network网络，选择不共享；创建子网名为Heat-Subnet，子网网段设置为10.20.2.0&#x2F;24，开启DHCP服务，地址池为10.20.2.20-10.20.2.100。</strong></p>
<p>略</p>
<p><strong>3.使用提供的OpenStack私有云平台，申请三台云主机，分别命令为node1、node2、node3，使用提供的软件包，在这三个节点上安装数据库服务，数据库密码设置为123456。将这三个节点配置为数据库高可用集群即MariaDB_Galera_Cluster。</strong></p>
<p><strong>4.使用上一题配置完成的数据库集群，使用提供的mariadb-repo.tar.gz软件包，安装haproxy负载均衡服务。配置node1节点为负载均衡的窗口，配置负载均衡为轮询算法；HA服务监听的端口为node1节点的3307端口；配置访问三个节点的权重依次为1,2,4。</strong></p>
<p><strong>5.在OpenStack私有云平台，创建一台云主机，编写脚本，使得可以一键部署ELK系统。</strong></p>
<p><strong>6.在提供的OpenStack平台上，上传cirros镜像，并对该镜像打上一个test的标签。</strong></p>
<p><code>openstack image set cirros --tag test</code></p>
<p><strong>7.使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。</strong></p>
<p><strong>8.使用Blazar服务，使得管理员可以在OpenStack中为虚拟（实例，卷等）和物理（主机，存储等）的不同资源类型提供资源预留的能力。</strong></p>
<p><strong>9.使用cloudkitty计费服务，处理来自不同监控指标后端的数据并进行计费规则创建。以达到费用核算目的。</strong></p>
<p><strong>10.使用提供的iaas-error9镜像创建云主机，创建后的云主机内有错误的OpenStack平台，错误现象为cinder服务因创建的卷太多，无法满足使用，请结合报错信息排查错误，扩容cinder存储池，使cinder服务可以正常使用。</strong></p>
<h1 id="云计算赛项赛卷10"><a href="#云计算赛项赛卷10" class="headerlink" title="云计算赛项赛卷10"></a>云计算赛项赛卷10</h1><p><strong>1.在提供的OpenStack平台上，通过nova的相关命令创建云主机类型，名字exam，ID为1234，内存为1024，硬盘为20G，虚拟内核数量为2。并修改云平台中默认每个tenant的实例配额为20个。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# nova flavor-create --is-public true exam 1234 1024 20 2</span><br><span class="line">+------+------+-----------+------+-----------+------+-------+-------------+-----------+-------------+</span><br><span class="line">| ID   | Name | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | Description |</span><br><span class="line">+------+------+-----------+------+-----------+------+-------+-------------+-----------+-------------+</span><br><span class="line">| 1234 | exam | 1024      | 20   | 0         |      | 2     | 1.0         | True      | -           |</span><br><span class="line">+------+------+-----------+------+-----------+------+-------+-------------+-----------+-------------+</span><br></pre></td></tr></table></figure>

<p><strong>2.在提供的OpenStack平台上，使用Zun组件创建容器。</strong></p>
<p><strong>3.在日常运维管理中，安装包的依赖关系冲突是经常存在的。在控制节点，安装libguestfs-tools工具的时候，会发生依赖包的冲突，请解决依赖关系的报错，完成libguestfs-tools工具的安装。</strong></p>
<p><strong>4.使用提供的OpenStack私有云平台，假设在使用过程中，发现该创建的云主机配置太低，需要调整，请修改相应配置，将dashboard界面上的云主机调整实例大小可以使用。</strong></p>
<p><strong>5.在提供的OpenStack平台上，使用ceilometer相关命令，修改名称为cpu_hi的告警状态为不生效。</strong></p>
<p><strong>6.使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。</strong></p>
<p><strong>7.使用Blazar服务，使得管理员可以在OpenStack中为虚拟（实例，卷等）和物理（主机，存储等）的不同资源类型提供资源预留的能力。</strong></p>
<p><strong>8.使用cloudkitty计费服务，处理来自不同监控指标后端的数据并进行计费规则创建。以达到费用核算目的。</strong></p>
<p><strong>9.在OpenStack私有云平台，创建一台云主机，编写脚本，要求可以完成数据库的定期备份，把数据库备份文件存放在&#x2F;opt目录下，要求每个备份文件都已时间命名，并只保留一个月的备份文件，超过一个月的自动删除。</strong></p>
<p><strong>10.使用提供的iaas-error10镜像创建云主机，创建后的云主机内有错误的OpenStack平台，错误现象为安全组策略无法正常使用，请结合报错信息排查错误，使安全组可以正常使用。</strong></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/05/16/k8s%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0day1/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          k8s学习日记day1
        
      </div>
    </a>
  
  
    <a href="/2022/04/22/%E4%BA%91%E8%AE%A1%E7%AE%97-%E7%A7%81%E6%9C%89%E4%BA%91/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">云计算-私有云</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>






</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2023 Miss
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/preccrep/hexo-theme-jelly" target="_blank">Jelly</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="/js/main.js"></script>




  </div>
</body>
</html>