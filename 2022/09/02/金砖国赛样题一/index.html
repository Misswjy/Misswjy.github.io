<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>金砖国赛样题 | Misswjy&#39;Blog</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="2022金砖国家职业技能大赛样题A 场次题目：OpenStack 平台部署与运维">
<meta property="og:type" content="article">
<meta property="og:title" content="金砖国赛样题">
<meta property="og:url" content="http://example.com/2022/09/02/%E9%87%91%E7%A0%96%E5%9B%BD%E8%B5%9B%E6%A0%B7%E9%A2%98%E4%B8%80/index.html">
<meta property="og:site_name" content="Misswjy&#39;Blog">
<meta property="og:description" content="2022金砖国家职业技能大赛样题A 场次题目：OpenStack 平台部署与运维">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-09-02T01:58:50.000Z">
<meta property="article:modified_time" content="2022-09-26T08:21:22.000Z">
<meta property="article:author" content="Miss">
<meta property="article:tag" content="私有云">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Misswjy&#39;Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  

  
<script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>

  
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  
<meta name="generator" content="Hexo 6.1.0"></head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
				<img lazy-src="/img/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
			<h1 class="header-author"><a href="/">Miss</a></h1>
		</hgroup>

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Home</a></li>
				        
							<li><a href="/archives">Archives</a></li>
				        
						</ul>
					</nav>
					<nav class="half-header-menu">
						<a class="hide">Home</a>
						<a>Tags</a>
						<a>Links</a>
						<a>About</a>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Misswjy" title="github">github</a>
					        
								<a class="mail" target="_blank" href="/dockery@foxmail.com" title="mail">mail</a>
					        
								<a class="bilibili" target="_blank" href="https://space.bilibili.com/292671654" title="bilibili">bilibili</a>
					        
						</div>
						<!-- music -->
						
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/k8s/" style="font-size: 15px;">k8s</a> <a href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/" style="font-size: 12.5px;">云计算</a> <a href="/tags/%E5%AE%B9%E5%99%A8%E4%BA%91/" style="font-size: 17.5px;">容器云</a> <a href="/tags/%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2%E5%92%8C%E8%BF%90%E7%BB%B4/" style="font-size: 10px;">应用部署和运维</a> <a href="/tags/%E7%A7%81%E6%9C%89%E4%BA%91/" style="font-size: 20px;">私有云</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/">github</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">I&#39;m a developer.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/avatar.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Home</a></li>
		        
					<li><a href="/archives">Archives</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Misswjy" title="github">github</a>
			        
						<a class="mail" target="_blank" href="/dockery@foxmail.com" title="mail">mail</a>
			        
						<a class="bilibili" target="_blank" href="https://space.bilibili.com/292671654" title="bilibili">bilibili</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-金砖国赛样题一" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/09/02/%E9%87%91%E7%A0%96%E5%9B%BD%E8%B5%9B%E6%A0%B7%E9%A2%98%E4%B8%80/" class="article-date">
  	<time datetime="2022-09-02T01:58:50.000Z" itemprop="datePublished">2022-09-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      金砖国赛样题
      
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%A7%81%E6%9C%89%E4%BA%91/" rel="tag">私有云</a></li></ul>
	</div>

        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="2022金砖国家职业技能大赛样题"><a href="#2022金砖国家职业技能大赛样题" class="headerlink" title="2022金砖国家职业技能大赛样题"></a>2022金砖国家职业技能大赛样题</h1><h2 id="A-场次题目：OpenStack-平台部署与运维"><a href="#A-场次题目：OpenStack-平台部署与运维" class="headerlink" title="A 场次题目：OpenStack 平台部署与运维"></a><strong>A 场次题目：OpenStack 平台部署与运维</strong><span id="more"></span></h2><h3 id="任务-1-私有云平台环境初始化（5-分）"><a href="#任务-1-私有云平台环境初始化（5-分）" class="headerlink" title="任务 1 私有云平台环境初始化（5 分）"></a>任务 1 私有云平台环境初始化（5 分）</h3><p>1.初始化操作系统 使用提供的用户名密码，登录竞赛云平台。根据表 1 中的 IP 地址规划，设 置各服务器节点的 IP 地址，确保网络正常通信，设置控制节点主机名为 Contro ller，计算节点主机名为 Compute，并修改 hosts 文件将 IP 地址映射为主机名， 关闭防火墙并设置为开机不启动，设置 SELinux 为 Permissive 模式并设置永久 关闭。请查看控制节点和计算节点主机名，使用命令查看 SELinux 状态，使用 head 命令、tail 命令和 cut 命令提取出永久关闭 SELinux 的关键信息。 将以上命令及返回结果提交到答题框。【2 分】 </p>
<p><strong>配置hosts</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/hosts</span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line"></span><br><span class="line">192.168.20.105	controller</span><br><span class="line">192.168.20.103	compute</span><br></pre></td></tr></table></figure>

<p><strong>关闭防火墙并设置为开机不启动</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl stop firewalld</span><br><span class="line">[root@controller ~]# systemctl disable firewalld</span><br></pre></td></tr></table></figure>

<p><strong>设置 SELinux 为 Permissive 模式并设置永久 关闭</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# setenforce 0</span><br><span class="line">[root@controller ~]# sed -i &#x27;s/SELINUX=permissive/SELINUX=disabled/g&#x27; /etc/selinux/config</span><br></pre></td></tr></table></figure>

<p><strong>使用命令查看 SELinux 状态</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# getenforce </span><br><span class="line">Disabled</span><br></pre></td></tr></table></figure>

<p>2.挂载安装光盘镜像 将提供的 CentOS-7-x86_64-DVD-1804.iso 和 chinaskills_cloud_iaas.iso 光盘镜像上传到 Controller 节点 &#x2F;root 目录下，然后在 &#x2F;opt 目录下使用一条 命令创建&#x2F;centos 目录和&#x2F;iaas 目录，并将镜像文件 CentOS-7-x86_64-DVD-1804. iso 挂载到 &#x2F;centos 目录下，将镜像文件 chinaskills_cloud_iaas.iso 挂载到 &#x2F;iaas 目录下。 请将以上命令及返回结果返回到答题框。【1 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# curl -O http://172.19.25.11/middle/CentOS-7-x86_64-DVD-1804.iso</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100 4263M  100 4263M    0     0   111M      0  0:00:38  0:00:38 --:--:--  111M</span><br><span class="line">[root@controller ~]# curl -O http://172.19.25.11/middle/chinaskills_cloud_iaas_v1.0.1.iso</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100 3622M  100 3622M    0     0   111M      0  0:00:32  0:00:32 --:--:--  109M</span><br><span class="line">[root@controller ~]# ls</span><br><span class="line">CentOS-7-x86_64-DVD-1804.iso  chinaskills_cloud_iaas_v1.0.1.iso</span><br><span class="line">[root@controller ~]# mount CentOS-7-x86_64-DVD-1804.iso /mnt/</span><br><span class="line">mount: /dev/loop0 is write-protected, mounting read-only</span><br><span class="line">[root@controller ~]# mkdir -p /opt/centos</span><br><span class="line">[root@controller ~]# mkdir -p /opt/iaas</span><br><span class="line">[root@controller ~]# cp -rf /mnt/* /opt/centos/</span><br><span class="line">[root@controller ~]# umount /mnt/</span><br><span class="line">[root@controller ~]# mount chinaskills_cloud_iaas_v1.0.1.iso /mnt/</span><br><span class="line">mount: /dev/loop0 is write-protected, mounting read-only</span><br><span class="line">[root@controller ~]# cp -rf /mnt/* /opt/iaas/</span><br><span class="line">[root@controller ~]# umount /mnt/</span><br></pre></td></tr></table></figure>

<p>3.搭建文件共享服务器 在 Controller 节点上安装 vsftp 服务器，设置开机自启动，请将以上命令 及返回结果提交到答题框。【0.5 分】</p>
<p><strong>配置yum源</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/yum.repos.d/local.repo </span><br><span class="line">[centos]</span><br><span class="line">name=centos</span><br><span class="line">baseurl=file:///opt/centos</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">[iaas]</span><br><span class="line">name=iaas</span><br><span class="line">baseurl=file:///opt/iaas/iaas-repo</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure>

<p><strong>安装vsftpd</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install -y vsftpd</span><br></pre></td></tr></table></figure>

<p><strong>设置开机自启动</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# systemctl enable vsftpd</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/vsftpd.service to /usr/lib/systemd/system/vsftpd.service.</span><br></pre></td></tr></table></figure>

<p>4.设置 yum 源 将 ftp 仓库设置为 &#x2F;opt&#x2F;，为 controller 节点设置本地 yum 源，yum 源文 件名为 local.repo；为 compute 配置 ftp 源，yum 源文件名称为 ftp.repo，其 中 ftp 服务器地址为 controller 节点 IP。 请将两个节点的 yum 源文件内容提交到答题框。【0.5 分】</p>
<p><strong>设置 yum 源 将 ftp 仓库设置为 &#x2F;opt&#x2F;</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# echo anon_root=/opt/ &gt;&gt; /etc/vsftpd/vsftpd.conf </span><br><span class="line">[root@controller ~]# systemctl restart vsftpd</span><br></pre></td></tr></table></figure>

<p><strong>为 compute 配置 ftp 源，yum 源文件名称为 ftp.repo</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# cat /etc/yum.repos.d/ftp.repo </span><br><span class="line">[centos]</span><br><span class="line">name=centos</span><br><span class="line">baseurl=ftp://controller/centos</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">[iaas]</span><br><span class="line">name=iaas</span><br><span class="line">baseurl=ftp://controller/iaas/iaas-repo</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure>

<p>5.部署时间同步服务器 在 Controller 节点上部署 chrony 服务器，允许其他节点同步时间，启动服 务并设置为开机启动；在 compute 节点上指定 controller 节点为上游 NTP 服务 器，重启服务并设为开机启动。 请在控制节点上使用 chronyc 命令同步控制节点的系统时间。【1 分】</p>
<p><strong>controller配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/chrony.conf</span><br><span class="line"></span><br><span class="line"># Use public servers from the pool.ntp.org project.</span><br><span class="line"></span><br><span class="line"># Please consider joining the pool (http://www.pool.ntp.org/join.html).</span><br><span class="line"></span><br><span class="line">#server 0.centos.pool.ntp.org iburst</span><br><span class="line">#server 1.centos.pool.ntp.org iburst</span><br><span class="line">#server 2.centos.pool.ntp.org iburst</span><br><span class="line">#server 3.centos.pool.ntp.org iburst</span><br><span class="line">server controller iburst</span><br><span class="line"></span><br><span class="line"># Record the rate at which the system clock gains/losses time.</span><br><span class="line"></span><br><span class="line">driftfile /var/lib/chrony/drift</span><br><span class="line"></span><br><span class="line"># Allow the system clock to be stepped in the first three updates</span><br><span class="line"></span><br><span class="line"># if its offset is larger than 1 second.</span><br><span class="line"></span><br><span class="line">makestep 1.0 3</span><br><span class="line"></span><br><span class="line"># Enable kernel synchronization of the real-time clock (RTC).</span><br><span class="line"></span><br><span class="line">rtcsync</span><br><span class="line"></span><br><span class="line"># Enable hardware timestamping on all interfaces that support it.</span><br><span class="line"></span><br><span class="line">#hwtimestamp *</span><br><span class="line"></span><br><span class="line"># Increase the minimum number of selectable sources required to adjust</span><br><span class="line"></span><br><span class="line"># the system clock.</span><br><span class="line"></span><br><span class="line">#minsources 2</span><br><span class="line"></span><br><span class="line"># Allow NTP client access from local network.</span><br><span class="line"></span><br><span class="line">#allow 192.168.0.0/16</span><br><span class="line"></span><br><span class="line"># Serve time even if not synchronized to a time source.</span><br><span class="line"></span><br><span class="line">#local stratum 10</span><br><span class="line"></span><br><span class="line"># Specify file containing keys for NTP authentication.</span><br><span class="line"></span><br><span class="line">#keyfile /etc/chrony.keys</span><br><span class="line"></span><br><span class="line"># Specify directory for log files.</span><br><span class="line"></span><br><span class="line">logdir /var/log/chrony</span><br><span class="line"></span><br><span class="line"># Select which information is logged.</span><br><span class="line"></span><br><span class="line">#log measurements statistics tracking</span><br><span class="line">allow 192.168.20.0/24</span><br><span class="line">local stratum 10</span><br></pre></td></tr></table></figure>

<p><strong>启动服 务并设置为开机启动</strong></p>
<p>[root@controller ~]# systemctl restart chronyd<br>[root@controller ~]# systemctl enable chronyd</p>
<p><strong>compute节点配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# cat /etc/chrony.conf </span><br><span class="line"></span><br><span class="line"># Use public servers from the pool.ntp.org project.</span><br><span class="line"></span><br><span class="line"># Please consider joining the pool (http://www.pool.ntp.org/join.html).</span><br><span class="line"></span><br><span class="line">#server 0.centos.pool.ntp.org iburst</span><br><span class="line">#server 1.centos.pool.ntp.org iburst</span><br><span class="line">#server 2.centos.pool.ntp.org iburst</span><br><span class="line">#server 3.centos.pool.ntp.org iburst</span><br><span class="line">server controller iburst</span><br><span class="line"></span><br><span class="line"># Record the rate at which the system clock gains/losses time.</span><br><span class="line"></span><br><span class="line">driftfile /var/lib/chrony/drift</span><br><span class="line"></span><br><span class="line"># Allow the system clock to be stepped in the first three updates</span><br><span class="line"></span><br><span class="line"># if its offset is larger than 1 second.</span><br><span class="line"></span><br><span class="line">makestep 1.0 3</span><br><span class="line"></span><br><span class="line"># Enable kernel synchronization of the real-time clock (RTC).</span><br><span class="line"></span><br><span class="line">rtcsync</span><br><span class="line"></span><br><span class="line"># Enable hardware timestamping on all interfaces that support it.</span><br><span class="line"></span><br><span class="line">#hwtimestamp *</span><br><span class="line"></span><br><span class="line"># Increase the minimum number of selectable sources required to adjust</span><br><span class="line"></span><br><span class="line"># the system clock.</span><br><span class="line"></span><br><span class="line">#minsources 2</span><br><span class="line"></span><br><span class="line"># Allow NTP client access from local network.</span><br><span class="line"></span><br><span class="line">#allow 192.168.0.0/16</span><br><span class="line"></span><br><span class="line"># Serve time even if not synchronized to a time source.</span><br><span class="line"></span><br><span class="line">#local stratum 10</span><br><span class="line"></span><br><span class="line"># Specify file containing keys for NTP authentication.</span><br><span class="line"></span><br><span class="line">#keyfile /etc/chrony.keys</span><br><span class="line"></span><br><span class="line"># Specify directory for log files.</span><br><span class="line"></span><br><span class="line">logdir /var/log/chrony</span><br><span class="line"></span><br><span class="line"># Select which information is logged.</span><br><span class="line"></span><br><span class="line">#log measurements statistics tracking</span><br></pre></td></tr></table></figure>

<p><strong>启动服 务并设置为开机启动</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# systemctl restart chronyd</span><br><span class="line">[root@compute ~]# systemctl enable chronyd</span><br></pre></td></tr></table></figure>

<h3 id="任务-2-OpenStack-搭建任务（10-分）"><a href="#任务-2-OpenStack-搭建任务（10-分）" class="headerlink" title="任务 2 OpenStack 搭建任务（10 分）"></a>任务 2 OpenStack 搭建任务（10 分）</h3><p>1.修改变量文件 在控制节点和计算节点上分别安装 iaas-xiandian 软件包，修改配置脚本文件中基本变量（配置脚本文件为&#x2F;etc&#x2F;xiandian&#x2F;openrc.sh）。修改完成后使用 命令生效该变量文件，然后执行 echo $INTERFACE_IP 命令。 请将命令和返回结果提交到答题框。【0.5 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install -y iaas-xiandian</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# yum install -y iaas-xiandian</span><br></pre></td></tr></table></figure>

<p><strong>修改脚本 注意两个节点都要</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/xiandian/openrc.sh </span><br><span class="line">#--------------------system Config--------------------##</span><br><span class="line">#Controller Server Manager IP. example:x.x.x.x</span><br><span class="line">HOST_IP=192.168.20.105</span><br><span class="line"></span><br><span class="line">#Controller HOST Password. example:000000 </span><br><span class="line">HOST_PASS=000000</span><br><span class="line"></span><br><span class="line">#Controller Server hostname. example:controller</span><br><span class="line">HOST_NAME=controller</span><br><span class="line"></span><br><span class="line">#Compute Node Manager IP. example:x.x.x.x</span><br><span class="line">HOST_IP_NODE=192.168.20.103</span><br><span class="line"></span><br><span class="line">#Compute HOST Password. example:000000 </span><br><span class="line">HOST_PASS_NODE=000000</span><br><span class="line"></span><br><span class="line">#Compute Node hostname. example:compute</span><br><span class="line">HOST_NAME_NODE=compute</span><br><span class="line"></span><br><span class="line">#--------------------Chrony Config-------------------##</span><br><span class="line">#Controller network segment IP.  example:x.x.0.0/16(x.x.x.0/24)</span><br><span class="line">network_segment_IP=192.168.20.0/24</span><br><span class="line"></span><br><span class="line">#--------------------Rabbit Config ------------------##</span><br><span class="line">#user for rabbit. example:openstack</span><br><span class="line">RABBIT_USER=openstack</span><br><span class="line"></span><br><span class="line">#Password for rabbit user .example:000000</span><br><span class="line">RABBIT_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------MySQL Config---------------------##</span><br><span class="line">#Password for MySQL root user . exmaple:000000</span><br><span class="line">DB_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Keystone Config------------------##</span><br><span class="line">#Password for Keystore admin user. exmaple:000000</span><br><span class="line">DOMAIN_NAME=demo</span><br><span class="line">ADMIN_PASS=000000</span><br><span class="line">DEMO_PASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Mysql keystore user. exmaple:000000</span><br><span class="line">KEYSTONE_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Glance Config--------------------##</span><br><span class="line">#Password for Mysql glance user. exmaple:000000</span><br><span class="line">GLANCE_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore glance user. exmaple:000000</span><br><span class="line">GLANCE_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Nova Config----------------------##</span><br><span class="line">#Password for Mysql nova user. exmaple:000000</span><br><span class="line">NOVA_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore nova user. exmaple:000000</span><br><span class="line">NOVA_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Neturon Config-------------------##</span><br><span class="line">#Password for Mysql neutron user. exmaple:000000</span><br><span class="line">NEUTRON_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore neutron user. exmaple:000000</span><br><span class="line">NEUTRON_PASS=000000</span><br><span class="line"></span><br><span class="line">#metadata secret for neutron. exmaple:000000</span><br><span class="line">METADATA_SECRET=000000</span><br><span class="line"></span><br><span class="line">#Tunnel Network Interface. example:x.x.x.x</span><br><span class="line">INTERFACE_IP=192.168.20.105    #（192.168.20.103）</span><br><span class="line"></span><br><span class="line">#External Network Interface. example:eth1</span><br><span class="line">INTERFACE_NAME=eth1</span><br><span class="line"></span><br><span class="line">#External Network The Physical Adapter. example:provider</span><br><span class="line">Physical_NAME=provider</span><br><span class="line"></span><br><span class="line">#First Vlan ID in VLAN RANGE for VLAN Network. exmaple:101</span><br><span class="line">minvlan=101</span><br><span class="line"></span><br><span class="line">#Last Vlan ID in VLAN RANGE for VLAN Network. example:200</span><br><span class="line">maxvlan=200</span><br><span class="line"></span><br><span class="line">#--------------------Cinder Config--------------------##</span><br><span class="line">#Password for Mysql cinder user. exmaple:000000</span><br><span class="line">CINDER_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore cinder user. exmaple:000000</span><br><span class="line">CINDER_PASS=000000</span><br><span class="line"></span><br><span class="line">#Cinder Block Disk. example:md126p3</span><br><span class="line">BLOCK_DISK=vdb1</span><br><span class="line"></span><br><span class="line">#--------------------Swift Config---------------------##</span><br><span class="line">#Password for Keystore swift user. exmaple:000000</span><br><span class="line">SWIFT_PASS=000000</span><br><span class="line"></span><br><span class="line">#The NODE Object Disk for Swift. example:md126p4.</span><br><span class="line">OBJECT_DISK=vdb2</span><br><span class="line"></span><br><span class="line">#The NODE IP for Swift Storage Network. example:x.x.x.x.</span><br><span class="line">STORAGE_LOCAL_NET_IP=000000</span><br><span class="line"></span><br><span class="line">#--------------------Heat Config----------------------##</span><br><span class="line">#Password for Mysql heat user. exmaple:000000</span><br><span class="line">HEAT_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore heat user. exmaple:000000</span><br><span class="line">HEAT_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Zun Config-----------------------##</span><br><span class="line">#Password for Mysql Zun user. exmaple:000000</span><br><span class="line">ZUN_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore Zun user. exmaple:000000</span><br><span class="line">ZUN_PASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Mysql Kuryr user. exmaple:000000</span><br><span class="line">KURYR_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore Kuryr user. exmaple:000000</span><br><span class="line">KURYR_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Ceilometer Config----------------##</span><br><span class="line">#Password for Gnocchi ceilometer user. exmaple:000000</span><br><span class="line">CEILOMETER_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore ceilometer user. exmaple:000000</span><br><span class="line">CEILOMETER_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------AODH Config----------------##</span><br><span class="line">#Password for Mysql AODH user. exmaple:000000</span><br><span class="line">AODH_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore AODH user. exmaple:000000</span><br><span class="line">AODH_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Barbican Config----------------##</span><br><span class="line">#Password for Mysql Barbican user. exmaple:000000</span><br><span class="line">BARBICAN_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore Barbican user. exmaple:000000</span><br><span class="line">BARBICAN_PASS=000000</span><br></pre></td></tr></table></figure>

<p><strong>生效该变量文件，然后执行 echo $INTERFACE_IP 命令</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# source /etc/xiandian/openrc.sh </span><br><span class="line">[root@controller ~]# echo $INTERFACE_IP</span><br><span class="line">192.168.20.105</span><br></pre></td></tr></table></figure>

<p><strong>执行脚本</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-pre-host.sh </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# iaas-pre-host.sh </span><br></pre></td></tr></table></figure>

<p>2.搭建数据库组件 使用提供的脚本框架 iaas-install-mysql.sh 填充脚本，在 controller  节点上安装 mariadb、mencached、rabbitmq 等服务并完成相关配置。完成后修 改配置文件将 mencached 最大连接数修改为 2048。 请将修改后的配置文件提交到答题框。【1 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-mysql.sh </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/sysconfig/memcached </span><br><span class="line">PORT=&quot;11211&quot;</span><br><span class="line">USER=&quot;memcached&quot;</span><br><span class="line">MAXCONN=&quot;2048&quot;</span><br><span class="line">CACHESIZE=&quot;64&quot;</span><br><span class="line">OPTIONS=&quot;-l 127.0.0.1,::1,controller&quot;</span><br></pre></td></tr></table></figure>

<p>3.搭建认证服务组件 使用提供的脚本框架 iaas-install-keystone.sh 填充脚本，在 controlle r 节点上安装 keystone 服务并完成相关配置。完成后使用 openstack 命令请求 一个 token。 请将以上命令和返回结果提交到答题框。【1 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-keystone.sh </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack token issue</span><br><span class="line">+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Field      | Value                                                                                                                                                                                   |</span><br><span class="line">+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| expires    | 2022-09-02T22:55:39+0000                                                                                                                                                                |</span><br><span class="line">| id         | gAAAAABjEnvb7SeEOXtFuO4RiJ7fRCcIK6Eh_LTwtH9uHjdOblLrJFOjbhiw3ukzo7Tey8jSQGwO2XIwBXrxU4AoMseIaFvzVQAiUdtWZjt5mKlXrGkbtUJTR5bhn9ktgqWHC5DsQtlxmmBLJq8-SUL5RG1CKGmknq-hOOFSsFaBQfbSH2fDeWQ |</span><br><span class="line">| project_id | 4350b89460a148d7bf1b2ae63296a6bd                                                                                                                                                        |</span><br><span class="line">| user_id    | 4aec1580c77d4222964b7947d3239a88                                                                                                                                                        |</span><br><span class="line">+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure>

<p>4.搭建镜像服务组件 使用提供的脚本框架 iaas-install-glance.sh 填充脚本，在 controller  节点上安装 glance 服务并完成相关配置。完成后请将 cirros-0.3.4-x86_64-d isk.img 上传到控制节点的 &#x2F;root 目录下，然后使用 openstack 命令将该镜像 上传到 openstack 平台镜像命名为 cirros。 请将镜像上传的操作命令和返回结果提交到答题框。【1 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-glance.sh </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack image create cirros --disk-format qcow2 --container bare &lt; cirros-0.3.4-x86_64-disk.img </span><br><span class="line">+------------------+------------------------------------------------------+</span><br><span class="line">| Field            | Value                                                |</span><br><span class="line">+------------------+------------------------------------------------------+</span><br><span class="line">| checksum         | ee1eca47dc88f4879d8a229cc70a07c6                     |</span><br><span class="line">| container_format | bare                                                 |</span><br><span class="line">| created_at       | 2022-09-02T21:59:43Z                                 |</span><br><span class="line">| disk_format      | qcow2                                                |</span><br><span class="line">| file             | /v2/images/cbfdbd87-71df-4be7-8eb2-6904f781239c/file |</span><br><span class="line">| id               | cbfdbd87-71df-4be7-8eb2-6904f781239c                 |</span><br><span class="line">| min_disk         | 0                                                    |</span><br><span class="line">| min_ram          | 0                                                    |</span><br><span class="line">| name             | cirros                                               |</span><br><span class="line">| owner            | 4350b89460a148d7bf1b2ae63296a6bd                     |</span><br><span class="line">| protected        | False                                                |</span><br><span class="line">| schema           | /v2/schemas/image                                    |</span><br><span class="line">| size             | 13287936                                             |</span><br><span class="line">| status           | active                                               |</span><br><span class="line">| tags             |                                                      |</span><br><span class="line">| updated_at       | 2022-09-02T21:59:44Z                                 |</span><br><span class="line">| virtual_size     | None                                                 |</span><br><span class="line">| visibility       | shared                                               |</span><br><span class="line">+------------------+------------------------------------------------------+</span><br></pre></td></tr></table></figure>

<p>5.搭建计算服务组件 使用提供的脚本框架 iaas-install-nova-controller.sh 和 iaas-install -nova-compute.sh 填充脚本，在 controller 和 compute 节点上安装 nova 服 务并完成配置。完成后请将控制节点的计算资源也加入集群。然后使用 openstack 命令列出能提供计算资源的节点。 将列出计算资源的命令和返回结果提交到答题框。【1.5 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-nova-controller.sh </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# iaas-install-nova-compute.sh </span><br></pre></td></tr></table></figure>

<p><strong>修改openrc.sh</strong></p>
<p><strong>HOST_IP_NODE&#x3D;192.168.20.105</strong></p>
<p><strong>HOST_NAME_NODE&#x3D;controller</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/xiandian/openrc.sh </span><br><span class="line">#--------------------system Config--------------------##</span><br><span class="line">#Controller Server Manager IP. example:x.x.x.x</span><br><span class="line">HOST_IP=192.168.20.105</span><br><span class="line"></span><br><span class="line">#Controller HOST Password. example:000000 </span><br><span class="line">HOST_PASS=000000</span><br><span class="line"></span><br><span class="line">#Controller Server hostname. example:controller</span><br><span class="line">HOST_NAME=controller</span><br><span class="line"></span><br><span class="line">#Compute Node Manager IP. example:x.x.x.x</span><br><span class="line">HOST_IP_NODE=192.168.20.105</span><br><span class="line"></span><br><span class="line">#Compute HOST Password. example:000000 </span><br><span class="line">HOST_PASS_NODE=000000</span><br><span class="line"></span><br><span class="line">#Compute Node hostname. example:compute</span><br><span class="line">HOST_NAME_NODE=controller</span><br><span class="line"></span><br><span class="line">#--------------------Chrony Config-------------------##</span><br><span class="line">#Controller network segment IP.  example:x.x.0.0/16(x.x.x.0/24)</span><br><span class="line">network_segment_IP=192.168.20.0/24</span><br><span class="line"></span><br><span class="line">#--------------------Rabbit Config ------------------##</span><br><span class="line">#user for rabbit. example:openstack</span><br><span class="line">RABBIT_USER=openstack</span><br><span class="line"></span><br><span class="line">#Password for rabbit user .example:000000</span><br><span class="line">RABBIT_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------MySQL Config---------------------##</span><br><span class="line">#Password for MySQL root user . exmaple:000000</span><br><span class="line">DB_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Keystone Config------------------##</span><br><span class="line">#Password for Keystore admin user. exmaple:000000</span><br><span class="line">DOMAIN_NAME=demo</span><br><span class="line">ADMIN_PASS=000000</span><br><span class="line">DEMO_PASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Mysql keystore user. exmaple:000000</span><br><span class="line">KEYSTONE_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Glance Config--------------------##</span><br><span class="line">#Password for Mysql glance user. exmaple:000000</span><br><span class="line">GLANCE_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore glance user. exmaple:000000</span><br><span class="line">GLANCE_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Nova Config----------------------##</span><br><span class="line">#Password for Mysql nova user. exmaple:000000</span><br><span class="line">NOVA_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore nova user. exmaple:000000</span><br><span class="line">NOVA_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Neturon Config-------------------##</span><br><span class="line">#Password for Mysql neutron user. exmaple:000000</span><br><span class="line">NEUTRON_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore neutron user. exmaple:000000</span><br><span class="line">NEUTRON_PASS=000000</span><br><span class="line"></span><br><span class="line">#metadata secret for neutron. exmaple:000000</span><br><span class="line">METADATA_SECRET=000000</span><br><span class="line"></span><br><span class="line">#Tunnel Network Interface. example:x.x.x.x</span><br><span class="line">INTERFACE_IP=192.168.20.105    #（192.168.20.103）</span><br><span class="line"></span><br><span class="line">#External Network Interface. example:eth1</span><br><span class="line">INTERFACE_NAME=eth1</span><br><span class="line"></span><br><span class="line">#External Network The Physical Adapter. example:provider</span><br><span class="line">Physical_NAME=provider</span><br><span class="line"></span><br><span class="line">#First Vlan ID in VLAN RANGE for VLAN Network. exmaple:101</span><br><span class="line">minvlan=101</span><br><span class="line"></span><br><span class="line">#Last Vlan ID in VLAN RANGE for VLAN Network. example:200</span><br><span class="line">maxvlan=200</span><br><span class="line"></span><br><span class="line">#--------------------Cinder Config--------------------##</span><br><span class="line">#Password for Mysql cinder user. exmaple:000000</span><br><span class="line">CINDER_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore cinder user. exmaple:000000</span><br><span class="line">CINDER_PASS=000000</span><br><span class="line"></span><br><span class="line">#Cinder Block Disk. example:md126p3</span><br><span class="line">BLOCK_DISK=vdb1</span><br><span class="line"></span><br><span class="line">#--------------------Swift Config---------------------##</span><br><span class="line">#Password for Keystore swift user. exmaple:000000</span><br><span class="line">SWIFT_PASS=000000</span><br><span class="line"></span><br><span class="line">#The NODE Object Disk for Swift. example:md126p4.</span><br><span class="line">OBJECT_DISK=vdb2</span><br><span class="line"></span><br><span class="line">#The NODE IP for Swift Storage Network. example:x.x.x.x.</span><br><span class="line">STORAGE_LOCAL_NET_IP=000000</span><br><span class="line"></span><br><span class="line">#--------------------Heat Config----------------------##</span><br><span class="line">#Password for Mysql heat user. exmaple:000000</span><br><span class="line">HEAT_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore heat user. exmaple:000000</span><br><span class="line">HEAT_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Zun Config-----------------------##</span><br><span class="line">#Password for Mysql Zun user. exmaple:000000</span><br><span class="line">ZUN_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore Zun user. exmaple:000000</span><br><span class="line">ZUN_PASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Mysql Kuryr user. exmaple:000000</span><br><span class="line">KURYR_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore Kuryr user. exmaple:000000</span><br><span class="line">KURYR_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Ceilometer Config----------------##</span><br><span class="line">#Password for Gnocchi ceilometer user. exmaple:000000</span><br><span class="line">CEILOMETER_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore ceilometer user. exmaple:000000</span><br><span class="line">CEILOMETER_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------AODH Config----------------##</span><br><span class="line">#Password for Mysql AODH user. exmaple:000000</span><br><span class="line">AODH_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore AODH user. exmaple:000000</span><br><span class="line">AODH_PASS=000000</span><br><span class="line"></span><br><span class="line">#--------------------Barbican Config----------------##</span><br><span class="line">#Password for Mysql Barbican user. exmaple:000000</span><br><span class="line">BARBICAN_DBPASS=000000</span><br><span class="line"></span><br><span class="line">#Password for Keystore Barbican user. exmaple:000000</span><br><span class="line">BARBICAN_PASS=000000</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-nova-compute.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> [root@controller ~]# openstack compute service list --service nova-compute</span><br><span class="line">+----+--------------+------------+------+---------+-------+----------------------------+</span><br><span class="line">| ID | Binary       | Host       | Zone | Status  | State | Updated At                 |</span><br><span class="line">+----+--------------+------------+------+---------+-------+----------------------------+</span><br><span class="line">|  6 | nova-compute | compute    | nova | enabled | up    | 2022-09-02T22:17:25.000000 |</span><br><span class="line">|  7 | nova-compute | controller | nova | enabled | up    | 2022-09-02T22:17:18.000000 |</span><br><span class="line">+----+--------------+------------+------+---------+-------+----------------------------+</span><br></pre></td></tr></table></figure>

<p>6.搭建网络组件并初始化网络 使用提供的脚本框架 iaas-install-neutron-controller.sh 和 iaas-insta ll-neutron-compute.sh，填充脚本，在 controller 和 compute 节点上安装 neutron 服务并完成配置。创建云主机外部网络 ext-net，子网为 ext-subnet， 云主机浮动 IP 可用网段为 172.18.x.100<del>172.18.x.200，网关为 172.18.x.1。 创建云主机内部网络 int-net1，子网为 int-subnet1，云主机子网 IP 可用网段 为 10.0.0.100</del>10.0.0.200，网关为 10.0.0.1；创建云主机内部网络int-net2， 子网为 int-subnet2，云主机子网 IP 可用网段为 10.0.1.100 ~ 10.0.1.200， 网关为 10.0.1.1。添加名为 ext-router 的路由器，添加网关在 ext-net 网络， 添加内部端口到 int-net1 网络，完成内部网络 int-net1 和外部网络的连通。 请使用 openstack 命令完成以下任务，完成后将命令和返回结果提交到答题框。【4 分】 </p>
<p><strong>云主机外部网络 ext-net创建</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack network create ext-net --share --external --provider-physical-network provider --provider-network-type vlan </span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| Field                     | Value                                |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| admin_state_up            | UP                                   |</span><br><span class="line">| availability_zone_hints   |                                      |</span><br><span class="line">| availability_zones        |                                      |</span><br><span class="line">| created_at                | 2022-09-03T02:12:17Z                 |</span><br><span class="line">| description               |                                      |</span><br><span class="line">| dns_domain                | None                                 |</span><br><span class="line">| id                        | 2ba422fb-1ad9-4509-b9a4-643b82112ce6 |</span><br><span class="line">| ipv4_address_scope        | None                                 |</span><br><span class="line">| ipv6_address_scope        | None                                 |</span><br><span class="line">| is_default                | False                                |</span><br><span class="line">| is_vlan_transparent       | None                                 |</span><br><span class="line">| mtu                       | 1500                                 |</span><br><span class="line">| name                      | ext-net                              |</span><br><span class="line">| port_security_enabled     | True                                 |</span><br><span class="line">| project_id                | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| provider:network_type     | vlan                                 |</span><br><span class="line">| provider:physical_network | provider                             |</span><br><span class="line">| provider:segmentation_id  | 182                                  |</span><br><span class="line">| qos_policy_id             | None                                 |</span><br><span class="line">| revision_number           | 5                                    |</span><br><span class="line">| router:external           | External                             |</span><br><span class="line">| segments                  | None                                 |</span><br><span class="line">| shared                    | True                                 |</span><br><span class="line">| status                    | ACTIVE                               |</span><br><span class="line">| subnets                   |                                      |</span><br><span class="line">| tags                      |                                      |</span><br><span class="line">| updated_at                | 2022-09-03T02:12:18Z                 |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">[root@controller ~]# openstack subnet create --network ext-net --subnet-range 172.18.7.0/24 --gateway 172.18.7.1 --allocation-pool start=172.18.7.100,end=172.18.7.200 ext-subnet</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">| Field             | Value                                |</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">| allocation_pools  | 172.18.7.100-172.18.7.200            |</span><br><span class="line">| cidr              | 172.18.7.0/24                        |</span><br><span class="line">| created_at        | 2022-09-03T02:16:52Z                 |</span><br><span class="line">| description       |                                      |</span><br><span class="line">| dns_nameservers   |                                      |</span><br><span class="line">| enable_dhcp       | True                                 |</span><br><span class="line">| gateway_ip        | 172.18.7.1                           |</span><br><span class="line">| host_routes       |                                      |</span><br><span class="line">| id                | 72ec3fbe-05b5-4282-a01a-7f22b1d432ca |</span><br><span class="line">| ip_version        | 4                                    |</span><br><span class="line">| ipv6_address_mode | None                                 |</span><br><span class="line">| ipv6_ra_mode      | None                                 |</span><br><span class="line">| name              | ext-subnet                           |</span><br><span class="line">| network_id        | 2ba422fb-1ad9-4509-b9a4-643b82112ce6 |</span><br><span class="line">| project_id        | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| revision_number   | 0                                    |</span><br><span class="line">| segment_id        | None                                 |</span><br><span class="line">| service_types     |                                      |</span><br><span class="line">| subnetpool_id     | None                                 |</span><br><span class="line">| tags              |                                      |</span><br><span class="line">| updated_at        | 2022-09-03T02:16:52Z                 |</span><br><span class="line">+-------------------+--------------------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>创建云主机内部网络 int-net1</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack network create int-net1</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| Field                     | Value                                |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| admin_state_up            | UP                                   |</span><br><span class="line">| availability_zone_hints   |                                      |</span><br><span class="line">| availability_zones        |                                      |</span><br><span class="line">| created_at                | 2022-09-03T02:20:07Z                 |</span><br><span class="line">| description               |                                      |</span><br><span class="line">| dns_domain                | None                                 |</span><br><span class="line">| id                        | 89062681-1008-4083-8dfb-a5c6763eec7f |</span><br><span class="line">| ipv4_address_scope        | None                                 |</span><br><span class="line">| ipv6_address_scope        | None                                 |</span><br><span class="line">| is_default                | False                                |</span><br><span class="line">| is_vlan_transparent       | None                                 |</span><br><span class="line">| mtu                       | 1450                                 |</span><br><span class="line">| name                      | int-net1                             |</span><br><span class="line">| port_security_enabled     | True                                 |</span><br><span class="line">| project_id                | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| provider:network_type     | vxlan                                |</span><br><span class="line">| provider:physical_network | None                                 |</span><br><span class="line">| provider:segmentation_id  | 170                                  |</span><br><span class="line">| qos_policy_id             | None                                 |</span><br><span class="line">| revision_number           | 2                                    |</span><br><span class="line">| router:external           | Internal                             |</span><br><span class="line">| segments                  | None                                 |</span><br><span class="line">| shared                    | False                                |</span><br><span class="line">| status                    | ACTIVE                               |</span><br><span class="line">| subnets                   |                                      |</span><br><span class="line">| tags                      |                                      |</span><br><span class="line">| updated_at                | 2022-09-03T02:20:07Z                 |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">[root@controller ~]# openstack subnet create --network int-net1 --subnet-range 10.0.0.0/24 --gateway 10.0.0.1 --allocation-pool start=10.0.0.100,end=10.0.0.200 int-subnet1</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">| Field             | Value                                |</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">| allocation_pools  | 10.0.0.100-10.0.0.200                |</span><br><span class="line">| cidr              | 10.0.0.0/24                          |</span><br><span class="line">| created_at        | 2022-09-03T02:22:08Z                 |</span><br><span class="line">| description       |                                      |</span><br><span class="line">| dns_nameservers   |                                      |</span><br><span class="line">| enable_dhcp       | True                                 |</span><br><span class="line">| gateway_ip        | 10.0.0.1                             |</span><br><span class="line">| host_routes       |                                      |</span><br><span class="line">| id                | 95eefbdd-5669-4840-a1e6-2bcd67ae1208 |</span><br><span class="line">| ip_version        | 4                                    |</span><br><span class="line">| ipv6_address_mode | None                                 |</span><br><span class="line">| ipv6_ra_mode      | None                                 |</span><br><span class="line">| name              | int-subnet1                          |</span><br><span class="line">| network_id        | 89062681-1008-4083-8dfb-a5c6763eec7f |</span><br><span class="line">| project_id        | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| revision_number   | 0                                    |</span><br><span class="line">| segment_id        | None                                 |</span><br><span class="line">| service_types     |                                      |</span><br><span class="line">| subnetpool_id     | None                                 |</span><br><span class="line">| tags              |                                      |</span><br><span class="line">| updated_at        | 2022-09-03T02:22:08Z                 |</span><br><span class="line">+-------------------+--------------------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>创建云主机内部网络 int-net2</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack network create int-net2</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| Field                     | Value                                |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| admin_state_up            | UP                                   |</span><br><span class="line">| availability_zone_hints   |                                      |</span><br><span class="line">| availability_zones        |                                      |</span><br><span class="line">| created_at                | 2022-09-03T02:22:49Z                 |</span><br><span class="line">| description               |                                      |</span><br><span class="line">| dns_domain                | None                                 |</span><br><span class="line">| id                        | e74600ae-a303-4804-b82b-c4401d308246 |</span><br><span class="line">| ipv4_address_scope        | None                                 |</span><br><span class="line">| ipv6_address_scope        | None                                 |</span><br><span class="line">| is_default                | False                                |</span><br><span class="line">| is_vlan_transparent       | None                                 |</span><br><span class="line">| mtu                       | 1450                                 |</span><br><span class="line">| name                      | int-net2                             |</span><br><span class="line">| port_security_enabled     | True                                 |</span><br><span class="line">| project_id                | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| provider:network_type     | vxlan                                |</span><br><span class="line">| provider:physical_network | None                                 |</span><br><span class="line">| provider:segmentation_id  | 165                                  |</span><br><span class="line">| qos_policy_id             | None                                 |</span><br><span class="line">| revision_number           | 2                                    |</span><br><span class="line">| router:external           | Internal                             |</span><br><span class="line">| segments                  | None                                 |</span><br><span class="line">| shared                    | False                                |</span><br><span class="line">| status                    | ACTIVE                               |</span><br><span class="line">| subnets                   |                                      |</span><br><span class="line">| tags                      |                                      |</span><br><span class="line">| updated_at                | 2022-09-03T02:22:49Z                 |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">[root@controller ~]# openstack subnet create --network int-net2 --subnet-range 10.0.1.0/24 --gateway 10.0.1.1 --allocation-pool start=10.0.1.100,end=10.0.1.200 int-subnet2</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">| Field             | Value                                |</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">| allocation_pools  | 10.0.1.100-10.0.1.200                |</span><br><span class="line">| cidr              | 10.0.1.0/24                          |</span><br><span class="line">| created_at        | 2022-09-03T02:24:19Z                 |</span><br><span class="line">| description       |                                      |</span><br><span class="line">| dns_nameservers   |                                      |</span><br><span class="line">| enable_dhcp       | True                                 |</span><br><span class="line">| gateway_ip        | 10.0.1.1                             |</span><br><span class="line">| host_routes       |                                      |</span><br><span class="line">| id                | 4a736169-b4e4-4c88-bd7b-b8ea02443fdf |</span><br><span class="line">| ip_version        | 4                                    |</span><br><span class="line">| ipv6_address_mode | None                                 |</span><br><span class="line">| ipv6_ra_mode      | None                                 |</span><br><span class="line">| name              | int-subnet2                          |</span><br><span class="line">| network_id        | e74600ae-a303-4804-b82b-c4401d308246 |</span><br><span class="line">| project_id        | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| revision_number   | 0                                    |</span><br><span class="line">| segment_id        | None                                 |</span><br><span class="line">| service_types     |                                      |</span><br><span class="line">| subnetpool_id     | None                                 |</span><br><span class="line">| tags              |                                      |</span><br><span class="line">| updated_at        | 2022-09-03T02:24:19Z                 |</span><br><span class="line">+-------------------+--------------------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>添加名为 ext-router 的路由器</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack router create ext-router</span><br><span class="line">+-------------------------+--------------------------------------+</span><br><span class="line">| Field                   | Value                                |</span><br><span class="line">+-------------------------+--------------------------------------+</span><br><span class="line">| admin_state_up          | UP                                   |</span><br><span class="line">| availability_zone_hints |                                      |</span><br><span class="line">| availability_zones      |                                      |</span><br><span class="line">| created_at              | 2022-09-03T02:27:25Z                 |</span><br><span class="line">| description             |                                      |</span><br><span class="line">| distributed             | False                                |</span><br><span class="line">| external_gateway_info   | None                                 |</span><br><span class="line">| flavor_id               | None                                 |</span><br><span class="line">| ha                      | False                                |</span><br><span class="line">| id                      | b42861e5-5dd5-4c48-b225-212a9d567030 |</span><br><span class="line">| name                    | ext-router                           |</span><br><span class="line">| project_id              | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| revision_number         | 1                                    |</span><br><span class="line">| routes                  |                                      |</span><br><span class="line">| status                  | ACTIVE                               |</span><br><span class="line">| tags                    |                                      |</span><br><span class="line">| updated_at              | 2022-09-03T02:27:25Z                 |</span><br><span class="line">+-------------------------+--------------------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>添加内部端口到 int-net1 网络，完成内部网络 int-net1 和外部网络的连通</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack router add subnet  ext-router int-subnet1</span><br><span class="line">[root@controller ~]# openstack router set ext-router --external-gateway ext-net</span><br></pre></td></tr></table></figure>

<p>7.搭建图形化界面 使用提供的脚本框架 iaas-install-dashboard.sh，填充脚本，在 control ler 节点上安装 dashboard 服务并完成相关配置。 请使用 curl 指令获取 dashboard 首页信息，将获取到的首页信息提交到答 题框。【1 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-dashboard.sh </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# curl -i http://192.168.20.105/dashboard</span><br><span class="line">HTTP/1.1 302 Found</span><br><span class="line">Date: Sat, 03 Sep 2022 02:57:56 GMT</span><br><span class="line">Server: Apache/2.4.6 (CentOS) mod_wsgi/3.4 Python/2.7.5</span><br><span class="line">Content-Language: en</span><br><span class="line">Vary: Accept-Language,Cookie</span><br><span class="line">X-Frame-Options: SAMEORIGIN</span><br><span class="line">Content-Length: 0</span><br><span class="line">Location: http://192.168.20.105/dashboard/auth/login/?next=/dashboard/</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br></pre></td></tr></table></figure>

<h3 id="任务-3-OpenStack-运维任务（15-分）"><a href="#任务-3-OpenStack-运维任务（15-分）" class="headerlink" title="任务 3 OpenStack 运维任务（15 分）"></a>任务 3 OpenStack 运维任务（15 分）</h3><p>1.用户管理 在 keystone 中创建用户 testuser，密码为 password。创建好之后，使用 命令修改 testuser 密码为 000000，并查看 testuser 的详细信息。添加将该 用户添加到 admin 项目并赋予普通用户权限，完成后测试登录。 使用 testuser 用登录系统完成后截图并提交到答题框。【1 分】</p>
<p><strong>创建用户 testuser，密码为 password</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack user create --password password testuser --domain demo</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| Field               | Value                            |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| domain_id           | 79342087fd364c72a664c0ed6590154d |</span><br><span class="line">| enabled             | True                             |</span><br><span class="line">| id                  | fc4ae8a457ec486dbb5c07b977d17833 |</span><br><span class="line">| name                | testuser                         |</span><br><span class="line">| options             | &#123;&#125;                               |</span><br><span class="line">| password_expires_at | None                             |</span><br><span class="line">+---------------------+----------------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>使用 命令修改 testuser 密码为 000000，并查看 testuser 的详细信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack user set testuser --password 000000</span><br><span class="line">[root@controller ~]# openstack user show testuser</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| Field               | Value                            |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| domain_id           | 79342087fd364c72a664c0ed6590154d |</span><br><span class="line">| enabled             | True                             |</span><br><span class="line">| id                  | fc4ae8a457ec486dbb5c07b977d17833 |</span><br><span class="line">| name                | testuser                         |</span><br><span class="line">| options             | &#123;&#125;                               |</span><br><span class="line">| password_expires_at | None                             |</span><br><span class="line">+---------------------+----------------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>添加将该 用户添加到 admin 项目并赋予普通用户权限</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack user set testuser --project admin</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack role add user --user testuser --domain demo</span><br></pre></td></tr></table></figure>

<p>2.服务查询 使用命令列出服务目录和端点，查看 glance 服务的端点。将以上命令和返 回结果提交到答题框。【0.5 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack endpoint list --service glance</span><br><span class="line">+----------------------------------+-----------+--------------+--------------+---------+-----------+------------------------+</span><br><span class="line">| ID                               | Region    | Service Name | Service Type | Enabled | Interface | URL                    |</span><br><span class="line">+----------------------------------+-----------+--------------+--------------+---------+-----------+------------------------+</span><br><span class="line">| 0388bc7714f04cd89e3ca579f43a67e4 | RegionOne | glance       | image        | True    | admin     | http://controller:9292 |</span><br><span class="line">| 0500f3b7152747f6853542a3723766dd | RegionOne | glance       | image        | True    | public    | http://controller:9292 |</span><br><span class="line">| 7047188a53f04073acdb1a60722fe2d7 | RegionOne | glance       | image        | True    | internal  | http://controller:9292 |</span><br><span class="line">+----------------------------------+-----------+--------------+--------------+---------+-----------+------------------------+</span><br></pre></td></tr></table></figure>

<p>3.镜像管理 登录 controller 节点，使用 glance 相关命令，上传镜像，源使用 CentO S_6.5_x86_64_XD.qcow2，名字为 testone，然后使用 openstack 命令修改这个 镜像名改为 examimage，然后给这个镜像打一个标签，标签名字为 lastone 改 完后使用 openstack 命令查看镜像列表。 将以上命令和返回结果提交到答题框。【2 分】</p>
<p><strong>使用 glance 相关命令，上传镜像</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# glance image-create --name testone --disk-format qcow2 --container-format bare &lt; /opt/iaas/images/CentOS_6.5_x86_64_XD.qcow2 </span><br><span class="line">+------------------+--------------------------------------+</span><br><span class="line">| Property         | Value                                |</span><br><span class="line">+------------------+--------------------------------------+</span><br><span class="line">| checksum         | 3e565ace16066679ea363dde5411ed25     |</span><br><span class="line">| container_format | bare                                 |</span><br><span class="line">| created_at       | 2022-09-03T03:18:23Z                 |</span><br><span class="line">| disk_format      | qcow2                                |</span><br><span class="line">| id               | df61b71f-4077-4374-a143-331b73377f18 |</span><br><span class="line">| min_disk         | 0                                    |</span><br><span class="line">| min_ram          | 0                                    |</span><br><span class="line">| name             | testone                              |</span><br><span class="line">| owner            | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| protected        | False                                |</span><br><span class="line">| size             | 283181056                            |</span><br><span class="line">| status           | active                               |</span><br><span class="line">| tags             | []                                   |</span><br><span class="line">| updated_at       | 2022-09-03T03:18:25Z                 |</span><br><span class="line">| virtual_size     | None                                 |</span><br><span class="line">| visibility       | shared                               |</span><br><span class="line">+------------------+--------------------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>使用 openstack 命令修改这个 镜像名改为 examimage</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack image set testone --name examimage</span><br></pre></td></tr></table></figure>

<p><strong>给这个镜像打一个标签</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack image set examimage --tag lastone</span><br></pre></td></tr></table></figure>

<p><strong>使用 openstack 命令查看镜像列表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack image list</span><br><span class="line">+--------------------------------------+-----------+--------+</span><br><span class="line">| ID                                   | Name      | Status |</span><br><span class="line">+--------------------------------------+-----------+--------+</span><br><span class="line">| cbfdbd87-71df-4be7-8eb2-6904f781239c | cirros    | active |</span><br><span class="line">| df61b71f-4077-4374-a143-331b73377f18 | examimage | active |</span><br><span class="line">+--------------------------------------+-----------+--------+</span><br></pre></td></tr></table></figure>

<p>4.后端配置文件管理 进入到glance 后端存储目录中，使用 qemu 命令查看任意的一个镜像信息。 使用 du 命令查看 nova 主配置文件大小。 将以上命令和返回结果提交到答题框。【0.5 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# qemu-img info /var/lib/glance/images/cbfdbd87-71df-4be7-8eb2-6904f781239c </span><br><span class="line">image: /var/lib/glance/images/cbfdbd87-71df-4be7-8eb2-6904f781239c</span><br><span class="line">file format: qcow2</span><br><span class="line">virtual size: 39M (41126400 bytes)</span><br><span class="line">disk size: 13M</span><br><span class="line">cluster_size: 65536</span><br><span class="line">Format specific information:</span><br><span class="line">    compat: 0.10</span><br><span class="line">    refcount bits: 16</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# du -h /etc/nova/nova.conf </span><br><span class="line">364K	/etc/nova/nova.conf</span><br></pre></td></tr></table></figure>

<p>5.存储服务管理 创建一个卷类型，然后创建一块带这个卷类型标识的云硬盘，查询该云硬盘 的详细信息。将该云硬盘挂载到虚拟机中，将该云硬盘格式化为 xfs。创建一个 文件文件名为工位号内容为工位号，然后将该云硬盘卸载，使用 openstack 命令 将该云硬盘修改为只读状态，再次挂载后查看是否存在原始文件，然后再次向该 云硬盘中创建一个文件，文件名为工位号_02。 将返回结果及解题过程提交到答题框。【2 分】</p>
<p><strong>创建一个卷类型，然后创建一块带这个卷类型标识的云硬盘，查询该云硬盘 的详细信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack volume type create lvm</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line">| Field       | Value                                |</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line">| description | None                                 |</span><br><span class="line">| id          | d0b4c01e-9454-453e-8b54-599d94108d19 |</span><br><span class="line">| is_public   | True                                 |</span><br><span class="line">| name        | lvm                                  |</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line">[root@controller ~]# openstack volume create --type lvm --size 10 blcok</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| Field               | Value                                |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| attachments         | []                                   |</span><br><span class="line">| availability_zone   | nova                                 |</span><br><span class="line">| bootable            | false                                |</span><br><span class="line">| consistencygroup_id | None                                 |</span><br><span class="line">| created_at          | 2022-09-03T03:34:47.000000           |</span><br><span class="line">| description         | None                                 |</span><br><span class="line">| encrypted           | False                                |</span><br><span class="line">| id                  | 0a576f20-1ecf-4b7a-999c-37daa899bf8e |</span><br><span class="line">| migration_status    | None                                 |</span><br><span class="line">| multiattach         | False                                |</span><br><span class="line">| name                | blcok                                |</span><br><span class="line">| properties          |                                      |</span><br><span class="line">| replication_status  | None                                 |</span><br><span class="line">| size                | 10                                   |</span><br><span class="line">| snapshot_id         | None                                 |</span><br><span class="line">| source_volid        | None                                 |</span><br><span class="line">| status              | creating                             |</span><br><span class="line">| type                | lvm                                  |</span><br><span class="line">| updated_at          | None                                 |</span><br><span class="line">| user_id             | dcf33a463e07489c817f0467f13e968b     |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">[root@controller ~]# openstack volume show blcok</span><br><span class="line">+--------------------------------+--------------------------------------+</span><br><span class="line">| Field                          | Value                                |</span><br><span class="line">+--------------------------------+--------------------------------------+</span><br><span class="line">| attachments                    | []                                   |</span><br><span class="line">| availability_zone              | nova                                 |</span><br><span class="line">| bootable                       | false                                |</span><br><span class="line">| consistencygroup_id            | None                                 |</span><br><span class="line">| created_at                     | 2022-09-03T03:34:47.000000           |</span><br><span class="line">| description                    | None                                 |</span><br><span class="line">| encrypted                      | False                                |</span><br><span class="line">| id                             | 0a576f20-1ecf-4b7a-999c-37daa899bf8e |</span><br><span class="line">| migration_status               | None                                 |</span><br><span class="line">| multiattach                    | False                                |</span><br><span class="line">| name                           | blcok                                |</span><br><span class="line">| os-vol-host-attr:host          | compute@lvm#LVM                      |</span><br><span class="line">| os-vol-mig-status-attr:migstat | None                                 |</span><br><span class="line">| os-vol-mig-status-attr:name_id | None                                 |</span><br><span class="line">| os-vol-tenant-attr:tenant_id   | 6c6ebc8aab7144eeb3c0f56ae76568e4     |</span><br><span class="line">| properties                     |                                      |</span><br><span class="line">| replication_status             | None                                 |</span><br><span class="line">| size                           | 10                                   |</span><br><span class="line">| snapshot_id                    | None                                 |</span><br><span class="line">| source_volid                   | None                                 |</span><br><span class="line">| status                         | available                            |</span><br><span class="line">| type                           | lvm                                  |</span><br><span class="line">| updated_at                     | 2022-09-03T03:34:48.000000           |</span><br><span class="line">| user_id                        | dcf33a463e07489c817f0467f13e968b     |</span><br><span class="line">+--------------------------------+--------------------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>将该云硬盘挂载到虚拟机中，将该云硬盘格式化为 xfs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack server add volume controller blcok</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# mkfs.xfs /dev/vdb</span><br><span class="line">meta-data=/dev/vdb               isize=512    agcount=4, agsize=655360 blks</span><br><span class="line">         =                       sectsz=512   attr=2, projid32bit=1</span><br><span class="line">         =                       crc=1        finobt=0, sparse=0</span><br><span class="line">data     =                       bsize=4096   blocks=2621440, imaxpct=25</span><br><span class="line">         =                       sunit=0      swidth=0 blks</span><br><span class="line">naming   =version 2              bsize=4096   ascii-ci=0 ftype=1</span><br><span class="line">log      =internal log           bsize=4096   blocks=2560, version=2</span><br><span class="line">         =                       sectsz=512   sunit=0 blks, lazy-count=1</span><br><span class="line">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br></pre></td></tr></table></figure>

<p><strong>创建一个 文件文件名为工位号内容为工位号，然后将该云硬盘卸载，使用 openstack 命令 将该云硬盘修改为只读状态</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# mount /dev/vdb /mnt/</span><br><span class="line">[root@controller ~]# cd /mnt/</span><br><span class="line">[root@controller mnt]# touch 777</span><br><span class="line">[root@controller ~]# umount /mnt/</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack server remove volume controller blcok</span><br><span class="line">[root@controller ~]# openstack volume set blcok --read-only</span><br></pre></td></tr></table></figure>

<p><strong>再次挂载后查看是否存在原始文件，然后再次向该 云硬盘中创建一个文件，文件名为工位号_02</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack server add volume controller blcok</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# mount /dev/vdb /mnt/</span><br><span class="line">mount: /dev/vdb is write-protected, mounting read-only</span><br><span class="line">[root@controller ~]# ls /mnt/</span><br><span class="line">777</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cd /mnt/</span><br><span class="line">[root@controller mnt]# ls</span><br><span class="line">777</span><br><span class="line">[root@controller mnt]# touch 777_2</span><br><span class="line">touch: cannot touch ‘777_2’: Read-only file system</span><br></pre></td></tr></table></figure>

<p>6.存储服务管理 使用命令创建一个 5GB 的云硬盘，名称为 disk-2，将云硬盘挂载到云虚拟 机内，然后格式化为 ext4，挂载到虚拟机的 &#x2F;mnt&#x2F; 目录下，使用 df -h 将命令 和返回信息提交到答题框。将该云硬盘使用命令卸载，使用命令将该云硬盘扩容 到 10GB，使用命令将云硬盘挂载到云主机上，将命令及返回信息提交到答题框。 进入云主机使用命令扩容文件系统，扩容后再次挂载到 &#x2F;mnt&#x2F;。 使用 df -hT 命令并将命令和返回信息提交到答题框。【2 分】</p>
<p><strong>使用命令创建一个 5GB 的云硬盘，名称为 disk-2，将云硬盘挂载到云虚拟 机内，然后格式化为 ext4，挂载到虚拟机的 &#x2F;mnt&#x2F; 目录下，使用 df -h 将命令 和返回信息提交到答题框</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack volume create disk-2 --size 5</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| Field               | Value                                |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| attachments         | []                                   |</span><br><span class="line">| availability_zone   | nova                                 |</span><br><span class="line">| bootable            | false                                |</span><br><span class="line">| consistencygroup_id | None                                 |</span><br><span class="line">| created_at          | 2022-09-03T03:50:20.000000           |</span><br><span class="line">| description         | None                                 |</span><br><span class="line">| encrypted           | False                                |</span><br><span class="line">| id                  | eb48e3aa-3661-456a-90c0-bad30491a3eb |</span><br><span class="line">| migration_status    | None                                 |</span><br><span class="line">| multiattach         | False                                |</span><br><span class="line">| name                | disk-2                               |</span><br><span class="line">| properties          |                                      |</span><br><span class="line">| replication_status  | None                                 |</span><br><span class="line">| size                | 5                                    |</span><br><span class="line">| snapshot_id         | None                                 |</span><br><span class="line">| source_volid        | None                                 |</span><br><span class="line">| status              | creating                             |</span><br><span class="line">| type                | None                                 |</span><br><span class="line">| updated_at          | None                                 |</span><br><span class="line">| user_id             | dcf33a463e07489c817f0467f13e968b     |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">[root@controller ~]# openstack server add volume controller disk-2</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# mkfs.ext4 /dev/vdb</span><br><span class="line">mke2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Filesystem label=</span><br><span class="line">OS type: Linux</span><br><span class="line">Block size=4096 (log=2)</span><br><span class="line">Fragment size=4096 (log=2)</span><br><span class="line">Stride=0 blocks, Stripe width=0 blocks</span><br><span class="line">327680 inodes, 1310720 blocks</span><br><span class="line">65536 blocks (5.00%) reserved for the super user</span><br><span class="line">First data block=0</span><br><span class="line">Maximum filesystem blocks=1342177280</span><br><span class="line">40 block groups</span><br><span class="line">32768 blocks per group, 32768 fragments per group</span><br><span class="line">8192 inodes per group</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">	32768, 98304, 163840, 229376, 294912, 819200, 884736</span><br><span class="line"></span><br><span class="line">Allocating group tables: done                            </span><br><span class="line">Writing inode tables: done                            </span><br><span class="line">Creating journal (32768 blocks): done</span><br><span class="line">Writing superblocks and filesystem accounting information: done </span><br><span class="line"></span><br><span class="line">[root@controller ~]# mount /dev/vdb /mnt/</span><br><span class="line">[root@controller ~]# df -h /mnt/</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/vdb        4.8G   20M  4.6G   1% /mnt</span><br></pre></td></tr></table></figure>

<p><strong>将该云硬盘使用命令卸载，使用命令将该云硬盘扩容 到 10GB，使用命令将云硬盘挂载到云主机上，将命令及返回信息提交到答题框</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# umount /mnt/</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack server remove volume controller disk-2</span><br><span class="line">[root@controller ~]# openstack volume set disk-2 --size 10</span><br><span class="line">[root@controller ~]# openstack server add volume controller disk-2</span><br></pre></td></tr></table></figure>

<p><strong>进入云主机使用命令扩容文件系统，扩容后再次挂载到 &#x2F;mnt&#x2F;。 使用 df -hT 命令并将命令和返回信息提交到答题框</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# mount /dev/vdb  /mnt/</span><br><span class="line">[root@controller ~]# df -hT /dev/vdb</span><br><span class="line">Filesystem     Type  Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/vdb       ext4  9.8G   37M  9.2G   1% /mnt</span><br></pre></td></tr></table></figure>

<p>7.对象存储管理 使用 swift 相关命令，创建一个容器，然后往这个容器中上传一个文件（文 件可以自行创建），上传完毕后，使用命令查看容器。 将以上命令和返回结果提交到答题框。【0.5 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# swift post chinaskill</span><br><span class="line">[root@controller ~]# swift upload chinaskill cirros-0.3.4-x86_64-disk.img </span><br><span class="line">[root@controller ~]# swift list chinaskill</span><br></pre></td></tr></table></figure>

<p>8.安全组管理 使用命令创建名称为 group_web 的安全组该安全组的描述为工位号，为该安 全组添加一条规则允许任意 ip 地址访问 web 流量，完成后查看该安全组的详细 信息。 将以上命令和返回结果提交到答题框。【2 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack security group create group_web --description 777</span><br><span class="line">+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Field           | Value                                                                                                                                                 |</span><br><span class="line">+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| created_at      | 2022-09-03T04:12:13Z                                                                                                                                  |</span><br><span class="line">| description     | 777                                                                                                                                                   |</span><br><span class="line">| id              | f31a44fe-5e5c-47d2-9925-e2a1a8b6cb92                                                                                                                  |</span><br><span class="line">| name            | group_web                                                                                                                                             |</span><br><span class="line">| project_id      | 4350b89460a148d7bf1b2ae63296a6bd                                                                                                                      |</span><br><span class="line">| revision_number | 2                                                                                                                                                     |</span><br><span class="line">| rules           | created_at=&#x27;2022-09-03T04:12:13Z&#x27;, direction=&#x27;egress&#x27;, ethertype=&#x27;IPv6&#x27;, id=&#x27;4acce720-f30c-472e-a5d8-4e133c9c3e3d&#x27;, updated_at=&#x27;2022-09-03T04:12:13Z&#x27; |</span><br><span class="line">|                 | created_at=&#x27;2022-09-03T04:12:13Z&#x27;, direction=&#x27;egress&#x27;, ethertype=&#x27;IPv4&#x27;, id=&#x27;966133fd-099f-4b18-a2a0-0023fa9a8226&#x27;, updated_at=&#x27;2022-09-03T04:12:13Z&#x27; |</span><br><span class="line">| updated_at      | 2022-09-03T04:12:13Z                                                                                                                                  |</span><br><span class="line">+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack security group rule create group_web --ingress --ethertype IPv4 --protocol tcp --dst-port 80:80 </span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">| Field             | Value                                |</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">| created_at        | 2022-09-03T04:22:45Z                 |</span><br><span class="line">| description       |                                      |</span><br><span class="line">| direction         | ingress                              |</span><br><span class="line">| ether_type        | IPv4                                 |</span><br><span class="line">| id                | 35ebf6fa-9668-4155-bf90-09623279c17f |</span><br><span class="line">| name              | None                                 |</span><br><span class="line">| port_range_max    | 80                                   |</span><br><span class="line">| port_range_min    | 80                                   |</span><br><span class="line">| project_id        | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| protocol          | tcp                                  |</span><br><span class="line">| remote_group_id   | None                                 |</span><br><span class="line">| remote_ip_prefix  | 0.0.0.0/0                            |</span><br><span class="line">| revision_number   | 0                                    |</span><br><span class="line">| security_group_id | f31a44fe-5e5c-47d2-9925-e2a1a8b6cb92 |</span><br><span class="line">| updated_at        | 2022-09-03T04:22:45Z                 |</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">[root@controller ~]# openstack security group rule create group_web --ingress --ethertype IPv4 --protocol tcp --dst-port 443:443 </span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">| Field             | Value                                |</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">| created_at        | 2022-09-03T04:23:09Z                 |</span><br><span class="line">| description       |                                      |</span><br><span class="line">| direction         | ingress                              |</span><br><span class="line">| ether_type        | IPv4                                 |</span><br><span class="line">| id                | 24780db0-b8f7-4630-a5b0-ec576be11909 |</span><br><span class="line">| name              | None                                 |</span><br><span class="line">| port_range_max    | 443                                  |</span><br><span class="line">| port_range_min    | 443                                  |</span><br><span class="line">| project_id        | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| protocol          | tcp                                  |</span><br><span class="line">| remote_group_id   | None                                 |</span><br><span class="line">| remote_ip_prefix  | 0.0.0.0/0                            |</span><br><span class="line">| revision_number   | 0                                    |</span><br><span class="line">| security_group_id | f31a44fe-5e5c-47d2-9925-e2a1a8b6cb92 |</span><br><span class="line">| updated_at        | 2022-09-03T04:23:09Z                 |</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">[root@controller ~]# openstack security group show group_web</span><br><span class="line">+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Field           | Value                                                                                                                                                                                                                                            |</span><br><span class="line">+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| created_at      | 2022-09-03T04:12:13Z                                                                                                                                                                                                                             |</span><br><span class="line">| description     | 777                                                                                                                                                                                                                                              |</span><br><span class="line">| id              | f31a44fe-5e5c-47d2-9925-e2a1a8b6cb92                                                                                                                                                                                                             |</span><br><span class="line">| name            | group_web                                                                                                                                                                                                                                        |</span><br><span class="line">| project_id      | 4350b89460a148d7bf1b2ae63296a6bd                                                                                                                                                                                                                 |</span><br><span class="line">| revision_number | 4                                                                                                                                                                                                                                                |</span><br><span class="line">| rules           | created_at=&#x27;2022-09-03T04:23:09Z&#x27;, direction=&#x27;ingress&#x27;, ethertype=&#x27;IPv4&#x27;, id=&#x27;24780db0-b8f7-4630-a5b0-ec576be11909&#x27;, port_range_max=&#x27;443&#x27;, port_range_min=&#x27;443&#x27;, protocol=&#x27;tcp&#x27;, remote_ip_prefix=&#x27;0.0.0.0/0&#x27;, updated_at=&#x27;2022-09-03T04:23:09Z&#x27; |</span><br><span class="line">|                 | created_at=&#x27;2022-09-03T04:22:45Z&#x27;, direction=&#x27;ingress&#x27;, ethertype=&#x27;IPv4&#x27;, id=&#x27;35ebf6fa-9668-4155-bf90-09623279c17f&#x27;, port_range_max=&#x27;80&#x27;, port_range_min=&#x27;80&#x27;, protocol=&#x27;tcp&#x27;, remote_ip_prefix=&#x27;0.0.0.0/0&#x27;, updated_at=&#x27;2022-09-03T04:22:45Z&#x27;   |</span><br><span class="line">|                 | created_at=&#x27;2022-09-03T04:12:13Z&#x27;, direction=&#x27;egress&#x27;, ethertype=&#x27;IPv6&#x27;, id=&#x27;4acce720-f30c-472e-a5d8-4e133c9c3e3d&#x27;, updated_at=&#x27;2022-09-03T04:12:13Z&#x27;                                                                                            |</span><br><span class="line">|                 | created_at=&#x27;2022-09-03T04:12:13Z&#x27;, direction=&#x27;egress&#x27;, ethertype=&#x27;IPv4&#x27;, id=&#x27;966133fd-099f-4b18-a2a0-0023fa9a8226&#x27;, updated_at=&#x27;2022-09-03T04:12:13Z&#x27;                                                                                            |</span><br><span class="line">| updated_at      | 2022-09-03T04:23:09Z                                                                                                                                                                                                                             |</span><br><span class="line">+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure>

<p>9.网络管理 使用命令将int-net1网络设置为共享，然后查看int-net1网络的详细信息。 将命令和返回信息提交到答题框。【0.5 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack network set int-net1 --share</span><br><span class="line">[root@controller ~]# openstack network show int-net1</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| Field                     | Value                                |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| admin_state_up            | UP                                   |</span><br><span class="line">| availability_zone_hints   |                                      |</span><br><span class="line">| availability_zones        | nova                                 |</span><br><span class="line">| created_at                | 2022-09-03T02:20:07Z                 |</span><br><span class="line">| description               |                                      |</span><br><span class="line">| dns_domain                | None                                 |</span><br><span class="line">| id                        | 89062681-1008-4083-8dfb-a5c6763eec7f |</span><br><span class="line">| ipv4_address_scope        | None                                 |</span><br><span class="line">| ipv6_address_scope        | None                                 |</span><br><span class="line">| is_default                | None                                 |</span><br><span class="line">| is_vlan_transparent       | None                                 |</span><br><span class="line">| mtu                       | 1450                                 |</span><br><span class="line">| name                      | int-net1                             |</span><br><span class="line">| port_security_enabled     | True                                 |</span><br><span class="line">| project_id                | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| provider:network_type     | vxlan                                |</span><br><span class="line">| provider:physical_network | None                                 |</span><br><span class="line">| provider:segmentation_id  | 170                                  |</span><br><span class="line">| qos_policy_id             | None                                 |</span><br><span class="line">| revision_number           | 4                                    |</span><br><span class="line">| router:external           | Internal                             |</span><br><span class="line">| segments                  | None                                 |</span><br><span class="line">| shared                    | True                                 |</span><br><span class="line">| status                    | ACTIVE                               |</span><br><span class="line">| subnets                   | 95eefbdd-5669-4840-a1e6-2bcd67ae1208 |</span><br><span class="line">| tags                      |                                      |</span><br><span class="line">| updated_at                | 2022-09-03T04:25:28Z                 |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br></pre></td></tr></table></figure>

<p>10.网络管理 使用 dashboard 界面使用 centos7.5 镜像创建一台云主机，云主机命名为 test-01，使用命令查看浮动 IP 地址池，使用命令创建一个浮动 IP，然后将浮动 IP 绑定到云主机上。 将命令和返回信息提交到答题框。【1 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack floating ip create ext-net --subnet ext-subnet</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| Field               | Value                                |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| created_at          | 2022-09-03T04:32:48Z                 |</span><br><span class="line">| description         |                                      |</span><br><span class="line">| fixed_ip_address    | None                                 |</span><br><span class="line">| floating_ip_address | 172.18.7.101                         |</span><br><span class="line">| floating_network_id | 2ba422fb-1ad9-4509-b9a4-643b82112ce6 |</span><br><span class="line">| id                  | d896a909-e912-4bd3-9545-4193eb6636b6 |</span><br><span class="line">| name                | 172.18.7.101                         |</span><br><span class="line">| port_id             | None                                 |</span><br><span class="line">| project_id          | 4350b89460a148d7bf1b2ae63296a6bd     |</span><br><span class="line">| qos_policy_id       | None                                 |</span><br><span class="line">| revision_number     | 0                                    |</span><br><span class="line">| router_id           | None                                 |</span><br><span class="line">| status              | DOWN                                 |</span><br><span class="line">| subnet_id           | 72ec3fbe-05b5-4282-a01a-7f22b1d432ca |</span><br><span class="line">| updated_at          | 2022-09-03T04:32:48Z                 |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">[root@controller ~]# openstack port list</span><br><span class="line">+--------------------------------------+------+-------------------+-----------------------------------------------------------------------------+--------+</span><br><span class="line">| ID                                   | Name | MAC Address       | Fixed IP Addresses                                                          | Status |</span><br><span class="line">+--------------------------------------+------+-------------------+-----------------------------------------------------------------------------+--------+</span><br><span class="line">| 165a8658-212f-4d5c-9f57-34e6bfc191fb |      | fa:16:3e:af:b7:9b | ip_address=&#x27;172.18.7.102&#x27;, subnet_id=&#x27;72ec3fbe-05b5-4282-a01a-7f22b1d432ca&#x27; | ACTIVE |</span><br><span class="line">| 268a1196-3f7d-46f7-a253-c5dd35e02d36 |      | fa:16:3e:da:05:46 | ip_address=&#x27;10.0.0.106&#x27;, subnet_id=&#x27;95eefbdd-5669-4840-a1e6-2bcd67ae1208&#x27;   | DOWN   |</span><br><span class="line">| 2ce34897-ec52-4078-8cb0-698b86ab8150 |      | fa:16:3e:42:a4:6a | ip_address=&#x27;172.18.7.100&#x27;, subnet_id=&#x27;72ec3fbe-05b5-4282-a01a-7f22b1d432ca&#x27; | ACTIVE |</span><br><span class="line">| 7bae72cd-cd60-4507-8390-6ee41294232d |      | fa:16:3e:24:e7:d5 | ip_address=&#x27;172.18.7.101&#x27;, subnet_id=&#x27;72ec3fbe-05b5-4282-a01a-7f22b1d432ca&#x27; | N/A    |</span><br><span class="line">| 7db84b25-4b39-4865-9ac0-86331f2f0723 |      | fa:16:3e:b9:a4:ba | ip_address=&#x27;10.0.0.1&#x27;, subnet_id=&#x27;95eefbdd-5669-4840-a1e6-2bcd67ae1208&#x27;     | ACTIVE |</span><br><span class="line">| 853035c4-c428-4f3c-b855-bf9fa6909c7e |      | fa:16:3e:f7:6c:8b | ip_address=&#x27;10.0.0.104&#x27;, subnet_id=&#x27;95eefbdd-5669-4840-a1e6-2bcd67ae1208&#x27;   | ACTIVE |</span><br><span class="line">| e77ba178-5500-4f8d-b4e9-de61e42dc387 |      | fa:16:3e:27:0d:fd | ip_address=&#x27;10.0.1.100&#x27;, subnet_id=&#x27;4a736169-b4e4-4c88-bd7b-b8ea02443fdf&#x27;   | ACTIVE |</span><br><span class="line">| ef84f74d-acef-4eb6-893b-d1dc4996f7f9 |      | fa:16:3e:62:af:e0 | ip_address=&#x27;10.0.0.100&#x27;, subnet_id=&#x27;95eefbdd-5669-4840-a1e6-2bcd67ae1208&#x27;   | ACTIVE |</span><br><span class="line">+--------------------------------------+------+-------------------+-----------------------------------------------------------------------------+--------+</span><br><span class="line">[root@controller ~]# openstack floating ip list</span><br><span class="line">+--------------------------------------+---------------------+------------------+------+--------------------------------------+----------------------------------+</span><br><span class="line">| ID                                   | Floating IP Address | Fixed IP Address | Port | Floating Network                     | Project                          |</span><br><span class="line">+--------------------------------------+---------------------+------------------+------+--------------------------------------+----------------------------------+</span><br><span class="line">| d896a909-e912-4bd3-9545-4193eb6636b6 | 172.18.7.101        | None             | None | 2ba422fb-1ad9-4509-b9a4-643b82112ce6 | 4350b89460a148d7bf1b2ae63296a6bd |</span><br><span class="line">+--------------------------------------+---------------------+------------------+------+--------------------------------------+----------------------------------+</span><br><span class="line">[root@controller ~]# openstack floating ip set 172.18.7.101 --port 853035c4-c428-4f3c-b855-bf9fa6909c7e</span><br></pre></td></tr></table></figure>

<p>11.虚拟机管理 使用 openstack 命令利用 centos7.5 镜像创建一台云主机，连接 int-net1 网 络，云主机名称为 test-02。创建成功后使用命令查看云主机详细信息，确定该 云主机是处于计算节点还是控制节点。如果云主机处于控制节点上请将其冷迁移 到计算节点，如果如果云主机处于计算节点上请将其冷迁移到控制节点。 本题全部流程请使用命令完成，请将全部命令和结果粘贴到答题框。【3 分】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack server create test-02 --network int-net1 --flavor flavor1 --image cirros</span><br><span class="line">+-------------------------------------+------------------------------------------------+</span><br><span class="line">| Field                               | Value                                          |</span><br><span class="line">+-------------------------------------+------------------------------------------------+</span><br><span class="line">| OS-DCF:diskConfig                   | MANUAL                                         |</span><br><span class="line">| OS-EXT-AZ:availability_zone         |                                                |</span><br><span class="line">| OS-EXT-SRV-ATTR:host                | None                                           |</span><br><span class="line">| OS-EXT-SRV-ATTR:hypervisor_hostname | None                                           |</span><br><span class="line">| OS-EXT-SRV-ATTR:instance_name       |                                                |</span><br><span class="line">| OS-EXT-STS:power_state              | NOSTATE                                        |</span><br><span class="line">| OS-EXT-STS:task_state               | scheduling                                     |</span><br><span class="line">| OS-EXT-STS:vm_state                 | building                                       |</span><br><span class="line">| OS-SRV-USG:launched_at              | None                                           |</span><br><span class="line">| OS-SRV-USG:terminated_at            | None                                           |</span><br><span class="line">| accessIPv4                          |                                                |</span><br><span class="line">| accessIPv6                          |                                                |</span><br><span class="line">| addresses                           |                                                |</span><br><span class="line">| adminPass                           | 4jH8K2fgLce9                                   |</span><br><span class="line">| config_drive                        |                                                |</span><br><span class="line">| created                             | 2022-09-03T04:53:28Z                           |</span><br><span class="line">| flavor                              | flavor1 (471938fe-abdd-4ec1-8c59-3f81e703d3c9) |</span><br><span class="line">| hostId                              |                                                |</span><br><span class="line">| id                                  | 7c9cc958-b2a1-4b24-bb0a-eb8de9c1612a           |</span><br><span class="line">| image                               | cirros (cbfdbd87-71df-4be7-8eb2-6904f781239c)  |</span><br><span class="line">| key_name                            | None                                           |</span><br><span class="line">| name                                | test-02                                        |</span><br><span class="line">| progress                            | 0                                              |</span><br><span class="line">| project_id                          | 4350b89460a148d7bf1b2ae63296a6bd               |</span><br><span class="line">| properties                          |                                                |</span><br><span class="line">| security_groups                     | name=&#x27;default&#x27;                                 |</span><br><span class="line">| status                              | BUILD                                          |</span><br><span class="line">| updated                             | 2022-09-03T04:53:28Z                           |</span><br><span class="line">| user_id                             | 4aec1580c77d4222964b7947d3239a88               |</span><br><span class="line">| volumes_attached                    |                                                |</span><br><span class="line">+-------------------------------------+------------------------------------------------+</span><br><span class="line">[root@controller ~]# openstack server show test-02</span><br><span class="line">+-------------------------------------+----------------------------------------------------------+</span><br><span class="line">| Field                               | Value                                                    |</span><br><span class="line">+-------------------------------------+----------------------------------------------------------+</span><br><span class="line">| OS-DCF:diskConfig                   | MANUAL                                                   |</span><br><span class="line">| OS-EXT-AZ:availability_zone         | nova                                                     |</span><br><span class="line">| OS-EXT-SRV-ATTR:host                | compute                                                  |</span><br><span class="line">| OS-EXT-SRV-ATTR:hypervisor_hostname | compute                                                  |</span><br><span class="line">| OS-EXT-SRV-ATTR:instance_name       | instance-00000003                                        |</span><br><span class="line">| OS-EXT-STS:power_state              | Running                                                  |</span><br><span class="line">| OS-EXT-STS:task_state               | None                                                     |</span><br><span class="line">| OS-EXT-STS:vm_state                 | active                                                   |</span><br><span class="line">| OS-SRV-USG:launched_at              | 2022-09-03T04:53:35.000000                               |</span><br><span class="line">| OS-SRV-USG:terminated_at            | None                                                     |</span><br><span class="line">| accessIPv4                          |                                                          |</span><br><span class="line">| accessIPv6                          |                                                          |</span><br><span class="line">| addresses                           | int-net1=10.0.0.103                                      |</span><br><span class="line">| config_drive                        |                                                          |</span><br><span class="line">| created                             | 2022-09-03T04:53:28Z                                     |</span><br><span class="line">| flavor                              | flavor1 (471938fe-abdd-4ec1-8c59-3f81e703d3c9)           |</span><br><span class="line">| hostId                              | 2f20d41597d1aadaae23573c0d04d519d2bbad28e3c962ed11f16545 |</span><br><span class="line">| id                                  | 7c9cc958-b2a1-4b24-bb0a-eb8de9c1612a                     |</span><br><span class="line">| image                               | cirros (cbfdbd87-71df-4be7-8eb2-6904f781239c)            |</span><br><span class="line">| key_name                            | None                                                     |</span><br><span class="line">| name                                | test-02                                                  |</span><br><span class="line">| progress                            | 0                                                        |</span><br><span class="line">| project_id                          | 4350b89460a148d7bf1b2ae63296a6bd                         |</span><br><span class="line">| properties                          |                                                          |</span><br><span class="line">| security_groups                     | name=&#x27;default&#x27;                                           |</span><br><span class="line">| status                              | ACTIVE                                                   |</span><br><span class="line">| updated                             | 2022-09-03T04:53:35Z                                     |</span><br><span class="line">| user_id                             | 4aec1580c77d4222964b7947d3239a88                         |</span><br><span class="line">| volumes_attached                    |                                                          |</span><br><span class="line">+-------------------------------------+----------------------------------------------------------+</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack server stop test-02</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# scp -r /var/lib/nova/instances/7c9cc958-b2a1-4b24-bb0a-eb8de9c1612a root@controller:/var/lib/nova/instances/</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# chown -R nova:nova /var/lib/nova/instances/7c9cc958-b2a1-4b24-bb0a-eb8de9c1612a</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [nova]&gt; update instances set host=&#x27;controller&#x27;,node=&#x27;controller&#x27; where uuid=&#x27;7c9cc958-b2a1-4b24-bb0a-eb8de9c1612a&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack server show test-02</span><br><span class="line">+-------------------------------------+----------------------------------------------------------+</span><br><span class="line">| Field                               | Value                                                    |</span><br><span class="line">+-------------------------------------+----------------------------------------------------------+</span><br><span class="line">| OS-DCF:diskConfig                   | MANUAL                                                   |</span><br><span class="line">| OS-EXT-AZ:availability_zone         | nova                                                     |</span><br><span class="line">| OS-EXT-SRV-ATTR:host                | controller                                               |</span><br><span class="line">| OS-EXT-SRV-ATTR:hypervisor_hostname | controller                                               |</span><br><span class="line">| OS-EXT-SRV-ATTR:instance_name       | instance-00000003                                        |</span><br><span class="line">| OS-EXT-STS:power_state              | Shutdown                                                 |</span><br><span class="line">| OS-EXT-STS:task_state               | None                                                     |</span><br><span class="line">| OS-EXT-STS:vm_state                 | stopped                                                  |</span><br><span class="line">| OS-SRV-USG:launched_at              | 2022-09-03T04:53:35.000000                               |</span><br><span class="line">| OS-SRV-USG:terminated_at            | None                                                     |</span><br><span class="line">| accessIPv4                          |                                                          |</span><br><span class="line">| accessIPv6                          |                                                          |</span><br><span class="line">| addresses                           | int-net1=10.0.0.103                                      |</span><br><span class="line">| config_drive                        |                                                          |</span><br><span class="line">| created                             | 2022-09-03T04:53:28Z                                     |</span><br><span class="line">| flavor                              | flavor1 (471938fe-abdd-4ec1-8c59-3f81e703d3c9)           |</span><br><span class="line">| hostId                              | f389bf51bf4a9682dd0667b3a4e643427d68c0f3373c065e3a9e2f15 |</span><br><span class="line">| id                                  | 7c9cc958-b2a1-4b24-bb0a-eb8de9c1612a                     |</span><br><span class="line">| image                               | cirros (cbfdbd87-71df-4be7-8eb2-6904f781239c)            |</span><br><span class="line">| key_name                            | None                                                     |</span><br><span class="line">| name                                | test-02                                                  |</span><br><span class="line">| project_id                          | 4350b89460a148d7bf1b2ae63296a6bd                         |</span><br><span class="line">| properties                          |                                                          |</span><br><span class="line">| security_groups                     | name=&#x27;default&#x27;                                           |</span><br><span class="line">| status                              | SHUTOFF                                                  |</span><br><span class="line">| updated                             | 2022-09-03T05:01:54Z                                     |</span><br><span class="line">| user_id                             | 4aec1580c77d4222964b7947d3239a88                         |</span><br><span class="line">| volumes_attached                    |                                                          |</span><br><span class="line">+-------------------------------------+----------------------------------------------------------+</span><br></pre></td></tr></table></figure>


      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/09/06/%E9%87%91%E7%A0%96%E5%9B%BD%E8%B5%9B%E6%A0%B7%E9%A2%98%E4%BA%8C/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          金砖国赛样题二
        
      </div>
    </a>
  
  
    <a href="/2022/07/01/2022%E6%B5%99%E6%B1%9F%E7%9C%81%E4%BA%91%E8%AE%A1%E7%AE%97%E6%A0%B7%E9%A2%98/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">2022浙江省云计算样题</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>






</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2023 Miss
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/preccrep/hexo-theme-jelly" target="_blank">Jelly</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="/js/main.js"></script>




  </div>
</body>
</html>